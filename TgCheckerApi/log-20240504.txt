2024-05-04 13:19:54.419 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-04 13:19:54.677 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-04 13:19:54.719 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-04 13:19:54.720 +03:00 [INF] Quartz Scheduler created
2024-05-04 13:19:54.721 +03:00 [INF] RAMJobStore initialized.
2024-05-04 13:19:54.722 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-04 13:19:54.723 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-04 13:19:54.724 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-04 13:19:54.725 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-04 13:19:54.772 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-04 13:19:54.848 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-04 13:19:54.848 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-04 13:19:54.882 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-04T13:19:54.8762338+03:00"
2024-05-04 13:19:54.882 +03:00 [INF] RecalculateTopPosJob started at "2024-05-04T13:19:54.8804618+03:00"
2024-05-04 13:19:56.446 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-04 13:19:56.453 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-04 13:19:56.475 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-04 13:19:56.743 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-04 13:19:56.777 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-04T13:19:56.7778155+03:00"
2024-05-04 13:20:05.848 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-05-04 13:20:05.851 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-05-04 13:21:25.965 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-04 13:21:27.032 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-04 13:21:27.076 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-04 13:21:27.076 +03:00 [INF] Quartz Scheduler created
2024-05-04 13:21:27.077 +03:00 [INF] RAMJobStore initialized.
2024-05-04 13:21:27.078 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-04 13:21:27.079 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-04 13:21:27.079 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-04 13:21:27.080 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-04 13:21:27.122 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-04 13:21:27.208 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-04 13:21:27.209 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-04 13:21:27.268 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-04T13:21:27.2653855+03:00"
2024-05-04 13:21:27.341 +03:00 [INF] RecalculateTopPosJob started at "2024-05-04T13:21:27.3408738+03:00"
2024-05-04 13:21:30.455 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-04 13:21:30.455 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-04 13:21:30.489 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-04 13:21:31.042 +03:00 [INF] Executed DbCommand (212ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-04 13:21:31.076 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-04T13:21:31.0762829+03:00"
2024-05-04 13:22:34.346 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-04 13:22:34.796 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-04 13:22:34.842 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-04 13:22:34.843 +03:00 [INF] Quartz Scheduler created
2024-05-04 13:22:34.845 +03:00 [INF] RAMJobStore initialized.
2024-05-04 13:22:34.846 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-04 13:22:34.846 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-04 13:22:34.847 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-04 13:22:34.849 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-04 13:22:34.891 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-04 13:22:34.974 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-04 13:22:34.975 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-04 13:22:35.007 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-04T13:22:35.0010807+03:00"
2024-05-04 13:22:35.008 +03:00 [INF] RecalculateTopPosJob started at "2024-05-04T13:22:35.0081440+03:00"
2024-05-04 13:22:37.018 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-04 13:22:37.018 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-04 13:22:37.052 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-04 13:22:37.209 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-04 13:22:37.248 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-04T13:22:37.2488965+03:00"
2024-05-04 13:22:40.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-04 13:22:45.526 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-04 13:22:45.527 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-04 13:22:45.525 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-05-04 13:22:45.530 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-04 13:22:45.532 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-05-04 13:22:45.532 +03:00 [INF] Hosting environment: Development
2024-05-04 13:22:45.534 +03:00 [INF] Content root path: C:\Users\timar\Source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-04 13:22:47.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-04 13:22:48.531 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 809.8268ms
2024-05-04 13:22:48.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-04 13:22:48.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-04 13:22:48.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 14.8070ms
2024-05-04 13:22:48.692 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.0680ms
2024-05-04 13:22:49.189 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-04 13:22:49.341 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/favicon-32x32.png - -
2024-05-04 13:22:49.357 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-05-04 13:22:49.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/favicon-32x32.png - - - 200 628 image/png 17.5205ms
2024-05-04 13:22:49.409 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 220.5672ms
2024-05-04 13:23:06.694 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (tgsearch.info:8443)
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|277_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(HttpRequestMessage request)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\Source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-04 13:23:09.521 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Telegram/игры - -
2024-05-04 13:23:09.634 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.Search (TgCheckerApi)'
2024-05-04 13:23:09.683 +03:00 [INF] Route matched with {action = "Search", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Search(System.String) on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-05-04 13:23:10.096 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-04 13:23:10.145 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.Search (TgCheckerApi) in 451.1575ms
2024-05-04 13:23:10.150 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.Search (TgCheckerApi)'
2024-05-04 13:23:10.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Telegram/игры - - - 200 1421 application/json;+charset=utf-8 637.1299ms
