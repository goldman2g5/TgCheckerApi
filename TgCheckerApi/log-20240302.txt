2024-03-02 10:12:51.135 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-02 10:12:51.401 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-02 10:12:51.447 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-02 10:12:51.448 +03:00 [INF] Quartz Scheduler created
2024-03-02 10:12:51.448 +03:00 [INF] RAMJobStore initialized.
2024-03-02 10:12:51.449 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-02 10:12:51.450 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-02 10:12:51.451 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-02 10:12:51.453 +03:00 [INF] JobFactory set to: TgCheckerApi.Job.QuartzJobFactory
2024-03-02 10:12:51.509 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-02 10:12:51.706 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-02 10:12:51.707 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-02 10:12:51.710 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-02 10:12:51.711 +03:00 [INF] Hosting environment: Development
2024-03-02 10:12:51.711 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-02 10:12:52.143 +03:00 [INF] RecalculateTopPosJob started at "2024-03-02T10:12:52.1429649+03:00"
2024-03-02 10:12:57.665 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger - -
2024-03-02 10:12:57.737 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger - - - 301 0 - 75.5481ms
2024-03-02 10:12:58.193 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-02 10:12:58.893 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 699.8540ms
2024-03-02 10:12:58.918 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - -
2024-03-02 10:12:58.918 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - -
2024-03-02 10:12:58.926 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-02 10:12:58.928 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - -
2024-03-02 10:12:58.943 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 16.8769ms
2024-03-02 10:12:58.970 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-02 10:12:58.970 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-02 10:12:58.970 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-02 10:12:58.971 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 52.6079ms
2024-03-02 10:12:58.971 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 53.3408ms
2024-03-02 10:12:58.973 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - - - 200 144929 text/css 44.3787ms
2024-03-02 10:12:58.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-02 10:12:59.018 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.7169ms
2024-03-02 10:12:59.077 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-02 10:12:59.089 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/favicon-32x32.png - -
2024-03-02 10:12:59.092 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-03-02 10:12:59.093 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/favicon-32x32.png - - - 200 628 image/png 4.2746ms
2024-03-02 10:12:59.213 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 135.8544ms
2024-03-02 10:13:00.285 +03:00 [INF] Executed DbCommand (1,497ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-02 10:13:00.861 +03:00 [INF] Executed DbCommand (320ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
2024-03-02 10:13:01.092 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-02T10:13:01.0927154+03:00"
2024-03-02 10:13:01.661 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-02 10:13:01.663 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-02 10:14:27.284 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-02 10:14:27.288 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-02 10:14:27.402 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-02 10:14:27.415 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-02 10:14:27.419 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 135.0528ms
2024-03-02 10:14:27.484 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=QCOs9a2W5etDCuUfgzMb1Q - -
2024-03-02 10:14:27.486 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-02 10:14:41.848 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-03-02 10:14:44.546 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/User application/json 165
2024-03-02 10:14:44.549 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.PostUser (TgCheckerApi)'
2024-03-02 10:14:44.569 +03:00 [INF] Route matched with {action = "PostUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.BaseModels.User]] PostUser(TgCheckerApi.Models.UserPostModel) on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-03-02 10:14:45.025 +03:00 [INF] Executed DbCommand (216ms) [Parameters=[@__user_TelegramId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.telegram_id = @__user_TelegramId_0
LIMIT 1
2024-03-02 10:14:45.046 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-03-02 10:14:45.051 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.PostUser (TgCheckerApi) in 476.8731ms
2024-03-02 10:14:45.053 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.PostUser (TgCheckerApi)'
2024-03-02 10:14:45.066 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/User application/json 165 - 400 - text/plain;+charset=utf-8 520.0764ms
2024-03-02 10:14:46.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Channel/ByUser/1342147816 - -
2024-03-02 10:14:46.149 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannelsByUser (TgCheckerApi)'
2024-03-02 10:14:46.153 +03:00 [INF] Route matched with {action = "GetChannelsByUser", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.BaseModels.Channel]]] GetChannelsByUser(Int64) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:14:46.257 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
LEFT JOIN "User" AS u ON c."user" = u.id
WHERE u.telegram_id = @__userId_0
2024-03-02 10:14:46.260 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:14:46.280 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannelsByUser (TgCheckerApi) in 125.7949ms
2024-03-02 10:14:46.281 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannelsByUser (TgCheckerApi)'
2024-03-02 10:14:46.282 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Channel/ByUser/1342147816 - - - 200 15967 application/json;+charset=utf-8 134.9084ms
2024-03-02 10:14:47.655 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Channel/80 - -
2024-03-02 10:14:47.658 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-02 10:14:47.662 +03:00 [INF] Route matched with {action = "GetChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.ChannelGetModel]] GetChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:14:47.680 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-02 10:14:47.864 +03:00 [INF] Executed DbCommand (134ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-03-02 10:14:47.978 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-03-02 10:14:47.986 +03:00 [INF] Executing ObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.ChannelGetModel'.
2024-03-02 10:14:47.989 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi) in 324.8467ms
2024-03-02 10:14:47.990 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-02 10:14:47.991 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Channel/80 - - - 200 15629 application/json;+charset=utf-8 335.7855ms
2024-03-02 10:14:48.921 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0
2024-03-02 10:14:48.923 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:14:48.929 +03:00 [INF] Route matched with {action = "BumpChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BumpChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:14:48.941 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-02 10:14:48.996 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.multiplier
FROM "ChannelHasSubscription" AS c
LEFT JOIN "SubType" AS s ON c.type_id = s.id
WHERE c.channel_id = @__channelId_0
ORDER BY c.type_id DESC
LIMIT 1
2024-03-02 10:14:49.029 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET bumps = @p0, last_bump = @p1, notification_sent = @p2
WHERE id = @p3;
2024-03-02 10:14:49.035 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-03-02 10:14:49.036 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi) in 103.2264ms
2024-03-02 10:14:49.037 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:14:49.038 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0 - 204 - - 116.9277ms
2024-03-02 10:15:58.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:15:58.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:15:58.503 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:15:58.698 +03:00 [INF] Executed DbCommand (137ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:15:58.765 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:15:58.778 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:15:58.910 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
2024-03-02 10:15:58.929 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:15:58.940 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:15:58.941 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:00.163 +03:00 [INF] Received HTTP response headers after 1218.5978ms - 200
2024-03-02 10:16:00.164 +03:00 [INF] End processing HTTP request after 1224.2064ms - 200
2024-03-02 10:16:00.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:16:00.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:16:00.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET notification_sent = @p0
WHERE id = @p1;
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-03-02 10:16:00.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:16:00.179 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:00.180 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:01.295 +03:00 [INF] Received HTTP response headers after 1114.644ms - 200
2024-03-02 10:16:01.296 +03:00 [INF] End processing HTTP request after 1117.0377ms - 200
2024-03-02 10:16:01.298 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:16:01.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:16:01.305 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
2024-03-02 10:16:01.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:16:01.311 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:01.312 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:02.695 +03:00 [INF] Received HTTP response headers after 1381.9681ms - 200
2024-03-02 10:16:02.696 +03:00 [INF] End processing HTTP request after 1385.6824ms - 200
2024-03-02 10:16:02.698 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:16:02.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:16:02.706 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
2024-03-02 10:16:02.710 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:16:02.711 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:02.712 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:16:04.100 +03:00 [INF] Received HTTP response headers after 1386.4822ms - 200
2024-03-02 10:16:04.101 +03:00 [INF] End processing HTTP request after 1389.4008ms - 200
2024-03-02 10:16:04.103 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:16:04.119 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 5606.8007ms
2024-03-02 10:16:04.120 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:16:04.122 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 86904 application/json;+charset=utf-8 5626.6386ms
2024-03-02 10:16:30.064 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0
2024-03-02 10:16:30.065 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:16:30.066 +03:00 [INF] Route matched with {action = "BumpChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BumpChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:16:30.071 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-02 10:16:30.074 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-03-02 10:16:30.075 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi) in 7.8297ms
2024-03-02 10:16:30.077 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:16:30.078 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0 - 400 - text/plain;+charset=utf-8 14.4019ms
2024-03-02 10:16:52.812 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-02 10:16:52.983 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-02 10:16:53.020 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-02 10:16:53.021 +03:00 [INF] Quartz Scheduler created
2024-03-02 10:16:53.025 +03:00 [INF] RAMJobStore initialized.
2024-03-02 10:16:53.026 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-02 10:16:53.027 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-02 10:16:53.027 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-02 10:16:53.028 +03:00 [INF] JobFactory set to: TgCheckerApi.Job.QuartzJobFactory
2024-03-02 10:16:53.071 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-02 10:16:53.165 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-02 10:16:53.166 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-02 10:16:53.170 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-02 10:16:53.171 +03:00 [INF] Hosting environment: Development
2024-03-02 10:16:53.171 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-02 10:16:53.254 +03:00 [INF] RecalculateTopPosJob started at "2024-03-02T10:16:53.2543098+03:00"
2024-03-02 10:16:53.390 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger - -
2024-03-02 10:16:53.463 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger - - - 301 0 - 75.1955ms
2024-03-02 10:16:53.472 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-02 10:16:53.732 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 260.4687ms
2024-03-02 10:16:53.758 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - -
2024-03-02 10:16:53.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - -
2024-03-02 10:16:53.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - -
2024-03-02 10:16:53.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-02 10:16:53.768 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.2359ms
2024-03-02 10:16:53.819 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-02 10:16:53.819 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-02 10:16:53.819 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-02 10:16:53.821 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - - - 200 144929 text/css 62.5453ms
2024-03-02 10:16:53.821 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 62.4144ms
2024-03-02 10:16:53.830 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 71.1890ms
2024-03-02 10:16:53.838 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-02 10:16:53.863 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 25.0420ms
2024-03-02 10:16:53.941 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-02 10:16:54.090 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.8266ms
2024-03-02 10:16:55.118 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0
2024-03-02 10:16:55.123 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-02 10:16:55.192 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:16:55.216 +03:00 [INF] Route matched with {action = "BumpChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BumpChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:16:55.310 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-02 10:16:55.402 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-02 10:16:55.448 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-03-02 10:16:55.454 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi) in 232.6406ms
2024-03-02 10:16:55.456 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:16:55.469 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0 - 400 - text/plain;+charset=utf-8 350.3144ms
2024-03-02 10:16:55.478 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-02T10:16:55.4784361+03:00"
2024-03-02 10:16:57.692 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-02 10:16:57.695 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-02 10:16:57.712 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-02 10:16:57.713 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 21.2734ms
2024-03-02 10:16:57.717 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=XvHDcC596V1jvdYIIUXkNg - -
2024-03-02 10:16:57.721 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-02 10:17:03.235 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-02 10:17:03.239 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-02 10:18:44.404 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-02 10:18:44.559 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-02 10:18:44.595 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-02 10:18:44.603 +03:00 [INF] Quartz Scheduler created
2024-03-02 10:18:44.604 +03:00 [INF] RAMJobStore initialized.
2024-03-02 10:18:44.605 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-02 10:18:44.606 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-02 10:18:44.607 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-02 10:18:44.609 +03:00 [INF] JobFactory set to: TgCheckerApi.Job.QuartzJobFactory
2024-03-02 10:18:44.654 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-02 10:18:44.746 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-02 10:18:44.750 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-02 10:18:44.754 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-02 10:18:44.754 +03:00 [INF] Hosting environment: Development
2024-03-02 10:18:44.755 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-02 10:18:44.836 +03:00 [INF] RecalculateTopPosJob started at "2024-03-02T10:18:44.8359781+03:00"
2024-03-02 10:18:45.187 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-02 10:18:45.435 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 250.6934ms
2024-03-02 10:18:45.454 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-02 10:18:45.457 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 3.2383ms
2024-03-02 10:18:45.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-02 10:18:45.485 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.6061ms
2024-03-02 10:18:45.580 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-02 10:18:45.697 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.2590ms
2024-03-02 10:18:46.379 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-02 10:18:46.542 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-02T10:18:46.5427066+03:00"
2024-03-02 10:18:47.799 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-02 10:18:47.803 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-02 10:18:47.875 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-02 10:18:47.889 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-02 10:18:47.890 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 91.2057ms
2024-03-02 10:18:47.891 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=sAp-mFz07S5pOjzPsklF9w - -
2024-03-02 10:18:47.893 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-02 10:18:48.795 +03:00 [ERR] Failed to invoke hub method 'ReceiveStream'.
System.OperationCanceledException: The underlying connection was closed.
   at System.Threading.Channels.AsyncOperation`1.GetResult(Int16 token)
   at System.Threading.Channels.ChannelReader`1.ReadAllAsync(CancellationToken cancellationToken)+MoveNext()
   at System.Threading.Channels.ChannelReader`1.ReadAllAsync(CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at TgCheckerApi.Websockets.BotHub.ReceiveStream(IAsyncEnumerable`1 stream, String param) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Websockets\BotHub.cs:line 39
   at TgCheckerApi.Websockets.BotHub.ReceiveStream(IAsyncEnumerable`1 stream, String param) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Websockets\BotHub.cs:line 39
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.ExecuteMethod(ObjectMethodExecutor methodExecutor, Hub hub, Object[] arguments)
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.<Invoke>g__ExecuteInvocation|16_0(DefaultHubDispatcher`1 dispatcher, ObjectMethodExecutor methodExecutor, THub hub, Object[] arguments, AsyncServiceScope scope, IHubActivator`1 hubActivator, HubConnectionContext connection, HubMethodInvocationMessage hubMethodInvocationMessage, Boolean isStreamCall)
2024-03-02 10:18:48.797 +03:00 [INF] Executed endpoint '/BotHub'
2024-03-02 10:18:48.819 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/BotHub?id=sAp-mFz07S5pOjzPsklF9w - - - 101 - - 928.4479ms
2024-03-02 10:18:54.854 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-02 10:18:54.857 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-02 10:18:55.560 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-02 10:18:55.563 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-02 10:18:55.564 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-02 10:18:55.565 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 4.9821ms
2024-03-02 10:18:55.577 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=Sp0lkpsE_syC6Xmp9YvliA - -
2024-03-02 10:18:55.578 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-02 10:18:56.676 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:18:56.677 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:18:56.699 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:18:57.065 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:18:57.078 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:18:57.108 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 401.0798ms
2024-03-02 10:18:57.111 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:18:57.125 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 449.5760ms
2024-03-02 10:19:00.271 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:00.274 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:00.275 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:00.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:00.344 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:00.346 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 68.2263ms
2024-03-02 10:19:00.347 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:00.348 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 76.6390ms
2024-03-02 10:19:05.821 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:05.822 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:05.823 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:05.829 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:05.832 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:05.833 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 7.7727ms
2024-03-02 10:19:05.846 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:05.848 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 26.4495ms
2024-03-02 10:19:22.950 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:22.951 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:22.952 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:22.956 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:22.959 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:22.960 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 6.3723ms
2024-03-02 10:19:22.962 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:22.963 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 12.8166ms
2024-03-02 10:19:26.102 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0
2024-03-02 10:19:26.103 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:19:26.120 +03:00 [INF] Route matched with {action = "BumpChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BumpChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:19:26.308 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-02 10:19:26.315 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-03-02 10:19:26.316 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi) in 194.1527ms
2024-03-02 10:19:26.318 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:19:26.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0 - 400 - text/plain;+charset=utf-8 217.6570ms
2024-03-02 10:19:29.268 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:29.269 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:29.270 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:29.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:29.277 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:29.279 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 6.4057ms
2024-03-02 10:19:29.280 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:29.291 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 22.4057ms
2024-03-02 10:19:31.163 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:31.164 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:31.165 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:31.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:31.171 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:31.172 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 5.6347ms
2024-03-02 10:19:31.173 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:31.174 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 10.4374ms
2024-03-02 10:19:41.028 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:41.029 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:41.030 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:41.033 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:41.039 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:41.041 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 10.0385ms
2024-03-02 10:19:41.044 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:41.045 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 17.1726ms
2024-03-02 10:19:50.499 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:19:50.500 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:50.501 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:19:50.506 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:19:50.509 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:19:50.510 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 7.2609ms
2024-03-02 10:19:50.511 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:19:50.512 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 13.0100ms
2024-03-02 10:19:53.955 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0
2024-03-02 10:19:53.958 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:19:53.959 +03:00 [INF] Route matched with {action = "BumpChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BumpChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-02 10:19:53.963 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-02 10:19:53.966 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-03-02 10:19:53.967 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi) in 6.4225ms
2024-03-02 10:19:53.968 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-02 10:19:53.969 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/80 - 0 - 400 - text/plain;+charset=utf-8 14.7563ms
2024-03-02 10:20:01.007 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:20:01.008 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:20:01.009 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:20:01.012 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:20:01.015 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:20:01.016 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 5.5729ms
2024-03-02 10:20:01.017 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:20:01.018 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 11.0419ms
2024-03-02 10:20:09.165 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:20:09.166 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:20:09.167 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:20:09.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:20:09.174 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:20:09.175 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 6.2742ms
2024-03-02 10:20:09.176 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:20:09.178 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 2 application/json;+charset=utf-8 13.3324ms
2024-03-02 10:20:34.893 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-03-02 10:21:06.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Notification - -
2024-03-02 10:21:06.982 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:21:06.984 +03:00 [INF] Route matched with {action = "GetNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.NotificationModels.TelegramNotification]]] GetNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-03-02 10:21:06.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__currentTime_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id, c0.id, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0."TopPos", c0."Url", c0."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "ChannelAccess" AS c
LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
LEFT JOIN "User" AS u ON c.user_id = u.id
WHERE c0.notifications = TRUE AND (c0.notification_sent <> TRUE OR c0.notification_sent IS NULL) AND c0.last_bump IS NOT NULL AND c0.last_bump <= @__currentTime_0 AND @__currentTime_0 >= c0.last_bump + CAST(@__p_1::text || ' mins' AS interval)
2024-03-02 10:21:07.067 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:21:07.087 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:21:07.278 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
2024-03-02 10:21:07.325 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:21:07.345 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:07.346 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:08.581 +03:00 [INF] Received HTTP response headers after 1229.4228ms - 200
2024-03-02 10:21:08.582 +03:00 [INF] End processing HTTP request after 1237.6099ms - 200
2024-03-02 10:21:08.591 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:21:08.594 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:21:08.629 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET notification_sent = @p0
WHERE id = @p1;
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-03-02 10:21:08.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:21:08.675 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:08.677 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:09.836 +03:00 [INF] Received HTTP response headers after 1158.6585ms - 200
2024-03-02 10:21:09.838 +03:00 [INF] End processing HTTP request after 1162.1486ms - 200
2024-03-02 10:21:09.840 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:21:09.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:21:09.848 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
2024-03-02 10:21:09.851 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:21:09.853 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:09.854 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:11.111 +03:00 [INF] Received HTTP response headers after 1255.1988ms - 200
2024-03-02 10:21:11.112 +03:00 [INF] End processing HTTP request after 1258.7652ms - 200
2024-03-02 10:21:11.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-02 10:21:11.116 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-02 10:21:11.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, date, is_new, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
2024-03-02 10:21:11.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-02 10:21:11.124 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:11.125 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-02 10:21:12.234 +03:00 [INF] Received HTTP response headers after 1108.9395ms - 200
2024-03-02 10:21:12.236 +03:00 [INF] End processing HTTP request after 1111.7028ms - 200
2024-03-02 10:21:12.237 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.NotificationModels.TelegramNotification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-02 10:21:12.246 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi) in 5260.6131ms
2024-03-02 10:21:12.247 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetNotifications (TgCheckerApi)'
2024-03-02 10:21:12.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Notification - - - 200 689 application/json;+charset=utf-8 5268.1928ms
