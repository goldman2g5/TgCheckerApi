2024-05-05 18:30:49.545 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:30:49.800 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:30:49.849 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:30:49.851 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:30:49.852 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:30:49.854 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:30:49.855 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:30:49.856 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:30:49.857 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:30:49.905 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:30:49.980 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:30:49.981 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:30:50.015 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:30:50.0144715+03:00"
2024-05-05 18:30:50.015 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:30:50.0097079+03:00"
2024-05-05 18:30:51.332 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:30:51.332 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:30:51.364 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:30:51.519 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:30:51.557 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:30:51.5579152+03:00"
2024-05-05 18:30:54.277 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:30:54.331 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.337 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.361 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.367 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.372 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.383 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.395 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.411 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:55.225 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:30:55.327 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:30:55.328 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:30:55.330 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:30:55.332 +03:00 [INF] Hosting environment: Development
2024-05-05 18:30:55.333 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:30:55.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:30:55.694 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:30:55.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 183.0940ms
2024-05-05 18:30:55.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 8.2947ms
2024-05-05 18:30:55.703 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:30:55.714 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.0848ms
2024-05-05 18:30:55.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:30:55.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.8112ms
2024-05-05 18:31:00.147 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:31:00.150 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:31:00.177 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:31:00.272 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:31:00.307 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:31:00.435 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:31:00.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:31:00.480 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:31:04.176 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:31:04.188 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:04.193 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 16.7065ms
2024-05-05 18:31:04.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:31:04.196 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:04.292 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:31:04.298 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:04.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:04.333 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:04.341 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:04.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:04.391 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:04.399 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 48.4226ms
2024-05-05 18:31:04.403 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:04.420 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 92.3077ms
2024-05-05 18:31:04.644 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:31:04.658 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:04.723 +03:00 [INF] initializing user data update
2024-05-05 18:31:04.749 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:31:04.752 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:31:04.800 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:31:04.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:31:04.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:31:04.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:31:04.818 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:31:04.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:04.876 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:04.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:04.911 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:31:05.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.098 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:31:05.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:31:05.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:31:05.256 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:31:05.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:31:05.291 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:05.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:05.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:05.300 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:31:05.302 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:31:05.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:31:05.319 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:31:05.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:31:05.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:31:05.337 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:31:05.392 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1089.23ms
2024-05-05 18:31:05.393 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:31:05.394 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 1200.5213ms
2024-05-05 18:31:05.415 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:31:05.416 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:05.417 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.9341ms
2024-05-05 18:31:05.418 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:31:05.419 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:05.420 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:31:05.424 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:31:05.431 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:05.432 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:05.434 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:05.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:05.439 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:05.449 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:05.450 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 12.9935ms
2024-05-05 18:31:05.451 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:05.452 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 20.8811ms
2024-05-05 18:31:05.458 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:31:05.467 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:31:05.472 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 46.2479ms
2024-05-05 18:31:05.473 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:31:05.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 58.2749ms
2024-05-05 18:31:07.054 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:31:07.055 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:07.057 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:07.062 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:31:07.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:07.075 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:31:07.076 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 12.6842ms
2024-05-05 18:31:07.077 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:07.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 24.7315ms
2024-05-05 18:31:11.552 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:31:11.554 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:11.556 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.7149ms
2024-05-05 18:31:11.557 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:31:11.558 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:11.559 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:11.563 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:31:11.580 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:11.580 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:11.583 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:11.584 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:11.594 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:11.603 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:11.607 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:11.610 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 17.4903ms
2024-05-05 18:31:11.611 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:11.612 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.7059ms
2024-05-05 18:31:11.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:31:11.626 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:31:11.628 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:11.629 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 64.0076ms
2024-05-05 18:31:11.632 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:11.633 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 76.3322ms
2024-05-05 18:31:34.768 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:31:34.772 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:31:34.826 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:31:45.061 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:31:45.067 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:45.068 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:45.069 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:31:45.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:45.076 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:31:45.078 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.4627ms
2024-05-05 18:31:45.081 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:45.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.0495ms
2024-05-05 18:31:49.298 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:31:49.299 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:49.300 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.9915ms
2024-05-05 18:31:49.302 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 18:31:49.302 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:49.307 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:49.308 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:31:49.314 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:49.316 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:49.324 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:49.326 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:49.328 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:49.334 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:49.336 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:31:49.338 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:49.341 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.5676ms
2024-05-05 18:31:49.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:31:49.343 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:49.347 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:49.348 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.0054ms
2024-05-05 18:31:49.349 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 39.5205ms
2024-05-05 18:31:49.352 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:49.353 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 51.3454ms
2024-05-05 18:32:05.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:32:05.074 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:32:05.075 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:32:05.076 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:32:05.082 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:32:05.090 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:32:05.092 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 12.3449ms
2024-05-05 18:32:05.094 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:32:05.095 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 22.0342ms
2024-05-05 18:32:16.024 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:32:16.024 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:32:16.025 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 1.2632ms
2024-05-05 18:32:16.026 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 68
2024-05-05 18:32:16.026 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:32:16.027 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:32:16.028 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:32:16.032 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:32:16.035 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:32:16.041 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:32:16.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:32:16.043 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:32:16.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:32:16.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:32:16.051 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:32:16.055 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:32:16.057 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:32:16.058 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.292ms
2024-05-05 18:32:16.058 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 29.5711ms
2024-05-05 18:32:16.059 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:32:16.060 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:32:16.060 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 25.8400ms
2024-05-05 18:32:16.061 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 68 - 200 0 - 35.6523ms
2024-05-05 18:36:35.490 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:36:35.735 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:36:35.771 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:36:35.772 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:36:35.773 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:36:35.773 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:36:35.775 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:36:35.776 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:36:35.777 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:36:35.818 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:36:35.889 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:36:35.890 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:36:35.924 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:36:35.9233903+03:00"
2024-05-05 18:36:35.924 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:36:35.9184781+03:00"
2024-05-05 18:36:37.226 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:36:37.226 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:36:37.262 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:36:37.424 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
2024-05-05 18:36:37.456 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:36:37.4561846+03:00"
2024-05-05 18:36:40.426 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:36:40.475 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.484 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.512 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.514 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.516 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.524 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.529 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.531 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.546 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.549 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.551 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.557 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.573 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:41.390 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:36:41.504 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:36:41.505 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:36:41.507 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:36:41.508 +03:00 [INF] Hosting environment: Development
2024-05-05 18:36:41.509 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:36:42.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:36:42.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:36:42.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 266.1912ms
2024-05-05 18:36:42.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.8883ms
2024-05-05 18:36:42.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:36:42.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.1430ms
2024-05-05 18:36:42.421 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:36:42.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.9569ms
2024-05-05 18:36:46.056 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:36:46.060 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:36:46.090 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:36:46.231 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:36:46.267 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:36:46.403 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:36:46.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:36:46.442 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:36:49.468 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 18:36:49.474 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.477 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 9.4128ms
2024-05-05 18:36:49.479 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 18:36:49.480 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.482 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 18:36:49.506 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 18:36:49.507 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 28.6641ms
2024-05-05 18:36:49.680 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:36:49.681 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.682 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.2322ms
2024-05-05 18:36:49.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:36:49.684 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.771 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=l5PZLy6gvIZ8Mc9_B--H7g - -
2024-05-05 18:36:49.772 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.773 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 18:36:49.793 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:49.798 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:49.822 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:49.824 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.828 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:49.859 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:49.866 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 18:36:49.867 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.868 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 1.9775ms
2024-05-05 18:36:49.869 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 18:36:49.870 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.871 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 18:36:49.875 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 18:36:49.877 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:49.889 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:49.895 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.896 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:49.905 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 50.2171ms
2024-05-05 18:36:49.912 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:49.925 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:49.928 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.928 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 28.0285ms
2024-05-05 18:36:49.938 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.974 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 18:36:49.981 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 158.0504ms
2024-05-05 18:36:49.981 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 91.6008ms
2024-05-05 18:36:50.031 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 18:36:50.065 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:50.116 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 236.5355ms
2024-05-05 18:36:50.124 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 18:36:50.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 263.3038ms
2024-05-05 18:36:50.149 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:36:50.160 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:50.194 +03:00 [INF] initializing user data update
2024-05-05 18:36:50.214 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:36:50.218 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.262 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.273 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.279 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.283 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.336 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:50.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.477 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:50.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:50.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:50.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:50.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:50.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.713 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.719 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:50.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:50.737 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:50.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:50.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:50.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:50.752 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:36:50.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:36:50.780 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:50.782 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:50.784 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:50.788 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 987.2695ms
2024-05-05 18:36:50.793 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:50.793 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:50.794 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:50.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32964 application/json;+charset=utf-8 1112.0583ms
2024-05-05 18:36:50.802 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.807 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:50.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.803 +03:00 [INF] initializing user data update
2024-05-05 18:36:50.812 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:50.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.815 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:36:50.817 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:50.822 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:36:50.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.823 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.4034ms
2024-05-05 18:36:50.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.828 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.831 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.831 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 37.5576ms
2024-05-05 18:36:50.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:50.883 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:36:50.884 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:50.885 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.9447ms
2024-05-05 18:36:50.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:36:50.887 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:50.888 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:36:50.892 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:36:50.932 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:50.935 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:50.945 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.946 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:50.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:50.953 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:50.954 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.7542ms
2024-05-05 18:36:50.955 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.956 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 21.6773ms
2024-05-05 18:36:50.959 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:36:50.964 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:50.968 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 74.3441ms
2024-05-05 18:36:50.969 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:36:50.971 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 84.3479ms
2024-05-05 18:36:50.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:50.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:50.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:50.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:50.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:51.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:51.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:51.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:51.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:51.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:51.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:51.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:51.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:51.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:51.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:51.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:51.047 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:36:51.051 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 262.6698ms
2024-05-05 18:36:51.053 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:51.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32964 application/json;+charset=utf-8 277.2257ms
2024-05-05 18:36:51.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:36:51.825 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:51.826 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:51.829 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:36:51.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:36:51.840 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:36:51.842 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 11.1766ms
2024-05-05 18:36:51.843 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:51.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.0964ms
2024-05-05 18:36:55.610 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:36:55.611 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:55.612 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.1967ms
2024-05-05 18:36:55.613 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 18:36:55.615 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:55.616 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:36:55.621 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:55.640 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:55.640 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:55.643 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:55.643 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:55.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:55.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:36:55.657 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:55.660 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 8.1126ms
2024-05-05 18:36:55.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:36:55.665 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:55.669 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 29.2383ms
2024-05-05 18:36:55.674 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:36:55.678 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:55.679 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 56.5033ms
2024-05-05 18:36:55.680 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:36:55.681 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 67.7339ms
2024-05-05 18:36:56.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:36:56.658 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:56.662 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:56.668 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:56.865 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:36:56.890 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:36:56.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.918 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.931 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.936 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.950 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.953 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.986 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:56.993 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 322.8371ms
2024-05-05 18:36:56.994 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:56.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60820 application/json;+charset=utf-8 338.7273ms
2024-05-05 18:36:57.023 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:36:57.024 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.026 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.027 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.035 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:36:57.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:36:57.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.056 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.064 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.087 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.090 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.109 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.113 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 83.718ms
2024-05-05 18:36:57.114 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.115 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60820 application/json;+charset=utf-8 92.5371ms
2024-05-05 18:36:57.142 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:36:57.143 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.144 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.145 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.152 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:36:57.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:36:57.161 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.175 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.178 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.195 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.204 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.213 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.223 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.227 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 79.9835ms
2024-05-05 18:36:57.228 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60820 application/json;+charset=utf-8 87.2901ms
2024-05-05 18:36:57.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:36:57.258 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.259 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:57.260 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:36:57.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:36:57.268 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:36:57.269 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 7.1746ms
2024-05-05 18:36:57.270 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:57.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 14.4679ms
2024-05-05 18:36:57.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:36:57.833 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.834 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.835 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.896 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.898 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 60.7948ms
2024-05-05 18:36:57.900 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 69.8899ms
2024-05-05 18:36:57.944 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:36:57.945 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.946 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.947 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.955 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.957 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.4847ms
2024-05-05 18:36:57.959 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.960 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 16.1786ms
2024-05-05 18:36:58.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:36:58.073 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.074 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.075 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.081 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.083 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.9767ms
2024-05-05 18:36:58.087 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 2 application/json;+charset=utf-8 16.5736ms
2024-05-05 18:36:58.190 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - -
2024-05-05 18:36:58.191 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.193 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.194 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.201 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.203 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.633ms
2024-05-05 18:36:58.206 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.207 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - - - 200 2 application/json;+charset=utf-8 17.0992ms
2024-05-05 18:36:58.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - -
2024-05-05 18:36:58.381 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.383 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.384 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.391 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.394 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.9489ms
2024-05-05 18:36:58.396 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - - - 200 2 application/json;+charset=utf-8 16.9728ms
2024-05-05 18:36:58.455 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - -
2024-05-05 18:36:58.456 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.457 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.458 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.465 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.467 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.2312ms
2024-05-05 18:36:58.468 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - - - 200 2 application/json;+charset=utf-8 14.0219ms
2024-05-05 18:37:19.397 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:37:19.399 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.399 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.2230ms
2024-05-05 18:37:19.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:37:19.402 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.403 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:37:19.404 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:19.420 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:37:19.424 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:37:19.429 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.434 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:19.435 +03:00 [INF] initializing user data update
2024-05-05 18:37:19.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:37:19.437 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:37:19.439 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:37:19.440 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:37:19.441 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:19.445 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.6667ms
2024-05-05 18:37:19.446 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.442 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:37:19.445 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:37:19.448 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.3117ms
2024-05-05 18:37:19.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:37:19.457 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:37:19.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:37:19.463 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.469 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.472 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:37:19.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.558 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:37:19.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:37:19.573 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:37:19.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:37:19.579 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:37:19.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:37:19.593 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.595 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:37:19.604 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:37:19.606 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:37:19.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:37:19.611 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:37:19.614 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:37:19.617 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 211.044ms
2024-05-05 18:37:19.619 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:37:19.620 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 219.3190ms
2024-05-05 18:37:19.641 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:37:19.642 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.643 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.7923ms
2024-05-05 18:37:19.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:37:19.645 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.647 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:37:19.648 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:37:19.659 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:37:19.661 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:37:19.665 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.666 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:19.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:37:19.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:37:19.672 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:37:19.675 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:19.677 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 26.918ms
2024-05-05 18:37:19.677 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.2333ms
2024-05-05 18:37:19.678 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:37:19.680 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.681 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 36.7260ms
2024-05-05 18:37:19.682 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 21.0474ms
2024-05-05 18:37:20.240 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:37:20.241 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:37:20.302 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:37:20.839 +03:00 [WRN] Cached task timed out.
2024-05-05 18:37:20.840 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:37:20.862 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:37:26.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:37:26.755 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:26.756 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:37:26.758 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:37:26.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:37:26.772 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:37:26.773 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 12.9849ms
2024-05-05 18:37:26.774 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:37:26.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.7165ms
2024-05-05 18:37:31.652 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:37:31.653 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:31.654 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.2788ms
2024-05-05 18:37:31.656 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:37:31.657 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:31.658 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:37:31.659 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:37:31.665 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:37:31.669 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:37:31.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:37:31.675 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:31.681 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:37:31.681 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:31.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:37:31.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:37:31.689 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:31.690 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:31.691 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 30.1176ms
2024-05-05 18:37:31.693 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.4424ms
2024-05-05 18:37:31.694 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:37:31.694 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:31.695 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 38.8826ms
2024-05-05 18:37:31.696 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.0703ms
2024-05-05 18:37:49.459 +03:00 [WRN] Cached task timed out.
2024-05-05 18:37:49.461 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:37:49.474 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:38:26.100 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:38:31.343 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:38:31.607 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:38:31.648 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:38:31.649 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:38:31.651 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:38:31.652 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:38:31.653 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:38:31.654 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:38:31.656 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:38:31.700 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:38:31.771 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:38:31.772 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:38:31.823 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:38:31.8172592+03:00"
2024-05-05 18:38:31.823 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:38:31.8218076+03:00"
2024-05-05 18:38:33.159 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:38:33.159 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:38:33.193 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:38:33.268 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:38:33.2686096+03:00"
2024-05-05 18:38:36.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:38:36.348 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.383 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.386 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.397 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.399 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.402 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.415 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.418 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.429 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.434 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.442 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.445 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.459 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:37.247 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:38:37.362 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:38:37.363 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:38:37.365 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:38:37.366 +03:00 [INF] Hosting environment: Development
2024-05-05 18:38:37.368 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:38:37.894 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:38:38.165 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:38:38.169 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 279.1713ms
2024-05-05 18:38:38.178 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 13.1840ms
2024-05-05 18:38:38.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:38:38.200 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.6686ms
2024-05-05 18:38:38.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:38:38.464 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 230.4903ms
2024-05-05 18:38:41.946 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:38:41.950 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:38:41.982 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:38:42.090 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:38:42.127 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:38:42.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:38:42.285 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:38:42.305 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 18:39:32.435 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:39:32.443 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:32.448 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:32.452 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:39:32.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:39:32.474 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:39:32.483 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 23.5737ms
2024-05-05 18:39:32.486 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:32.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 68.2006ms
2024-05-05 18:39:38.905 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:39:38.906 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:38.908 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.4062ms
2024-05-05 18:39:38.909 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 18:39:38.910 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:38.996 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:39:39.001 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:39.034 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:39:39.035 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:39:39.039 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:39:39.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:39:39.080 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:39:39.081 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 39.9958ms
2024-05-05 18:39:39.083 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:39:39.084 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 50.1678ms
2024-05-05 18:39:39.298 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:39:39.309 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:39:39.372 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:39:39.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:39:39.411 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:39:39.418 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:39:39.419 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 416.4303ms
2024-05-05 18:39:39.422 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:39:39.423 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 513.8148ms
2024-05-05 18:39:50.557 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:39:50.558 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:50.561 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:50.566 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:50.698 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:50.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:50.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.754 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.757 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.759 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.766 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.770 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.773 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.775 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.779 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.784 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.792 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.798 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:50.830 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 262.686ms
2024-05-05 18:39:50.832 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:50.833 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68660 application/json;+charset=utf-8 276.5129ms
2024-05-05 18:39:50.862 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:39:50.863 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:50.864 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:50.865 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:39:50.868 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:39:50.875 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:39:50.876 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.0408ms
2024-05-05 18:39:50.877 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:50.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 15.7072ms
2024-05-05 18:39:51.835 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - -
2024-05-05 18:39:51.836 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:51.838 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:51.839 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:51.878 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:51.879 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 38.8584ms
2024-05-05 18:39:51.881 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:51.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - - - 200 2 application/json;+charset=utf-8 46.9902ms
2024-05-05 18:39:53.316 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 18:39:53.317 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:53.318 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.320 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:53.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:53.333 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:53.337 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:53.339 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:53.341 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:53.342 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 19.7424ms
2024-05-05 18:39:53.343 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 27.4885ms
2024-05-05 18:39:53.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 18:39:53.980 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:53.981 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.983 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:53.990 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:53.992 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.8752ms
2024-05-05 18:39:53.993 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.994 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 15.3908ms
2024-05-05 18:39:54.127 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 18:39:54.128 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:54.129 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.130 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:54.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:54.143 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:54.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.147 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.149 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.151 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.153 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:54.155 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.3638ms
2024-05-05 18:39:54.157 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10009 application/json;+charset=utf-8 30.8538ms
2024-05-05 18:39:54.225 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - -
2024-05-05 18:39:54.226 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:54.227 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.227 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:54.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:54.239 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:54.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.251 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:54.252 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 23.2634ms
2024-05-05 18:39:54.253 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.254 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - - - 200 10009 application/json;+charset=utf-8 29.1184ms
2024-05-05 18:39:56.504 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 18:39:56.504 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:56.505 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:56.506 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:56.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:56.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:56.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:56.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:56.529 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:56.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:56.532 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:56.533 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 26.7093ms
2024-05-05 18:39:56.534 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:56.537 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10009 application/json;+charset=utf-8 33.6408ms
2024-05-05 18:39:57.362 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 18:39:57.363 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:57.363 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.364 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:57.368 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:57.370 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.5162ms
2024-05-05 18:39:57.371 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.372 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 9.5475ms
2024-05-05 18:39:57.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 18:39:57.906 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:57.907 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.908 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:57.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:57.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:57.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:57.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:57.928 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:57.929 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 19.4386ms
2024-05-05 18:39:57.930 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 26.1909ms
2024-05-05 18:39:58.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:39:58.430 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:58.431 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:58.433 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:58.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:58.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:58.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.451 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.458 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.467 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.472 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.474 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.475 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.479 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.483 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.485 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.491 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:58.496 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 61.2421ms
2024-05-05 18:39:58.496 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:58.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68660 application/json;+charset=utf-8 69.1475ms
2024-05-05 18:40:22.004 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:40:39.191 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:40:39.192 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:39.193 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.194 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:39.201 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:39.204 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.5341ms
2024-05-05 18:40:39.205 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 15.6868ms
2024-05-05 18:40:39.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:40:39.367 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:39.368 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.369 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:39.375 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:39.377 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.7252ms
2024-05-05 18:40:39.378 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 18.2523ms
2024-05-05 18:40:39.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:40:39.984 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:39.985 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.986 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:39.994 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:39.995 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.0021ms
2024-05-05 18:40:39.996 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.997 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 2 application/json;+charset=utf-8 14.4394ms
2024-05-05 18:40:40.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - -
2024-05-05 18:40:40.096 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:40.097 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.098 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:40.105 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:40.107 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.376ms
2024-05-05 18:40:40.108 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - - - 200 2 application/json;+charset=utf-8 16.1930ms
2024-05-05 18:40:40.283 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - -
2024-05-05 18:40:40.284 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:40.285 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.286 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:40.292 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:40.296 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.2503ms
2024-05-05 18:40:40.297 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - - - 200 2 application/json;+charset=utf-8 15.9871ms
2024-05-05 18:40:40.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - -
2024-05-05 18:40:40.447 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:40.448 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.449 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:40.458 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:40.461 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.338ms
2024-05-05 18:40:40.463 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - - - 200 2 application/json;+charset=utf-8 18.6859ms
2024-05-05 18:41:42.946 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:41:43.148 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:41:43.188 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:41:43.189 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:41:43.190 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:41:43.191 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:41:43.192 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:41:43.193 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:41:43.194 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:41:43.240 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:41:43.313 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:41:43.314 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:41:43.347 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:41:43.3457566+03:00"
2024-05-05 18:41:43.347 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:41:43.3416080+03:00"
2024-05-05 18:41:44.673 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:41:44.673 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:41:44.705 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:41:44.869 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
2024-05-05 18:41:44.904 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:41:44.9048285+03:00"
2024-05-05 18:41:47.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:41:47.898 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.931 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.959 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.961 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:48.816 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:41:48.925 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:41:48.926 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:41:48.928 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:41:48.929 +03:00 [INF] Hosting environment: Development
2024-05-05 18:41:48.930 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:41:49.439 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:41:49.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 170.8539ms
2024-05-05 18:41:49.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:41:49.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 3.8997ms
2024-05-05 18:41:49.635 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:41:49.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.7335ms
2024-05-05 18:41:49.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:41:49.848 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.3112ms
2024-05-05 18:41:53.419 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:41:53.422 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:41:53.443 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:41:53.513 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:41:53.535 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:41:53.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:41:53.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:41:53.637 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:42:25.960 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:42:26.176 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:42:26.212 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:42:26.213 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:42:26.214 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:42:26.215 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:42:26.216 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:42:26.217 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:42:26.218 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:42:26.261 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:42:26.334 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:42:26.335 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:42:26.370 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:42:26.3683934+03:00"
2024-05-05 18:42:26.370 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:42:26.3639909+03:00"
2024-05-05 18:42:27.762 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:42:27.762 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:42:27.794 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:42:27.977 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:42:28.014 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:42:28.0148679+03:00"
2024-05-05 18:42:30.693 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:42:30.752 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.759 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.762 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.785 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.798 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.821 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.831 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.839 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.844 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:31.650 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:42:31.767 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:42:31.768 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:42:31.770 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:42:31.771 +03:00 [INF] Hosting environment: Development
2024-05-05 18:42:31.772 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:42:32.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:42:32.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:42:32.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 276.6348ms
2024-05-05 18:42:32.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.3202ms
2024-05-05 18:42:32.627 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:42:32.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.7174ms
2024-05-05 18:42:32.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:42:32.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 229.1659ms
2024-05-05 18:42:36.451 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:42:36.454 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:42:36.479 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:42:36.552 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:42:36.573 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:42:36.653 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:42:36.668 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:42:36.680 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:43:24.295 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:43:24.503 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:43:24.542 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:43:24.542 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:43:24.543 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:43:24.544 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:43:24.545 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:43:24.546 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:43:24.547 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:43:24.588 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:43:24.657 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:43:24.658 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:43:24.706 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:43:24.7054727+03:00"
2024-05-05 18:43:24.706 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:43:24.6980661+03:00"
2024-05-05 18:43:26.020 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:43:26.020 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:43:26.051 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:43:26.124 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:43:26.1246209+03:00"
2024-05-05 18:43:29.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:43:29.256 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.265 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.289 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.301 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.304 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.311 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.317 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.320 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.322 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.334 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.337 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.340 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.342 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.348 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.351 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.356 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.358 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:30.181 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:43:30.271 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:43:30.272 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:43:30.274 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:43:30.274 +03:00 [INF] Hosting environment: Development
2024-05-05 18:43:30.275 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:43:30.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:43:31.086 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 269.7182ms
2024-05-05 18:43:31.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:43:31.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.2019ms
2024-05-05 18:43:31.107 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:43:31.123 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.4249ms
2024-05-05 18:43:31.151 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:43:31.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.9301ms
2024-05-05 18:43:34.817 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:43:34.821 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:43:34.846 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:43:34.939 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:43:34.981 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:43:35.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:43:35.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:43:35.146 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 288cf8336d5dd0641c7a96483a5a073146a5e7fd172967d585c38a9a212854a1
2024-05-05 18:43:42.602 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:43:42.610 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:42.613 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 10.3021ms
2024-05-05 18:43:42.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:43:42.615 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:42.708 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:43:42.713 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:43:42.735 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:43:42.738 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:42.743 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:43:42.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:43:42.792 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:43:42.801 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 47.7181ms
2024-05-05 18:43:42.804 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:42.822 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 86.5175ms
2024-05-05 18:43:43.035 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:43:43.049 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:43:43.124 +03:00 [INF] initializing user data update
2024-05-05 18:43:43.149 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:43:43.153 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:43:43.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:43:43.202 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:43:43.206 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:43:43.211 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:43:43.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:43:43.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.265 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.284 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:43:43.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.476 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:43:43.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:43:43.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:43:43.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:43:43.661 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:43.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:43:43.671 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:43.672 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:43.680 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:43.681 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.690 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.696 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:43:43.700 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:43:43.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:43:43.717 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:43:43.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:43:43.729 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:43.743 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:43:43.802 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1087.2672ms
2024-05-05 18:43:43.804 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:43:43.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 1191.3839ms
2024-05-05 18:43:43.825 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:43:43.826 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:43.827 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 2.1526ms
2024-05-05 18:43:43.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:43:43.832 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:43.834 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:43:43.838 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:43:43.848 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:43:43.849 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:43:43.850 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:43.866 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:43:43.882 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:43:43.884 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:43:43.886 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:43:43.891 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:43.893 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 24.5625ms
2024-05-05 18:43:43.897 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:43.899 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 50.5725ms
2024-05-05 18:43:43.900 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 59.3098ms
2024-05-05 18:43:43.901 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:43.902 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:43:43.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 80.1353ms
2024-05-05 18:43:43.929 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:43.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.957 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.961 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.976 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:44.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:44.007 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:44.012 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 329.985ms
2024-05-05 18:43:44.013 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.016 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 71099 application/json;+charset=utf-8 346.1156ms
2024-05-05 18:43:44.046 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:43:44.047 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:44.048 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:43:44.052 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:43:44.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:43:44.062 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:43:44.064 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.3892ms
2024-05-05 18:43:44.065 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:43:44.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 20.1942ms
2024-05-05 18:43:44.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - -
2024-05-05 18:43:44.830 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:44.834 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.835 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:44.893 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:44.895 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 57.4557ms
2024-05-05 18:43:44.896 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - - - 200 2 application/json;+charset=utf-8 68.8151ms
2024-05-05 18:43:44.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=bu - -
2024-05-05 18:43:44.942 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:44.943 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.944 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:44.951 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:44.952 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.2241ms
2024-05-05 18:43:44.953 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=bu - - - 200 2 application/json;+charset=utf-8 13.6814ms
2024-05-05 18:43:45.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - -
2024-05-05 18:43:45.329 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.330 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.332 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.339 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.341 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.2287ms
2024-05-05 18:43:45.342 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.343 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - - - 200 2 application/json;+charset=utf-8 14.9997ms
2024-05-05 18:43:45.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:43:45.429 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.430 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.431 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:45.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:45.447 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.452 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.457 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.463 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.468 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.473 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.476 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.478 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.484 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.494 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.501 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.505 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.508 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.512 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 79.0761ms
2024-05-05 18:43:45.513 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.517 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 71099 application/json;+charset=utf-8 88.7189ms
2024-05-05 18:43:45.739 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 18:43:45.740 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.741 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.742 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.751 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:45.755 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:45.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.763 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.766 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.767 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 23.0884ms
2024-05-05 18:43:45.769 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 31.0486ms
2024-05-05 18:43:45.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 18:43:45.834 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.835 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.837 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.841 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.843 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.4869ms
2024-05-05 18:43:45.844 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 12.3479ms
2024-05-05 18:43:45.968 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 18:43:45.970 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.971 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.972 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:45.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:45.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.997 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:46.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:46.002 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:46.007 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 32.6349ms
2024-05-05 18:43:46.008 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:46.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10009 application/json;+charset=utf-8 41.0874ms
2024-05-05 18:43:46.047 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - -
2024-05-05 18:43:46.048 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:46.049 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:46.050 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:46.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:46.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:46.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:46.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:46.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:46.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:46.078 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:46.080 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 27.0934ms
2024-05-05 18:43:46.081 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:46.084 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - - - 200 10009 application/json;+charset=utf-8 37.2648ms
2024-05-05 18:43:49.051 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:43:49.053 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.054 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.055 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.061 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.063 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.6542ms
2024-05-05 18:43:49.064 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 13.3825ms
2024-05-05 18:43:49.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:49.162 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.163 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.164 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.170 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.172 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.0291ms
2024-05-05 18:43:49.174 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.176 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 14.7759ms
2024-05-05 18:43:49.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:43:49.305 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.307 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.309 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.317 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:49.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:49.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:49.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:49.331 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.333 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.062ms
2024-05-05 18:43:49.336 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 7810 application/json;+charset=utf-8 33.5626ms
2024-05-05 18:43:49.586 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - -
2024-05-05 18:43:49.587 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.588 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.589 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.595 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:49.601 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:49.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:49.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:49.611 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.613 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.4243ms
2024-05-05 18:43:49.616 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - - - 200 7810 application/json;+charset=utf-8 31.4688ms
2024-05-05 18:43:51.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:43:51.269 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:51.271 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.272 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:51.280 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:51.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:51.288 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:51.291 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:51.295 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:51.297 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.7529ms
2024-05-05 18:43:51.298 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 7810 application/json;+charset=utf-8 30.7335ms
2024-05-05 18:43:51.421 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:51.422 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:51.423 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.424 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:51.429 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:51.433 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.3963ms
2024-05-05 18:43:51.434 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 14.1711ms
2024-05-05 18:43:51.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:43:51.573 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:51.574 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.575 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:51.581 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:51.585 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.4213ms
2024-05-05 18:43:51.586 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 15.1317ms
2024-05-05 18:43:52.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:52.215 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:52.216 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.217 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:52.224 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:52.226 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.9738ms
2024-05-05 18:43:52.227 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.228 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 14.2437ms
2024-05-05 18:43:52.923 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:43:52.924 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:52.925 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.926 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:52.935 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:52.939 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:52.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:52.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:52.952 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:52.954 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 25.2859ms
2024-05-05 18:43:52.955 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 7810 application/json;+charset=utf-8 33.5729ms
2024-05-05 18:43:53.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:53.790 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:53.791 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.792 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:53.799 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:53.801 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.1695ms
2024-05-05 18:43:53.802 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 15.2831ms
2024-05-05 18:43:53.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:43:53.942 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:53.943 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.944 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:53.951 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:53.954 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.1954ms
2024-05-05 18:43:53.955 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 15.1804ms
2024-05-05 18:43:54.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:43:54.073 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:54.074 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:54.075 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:54.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:54.090 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:54.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.111 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.114 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.117 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.122 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.128 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.133 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.136 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.143 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.146 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.151 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:54.155 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 78.055ms
2024-05-05 18:43:54.161 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:54.162 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 71099 application/json;+charset=utf-8 90.6800ms
2024-05-05 18:44:00.929 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:44:00.930 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:00.931 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 1.9663ms
2024-05-05 18:44:00.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:44:00.933 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:00.934 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:44:00.935 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:00.944 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:44:00.947 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:44:00.954 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:00.954 +03:00 [INF] initializing user data update
2024-05-05 18:44:00.955 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:44:00.955 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:00.958 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:44:00.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:44:00.967 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:44:00.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:44:00.968 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:44:00.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:44:00.981 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:00.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:44:00.986 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 20.5657ms
2024-05-05 18:44:00.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:44:00.993 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:00.997 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:00.998 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 50.0905ms
2024-05-05 18:44:01.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.008 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:44:01.094 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:44:01.111 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:44:01.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:44:01.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:44:01.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:01.137 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.150 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:44:01.155 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.158 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:44:01.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:44:01.174 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:44:01.180 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:44:01.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:01.187 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:44:01.192 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 253.7651ms
2024-05-05 18:44:01.195 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:44:01.197 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 264.5295ms
2024-05-05 18:44:01.218 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:44:01.220 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:01.222 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.2099ms
2024-05-05 18:44:01.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:44:01.225 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:01.228 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:44:01.228 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:44:01.235 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:44:01.236 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:44:01.247 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:01.248 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:01.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:44:01.252 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:44:01.260 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:44:01.262 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:01.264 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 33.1106ms
2024-05-05 18:44:01.265 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 13.8488ms
2024-05-05 18:44:01.266 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:44:01.267 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:01.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 45.7050ms
2024-05-05 18:44:01.269 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.8660ms
2024-05-05 18:44:03.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:44:03.130 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:03.131 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:44:03.132 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:44:03.136 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:44:03.141 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:44:03.142 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.4918ms
2024-05-05 18:44:03.144 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:44:03.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 16.3254ms
2024-05-05 18:44:13.172 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:44:13.174 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:44:13.201 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:44:14.259 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:44:14.260 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:14.263 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 4.4371ms
2024-05-05 18:44:14.264 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:44:14.266 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:14.267 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:44:14.273 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:44:14.287 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:44:14.288 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:14.290 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:14.290 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:44:14.293 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:44:14.299 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:44:14.300 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:14.304 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 12.6647ms
2024-05-05 18:44:14.306 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:14.307 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 19.6707ms
2024-05-05 18:44:14.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:44:14.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:44:14.322 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:14.323 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 47.8098ms
2024-05-05 18:44:14.324 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:44:14.324 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 60.1794ms
2024-05-05 18:44:30.975 +03:00 [WRN] Cached task timed out.
2024-05-05 18:44:30.976 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:44:30.998 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:44:40.252 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:44:40.457 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:44:40.495 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:44:40.496 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:44:40.497 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:44:40.498 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:44:40.499 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:44:40.500 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:44:40.501 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:44:40.559 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:44:40.634 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:44:40.634 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:44:40.666 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:44:40.6597907+03:00"
2024-05-05 18:44:40.666 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:44:40.6645970+03:00"
2024-05-05 18:44:41.942 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:44:41.942 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:44:41.971 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:44:42.133 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:44:42.166 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:44:42.1659905+03:00"
2024-05-05 18:44:44.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:44:44.662 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.700 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.703 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.713 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.730 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.738 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.744 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.746 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.758 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:45.576 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:44:45.679 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:44:45.679 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:44:45.682 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:44:45.682 +03:00 [INF] Hosting environment: Development
2024-05-05 18:44:45.683 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:44:46.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:44:46.532 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:44:46.535 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 184.4458ms
2024-05-05 18:44:46.538 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.7707ms
2024-05-05 18:44:46.545 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:44:46.555 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.4369ms
2024-05-05 18:44:46.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:44:46.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 160.1536ms
2024-05-05 18:44:50.781 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:44:50.785 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:44:50.811 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:44:50.901 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:44:50.939 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:44:51.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:44:51.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:44:51.108 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:45:36.110 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:45:36.115 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:36.118 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:36.120 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:45:36.126 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:36.137 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:45:36.144 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 19.1972ms
2024-05-05 18:45:36.147 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:36.156 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 45.7663ms
2024-05-05 18:45:37.891 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:45:37.892 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:37.894 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.9366ms
2024-05-05 18:45:37.903 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:45:37.912 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:37.963 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:45:37.966 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:37.982 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:37.983 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:37.985 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:38.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:38.013 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:38.014 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 26.9864ms
2024-05-05 18:45:38.015 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:38.017 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 35.0246ms
2024-05-05 18:45:38.178 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:45:38.186 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:38.228 +03:00 [INF] initializing user data update
2024-05-05 18:45:38.241 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:45:38.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:45:38.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:45:38.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:45:38.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:45:38.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:45:38.282 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:45:38.298 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.314 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.339 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:45:38.377 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.408 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:45:38.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:45:38.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:45:38.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:45:38.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:45:38.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:45:38.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.592 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.596 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:45:38.599 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:45:38.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:45:38.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:45:38.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:45:38.614 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:45:38.648 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 680.9416ms
2024-05-05 18:45:38.649 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:45:38.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32942 application/json;+charset=utf-8 746.1264ms
2024-05-05 18:45:38.670 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:45:38.671 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:38.671 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.8411ms
2024-05-05 18:45:38.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:45:38.673 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:38.674 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:45:38.676 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:45:38.682 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:38.684 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:38.685 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:38.686 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:38.697 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:38.704 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:38.706 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:45:38.707 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.0779ms
2024-05-05 18:45:38.710 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:45:38.710 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:38.712 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 29.8400ms
2024-05-05 18:45:38.713 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 35.7854ms
2024-05-05 18:45:38.716 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:45:38.717 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 44.3173ms
2024-05-05 18:45:41.399 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:45:41.400 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:41.401 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:41.402 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:45:41.407 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:41.410 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:45:41.411 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 7.2527ms
2024-05-05 18:45:41.415 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:41.416 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 17.2344ms
2024-05-05 18:45:43.345 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:45:43.346 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:43.347 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.6854ms
2024-05-05 18:45:43.349 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:45:43.351 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:43.353 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:43.358 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:45:43.372 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:43.373 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:43.374 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:43.380 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:43.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:43.383 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:43.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:45:43.391 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:43.394 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.5683ms
2024-05-05 18:45:43.394 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:43.396 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:43.396 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 24.1958ms
2024-05-05 18:45:43.396 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 36.4539ms
2024-05-05 18:45:43.398 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:43.399 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 50.2490ms
2024-05-05 18:45:45.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:45:45.279 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:45.280 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:45.281 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:45:45.283 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:45.285 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:45:45.286 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 3.5088ms
2024-05-05 18:45:45.286 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:45.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 9.1076ms
2024-05-05 18:45:47.511 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 18:45:47.512 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:47.516 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:47.517 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:45:47.527 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:47.529 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:47.536 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:47.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:47.537 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:47.540 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:45:47.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:47.547 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:45:47.549 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:47.551 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:47.552 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.7809ms
2024-05-05 18:45:47.553 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 33.5456ms
2024-05-05 18:45:47.553 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:47.555 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:47.556 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.0749ms
2024-05-05 18:45:47.557 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 45.7177ms
2024-05-05 18:46:08.259 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:46:08.260 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:46:08.350 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:46:30.875 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:47:19.100 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:47:19.316 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:47:19.354 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:47:19.355 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:47:19.356 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:47:19.357 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:47:19.358 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:47:19.358 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:47:19.360 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:47:19.401 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:47:19.469 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:47:19.470 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:47:19.505 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:47:19.4996613+03:00"
2024-05-05 18:47:19.505 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:47:19.5055283+03:00"
2024-05-05 18:47:20.813 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:47:20.813 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:47:20.843 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:47:20.999 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:47:21.039 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:47:21.0396928+03:00"
2024-05-05 18:47:23.769 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:47:23.818 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.848 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.860 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.870 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.884 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.886 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.889 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.890 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.892 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.898 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.900 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:24.749 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:47:24.844 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:47:24.845 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:47:24.847 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:47:24.847 +03:00 [INF] Hosting environment: Development
2024-05-05 18:47:24.848 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:47:25.154 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:47:25.328 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 176.4051ms
2024-05-05 18:47:25.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:47:25.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.2483ms
2024-05-05 18:47:25.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:47:25.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.8810ms
2024-05-05 18:47:25.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:47:25.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.5502ms
2024-05-05 18:47:27.455 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:47:27.461 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:47:27.533 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:47:27.549 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:47:27.562 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:47:27.577 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:47:27.583 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 28.7023ms
2024-05-05 18:47:27.586 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:47:27.595 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 139.5811ms
2024-05-05 18:47:29.586 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:47:29.588 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:47:29.607 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:47:29.609 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:47:29.617 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:47:29.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:47:29.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:47:29.712 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: d2d2fda4340d5965975e73c7034b205f59ad20fe6d3b35c10fd35dd079229fce
2024-05-05 18:47:32.388 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:47:32.390 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:47:32.392 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.2024ms
2024-05-05 18:47:32.393 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 18:47:32.394 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:47:32.445 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:47:32.448 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:47:32.479 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:47:32.481 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:47:32.484 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:47:32.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:47:32.514 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:47:32.515 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 28.4081ms
2024-05-05 18:47:32.516 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:47:32.517 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 37.9775ms
2024-05-05 18:47:32.675 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:47:32.684 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:47:32.722 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:47:32.727 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:47:32.741 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:47:32.745 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:47:32.745 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 295.6545ms
2024-05-05 18:47:32.746 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:47:32.747 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 353.9913ms
2024-05-05 18:49:09.690 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:50:21.698 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:50:21.895 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:50:21.931 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:50:21.931 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:50:21.932 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:50:21.933 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:50:21.935 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:50:21.936 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:50:21.938 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:21.978 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:22.045 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:22.046 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:22.082 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:50:22.0761716+03:00"
2024-05-05 18:50:22.082 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:50:22.0803005+03:00"
2024-05-05 18:50:23.399 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:50:23.399 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:50:23.433 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:50:23.587 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:50:41.415 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:50:41.611 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:50:41.651 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:50:41.652 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:50:41.653 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:50:41.655 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:50:41.656 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:50:41.657 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:50:41.658 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:41.696 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:41.766 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:41.767 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:41.800 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:50:41.7986644+03:00"
2024-05-05 18:50:41.800 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:50:41.7948063+03:00"
2024-05-05 18:50:43.088 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:50:43.088 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:50:43.120 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:50:43.280 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
2024-05-05 18:52:08.644 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:52:08.840 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:52:08.876 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:52:08.877 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:52:08.878 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:52:08.878 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:52:08.879 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:52:08.880 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:52:08.882 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:52:08.921 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:52:08.995 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:52:08.996 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:52:09.028 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:52:09.0219614+03:00"
2024-05-05 18:52:09.028 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:52:09.0267482+03:00"
2024-05-05 18:52:10.337 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:52:10.337 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:52:10.367 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:52:10.524 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:52:10.558 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:52:10.5582791+03:00"
2024-05-05 18:52:13.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:52:13.666 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.675 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.692 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.744 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.750 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.755 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.757 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:14.575 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:52:14.676 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:52:14.677 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:52:14.679 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:52:14.679 +03:00 [INF] Hosting environment: Development
2024-05-05 18:52:14.680 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:52:15.156 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:52:15.413 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:52:15.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 7.5112ms
2024-05-05 18:52:15.422 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:52:15.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 272.0292ms
2024-05-05 18:52:15.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.1601ms
2024-05-05 18:52:15.482 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:52:15.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.5694ms
2024-05-05 18:52:19.151 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:52:19.155 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:52:19.179 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:52:19.272 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:52:19.306 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:52:19.445 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:52:19.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:52:19.491 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:52:27.861 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:52:27.867 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:27.872 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:27.875 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:52:27.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:27.889 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:52:27.896 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.8141ms
2024-05-05 18:52:27.898 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:27.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 52.1437ms
2024-05-05 18:52:29.972 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:52:29.974 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:29.975 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.9544ms
2024-05-05 18:52:29.976 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 53
2024-05-05 18:52:29.977 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:30.032 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:30.036 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:52:30.061 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:52:30.062 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:30.066 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:52:30.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:52:30.098 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:30.099 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 30.0436ms
2024-05-05 18:52:30.101 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:30.104 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 42.7230ms
2024-05-05 18:52:30.257 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:52:30.266 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:52:30.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:30.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:52:30.329 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:52:30.334 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:30.335 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 296.3759ms
2024-05-05 18:52:30.337 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:30.338 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 53 - 200 0 - 362.4913ms
2024-05-05 18:52:37.695 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:52:37.696 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:37.698 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:37.700 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:52:37.706 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:37.710 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:52:37.711 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.4596ms
2024-05-05 18:52:37.714 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:37.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 19.5966ms
2024-05-05 18:52:39.058 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:52:39.061 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:39.063 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 4.5017ms
2024-05-05 18:52:39.064 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 65
2024-05-05 18:52:39.065 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:39.068 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:39.069 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:52:39.076 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:52:39.077 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:52:39.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:39.083 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:39.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:52:39.086 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:52:39.093 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:52:39.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:52:39.096 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:39.098 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:39.098 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 27.605ms
2024-05-05 18:52:39.099 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.353ms
2024-05-05 18:52:39.099 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:39.100 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:39.101 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 65 - 200 0 - 36.8236ms
2024-05-05 18:52:39.102 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 25.0009ms
2024-05-05 18:54:28.009 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:54:28.222 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:54:28.259 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:54:28.260 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:54:28.261 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:54:28.262 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:54:28.263 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:54:28.264 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:54:28.265 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:54:28.306 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:54:28.375 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:54:28.376 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:54:28.407 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:54:28.4025827+03:00"
2024-05-05 18:54:28.407 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:54:28.4071787+03:00"
2024-05-05 18:54:29.727 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:54:29.727 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:54:29.756 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:54:29.915 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:54:29.979 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:54:29.9796742+03:00"
2024-05-05 18:54:32.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:54:32.950 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:32.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.988 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.006 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.019 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.026 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.033 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.040 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.042 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.870 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:54:33.970 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:54:33.971 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:54:33.973 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:54:33.973 +03:00 [INF] Hosting environment: Development
2024-05-05 18:54:33.974 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:54:34.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:54:34.827 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:54:34.835 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.4601ms
2024-05-05 18:54:34.836 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 270.2704ms
2024-05-05 18:54:34.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:54:34.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.4195ms
2024-05-05 18:54:34.893 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:54:35.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.9486ms
2024-05-05 18:54:38.532 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:54:38.536 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:54:38.565 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:54:38.665 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:54:38.703 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:54:38.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:54:38.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:54:38.874 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: d12b99463cd479f08674ed12456151dc2681e6b2cc60a9ce484f34d6599ccf1c
2024-05-05 18:55:42.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:55:42.155 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:55:42.160 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:55:42.166 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:55:42.184 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:55:42.198 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:55:42.209 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 27.1146ms
2024-05-05 18:55:42.212 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:55:42.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 84.6133ms
2024-05-05 18:55:48.236 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:55:48.237 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:55:48.241 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 5.3763ms
2024-05-05 18:55:48.243 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:55:48.244 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:55:48.295 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:55:48.300 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:55:48.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:55:48.328 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:55:48.331 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:55:48.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:55:48.357 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:55:48.358 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 25.7768ms
2024-05-05 18:55:48.359 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:55:48.361 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 33.4245ms
2024-05-05 18:55:48.503 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:55:48.511 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:55:48.549 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:55:48.555 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:55:48.569 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:55:48.573 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:55:48.573 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 272.2486ms
2024-05-05 18:55:48.574 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:55:48.575 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 332.0167ms
2024-05-05 18:56:18.586 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:58:02.073 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:58:02.274 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:58:02.312 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:58:02.313 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:58:02.314 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:58:02.315 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:58:02.316 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:58:02.316 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:58:02.317 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:58:02.358 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:58:02.429 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:58:02.429 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:58:02.461 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:58:02.4544335+03:00"
2024-05-05 18:58:02.461 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:58:02.4586008+03:00"
2024-05-05 18:58:03.759 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:58:03.759 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:58:03.789 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:58:03.952 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:58:03.990 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:58:03.9909263+03:00"
2024-05-05 18:58:06.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:58:06.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.549 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.557 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.569 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.571 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.583 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.588 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.592 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.597 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.605 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.612 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.614 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.616 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:07.426 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:58:07.520 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:58:07.521 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:58:07.523 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:58:07.524 +03:00 [INF] Hosting environment: Development
2024-05-05 18:58:07.525 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:58:07.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:58:07.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:58:08.000 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 193.0666ms
2024-05-05 18:58:08.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.9397ms
2024-05-05 18:58:08.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:58:08.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.8266ms
2024-05-05 18:58:08.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:58:08.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.2675ms
2024-05-05 18:58:12.554 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:58:12.557 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:58:12.577 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:58:12.647 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:58:12.672 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:58:12.749 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:58:12.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:58:12.777 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 18:58:15.858 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:58:15.864 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:15.872 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:15.875 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:58:15.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:15.889 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:58:15.896 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.1194ms
2024-05-05 18:58:15.898 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:15.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 49.8134ms
2024-05-05 18:58:17.856 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:58:17.858 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:17.859 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.2302ms
2024-05-05 18:58:17.860 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 64
2024-05-05 18:58:17.861 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:17.915 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:17.919 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:58:17.942 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:58:17.943 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:17.946 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:58:17.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:58:17.976 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:17.977 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 27.7058ms
2024-05-05 18:58:17.980 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:17.982 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 39.6919ms
2024-05-05 18:58:18.129 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:58:18.137 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:58:18.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:18.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:58:18.192 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:58:18.196 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:18.196 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 274.9641ms
2024-05-05 18:58:18.197 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:18.198 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 64 - 200 0 - 338.4518ms
2024-05-05 18:58:29.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:58:29.873 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:29.873 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:29.874 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:58:29.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:29.881 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:58:29.882 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.331ms
2024-05-05 18:58:29.884 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:29.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 13.8544ms
2024-05-05 18:58:32.191 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:58:32.192 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:32.194 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.4966ms
2024-05-05 18:58:32.196 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:58:32.197 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:32.203 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:32.204 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:58:32.214 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:58:32.217 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:58:32.224 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:32.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:32.225 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:58:32.229 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:58:32.231 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:58:32.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:58:32.239 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:32.241 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:32.241 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.1338ms
2024-05-05 18:58:32.242 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 35.9829ms
2024-05-05 18:58:32.242 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:32.243 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:32.244 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.1055ms
2024-05-05 18:58:32.245 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 48.7754ms
2024-05-05 18:59:52.614 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 19:02:20.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:02:20.802 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:02:20.803 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:02:20.804 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:02:20.810 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:02:20.814 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:02:20.815 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.1301ms
2024-05-05 19:02:20.819 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:02:20.820 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 20.5561ms
2024-05-05 19:03:12.787 +03:00 [WRN] New task timed out. Hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 19:03:12.788 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 19:03:12.816 +03:00 [ERR] An unexpected error occurred while processing the channels.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.BotController.CallSubscribersByChannels(DailySubRequest dailySubRequest) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\BotController.cs:line 281
2024-05-05 19:03:12.823 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-05 19:03:12.825 +03:00 [INF] Executed action TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi) in 300151.4958ms
2024-05-05 19:03:12.826 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:03:12.827 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35 - 400 - text/plain;+charset=utf-8 300250.2817ms
2024-05-05 19:15:54.908 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:15:55.111 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:15:55.152 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:15:55.154 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:15:55.155 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:15:55.156 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:15:55.158 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:15:55.159 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:15:55.161 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:15:55.201 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:15:55.272 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:15:55.273 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:15:55.328 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:15:55.3264183+03:00"
2024-05-05 19:15:55.328 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:15:55.3218897+03:00"
2024-05-05 19:15:56.649 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:15:56.649 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:15:56.677 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:15:56.863 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:15:56.921 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:15:56.9214921+03:00"
2024-05-05 19:15:59.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:15:59.763 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.809 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.832 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.840 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.842 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.863 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:16:00.674 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:16:00.778 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:16:00.779 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:16:00.781 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:16:00.782 +03:00 [INF] Hosting environment: Development
2024-05-05 19:16:00.783 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:16:01.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:16:01.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:16:01.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.2458ms
2024-05-05 19:16:01.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 186.3221ms
2024-05-05 19:16:01.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:16:01.534 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.9178ms
2024-05-05 19:16:01.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:16:01.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.3353ms
2024-05-05 19:16:05.456 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:16:05.460 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:16:05.487 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:16:05.582 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:16:05.610 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:16:05.695 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:16:05.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:16:05.721 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:16:17.603 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:16:17.609 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:17.613 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:17.616 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:16:17.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:17.633 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:16:17.639 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 17.4374ms
2024-05-05 19:16:17.641 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:17.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 47.7917ms
2024-05-05 19:16:20.922 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:16:20.923 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:20.925 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.5760ms
2024-05-05 19:16:20.925 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 59
2024-05-05 19:16:20.926 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:20.980 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:20.983 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:21.007 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:21.008 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:21.011 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:21.029 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:21.039 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:21.040 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 27.7137ms
2024-05-05 19:16:21.041 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:21.043 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 36.0144ms
2024-05-05 19:16:21.228 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 19:16:21.236 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:21.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:21.280 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:16:21.295 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:16:21.299 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:21.300 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 314.6925ms
2024-05-05 19:16:21.301 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:21.302 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 59 - 200 0 - 376.4430ms
2024-05-05 19:16:30.974 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:16:30.975 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:30.976 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:30.977 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:16:30.981 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:30.986 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:16:30.987 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.2731ms
2024-05-05 19:16:30.990 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:30.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 17.5891ms
2024-05-05 19:16:35.259 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:16:35.259 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:35.261 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.4367ms
2024-05-05 19:16:35.262 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 19:16:35.263 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:35.266 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:35.267 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:35.275 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:35.276 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:35.284 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:35.285 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:35.285 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:35.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:16:35.291 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:35.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:16:35.296 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:35.300 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:35.300 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.5439ms
2024-05-05 19:16:35.301 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 32.2517ms
2024-05-05 19:16:35.302 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:35.303 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:35.304 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.8684ms
2024-05-05 19:16:35.304 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 42.3811ms
2024-05-05 19:16:37.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:16:37.246 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:37.246 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:37.247 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:16:37.250 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:37.253 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:16:37.254 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.8423ms
2024-05-05 19:16:37.255 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:37.256 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 11.6102ms
2024-05-05 19:16:39.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - -
2024-05-05 19:16:39.215 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:39.216 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.224 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:39.313 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:39.328 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 101.9283ms
2024-05-05 19:16:39.329 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - - - 200 2 application/json;+charset=utf-8 115.8645ms
2024-05-05 19:16:39.807 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - -
2024-05-05 19:16:39.808 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:39.811 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.813 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:39.823 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:39.825 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 10.0586ms
2024-05-05 19:16:39.827 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - - - 200 2 application/json;+charset=utf-8 21.3068ms
2024-05-05 19:16:39.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - -
2024-05-05 19:16:39.962 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:39.963 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.964 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:39.972 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:39.973 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.9614ms
2024-05-05 19:16:39.975 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.976 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - - - 200 2 application/json;+charset=utf-8 15.3598ms
2024-05-05 19:16:40.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - -
2024-05-05 19:16:40.126 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:40.126 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.128 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:40.133 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:40.134 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 3.8809ms
2024-05-05 19:16:40.137 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - - - 200 2 application/json;+charset=utf-8 13.5991ms
2024-05-05 19:16:40.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - -
2024-05-05 19:16:40.255 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:40.256 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.257 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:40.264 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:40.266 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.5266ms
2024-05-05 19:16:40.267 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - - - 200 2 application/json;+charset=utf-8 14.5375ms
2024-05-05 19:16:42.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:16:42.496 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:42.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.498 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:42.567 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:42.583 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:42.591 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.610 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.613 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.615 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.626 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.638 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.644 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.646 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.649 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.654 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.661 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.664 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:42.682 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 181.2552ms
2024-05-05 19:16:42.683 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.684 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 189.8142ms
2024-05-05 19:16:42.761 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%3D - -
2024-05-05 19:16:42.763 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:42.765 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.766 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:42.771 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:42.773 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.2771ms
2024-05-05 19:16:42.775 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.776 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%3D - - - 200 2 application/json;+charset=utf-8 14.5033ms
2024-05-05 19:16:42.793 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:16:42.794 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:42.794 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.795 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:42.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:42.804 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:42.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.809 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.816 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.832 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.848 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.857 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:42.860 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 63.1876ms
2024-05-05 19:16:42.861 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 68.3612ms
2024-05-05 19:16:43.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 19:16:43.379 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.381 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.382 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.390 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:43.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:43.400 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.405 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.407 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.9808ms
2024-05-05 19:16:43.410 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.411 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 33.3390ms
2024-05-05 19:16:43.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 19:16:43.496 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.498 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.506 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.508 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.7161ms
2024-05-05 19:16:43.509 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 16.1101ms
2024-05-05 19:16:43.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 19:16:43.643 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.644 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.644 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:43.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:43.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.661 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.666 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.668 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 21.9409ms
2024-05-05 19:16:43.669 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10010 application/json;+charset=utf-8 27.9890ms
2024-05-05 19:16:43.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - -
2024-05-05 19:16:43.730 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.731 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.732 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.739 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:43.742 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:43.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.755 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.756 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.7161ms
2024-05-05 19:16:43.757 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - - - 200 10010 application/json;+charset=utf-8 29.2844ms
2024-05-05 19:16:45.369 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:16:45.370 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:45.371 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:45.372 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:45.378 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:45.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:45.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.401 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.407 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.409 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.415 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.419 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.420 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.422 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.424 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.430 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:45.433 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 59.2881ms
2024-05-05 19:16:45.434 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:45.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 69.8817ms
2024-05-05 19:16:47.595 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 19:16:47.596 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:47.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.3761ms
2024-05-05 19:16:47.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 19:16:47.600 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:47.609 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:16:47.614 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:47.621 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:47.623 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:47.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:47.625 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:47.632 +03:00 [INF] initializing user data update
2024-05-05 19:16:47.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:47.640 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:47.641 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.987ms
2024-05-05 19:16:47.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:16:47.642 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:47.644 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.9657ms
2024-05-05 19:16:47.667 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 19:16:47.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:16:47.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:16:47.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:16:47.686 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:16:47.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:16:47.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.725 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:16:47.758 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.784 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:16:47.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:16:47.910 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:16:47.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:16:47.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:16:47.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:16:47.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.989 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.995 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:16:47.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:16:48.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:16:48.006 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:16:48.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:16:48.013 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 19:16:48.021 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 404.598ms
2024-05-05 19:16:48.023 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:16:48.024 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32945 application/json;+charset=utf-8 425.7189ms
2024-05-05 19:16:48.045 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:16:48.046 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:48.047 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.9732ms
2024-05-05 19:16:48.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:16:48.049 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:48.050 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:16:48.053 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 19:16:48.063 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:48.064 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:48.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:48.067 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:48.076 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:48.079 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:48.080 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.685ms
2024-05-05 19:16:48.081 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:48.082 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 18.4080ms
2024-05-05 19:16:48.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 19:16:48.089 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:48.092 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 36.5937ms
2024-05-05 19:16:48.093 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:16:48.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 45.2088ms
2024-05-05 19:19:11.902 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:19:12.096 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:19:12.132 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:19:12.132 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:19:12.133 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:19:12.134 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:19:12.135 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:19:12.135 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:19:12.136 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:19:12.176 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:19:12.266 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:19:12.267 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:19:12.301 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:19:12.3004751+03:00"
2024-05-05 19:19:12.301 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:19:12.2950652+03:00"
2024-05-05 19:19:13.678 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:19:13.678 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:19:13.709 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:19:13.864 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
2024-05-05 19:19:13.899 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:19:13.8990926+03:00"
2024-05-05 19:19:16.574 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:19:16.622 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.667 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.670 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.675 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.680 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.682 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.684 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.687 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.696 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.701 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:17.557 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:19:17.659 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:19:17.660 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:19:17.662 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:19:17.662 +03:00 [INF] Hosting environment: Development
2024-05-05 19:19:17.664 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:19:17.945 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:19:18.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 194.1188ms
2024-05-05 19:19:18.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:19:18.148 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:19:18.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 15.4986ms
2024-05-05 19:19:18.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.4818ms
2024-05-05 19:19:18.241 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:19:18.482 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.6651ms
2024-05-05 19:31:34.249 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:31:34.472 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:31:34.507 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:31:34.508 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:31:34.509 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:31:34.510 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:31:34.511 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:31:34.512 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:31:34.513 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:31:34.554 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:31:34.643 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:31:34.643 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:31:34.674 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:31:34.6686911+03:00"
2024-05-05 19:31:34.674 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:31:34.6728330+03:00"
2024-05-05 19:31:35.980 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:31:35.980 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:31:36.011 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:31:36.168 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:31:36.202 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:31:36.2024153+03:00"
2024-05-05 19:31:38.889 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:31:38.939 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.984 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.994 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:39.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:39.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:39.005 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:39.007 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:39.840 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:31:39.933 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:31:39.934 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:31:39.936 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:31:39.936 +03:00 [INF] Hosting environment: Development
2024-05-05 19:31:39.937 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:31:40.228 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:31:40.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:31:40.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 168.8240ms
2024-05-05 19:31:40.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 10.1209ms
2024-05-05 19:31:40.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:31:40.421 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.5131ms
2024-05-05 19:31:40.487 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:31:40.601 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.0936ms
2024-05-05 19:31:44.791 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:31:44.795 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:31:44.830 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:31:44.918 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:31:44.952 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:31:45.080 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:31:45.099 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:31:45.116 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:31:52.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:31:52.625 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:31:52.629 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:31:52.631 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:31:52.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:31:52.647 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:31:52.653 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.6791ms
2024-05-05 19:31:52.655 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:31:52.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 43.9448ms
2024-05-05 19:31:57.571 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:31:57.573 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:31:57.575 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.3454ms
2024-05-05 19:31:57.576 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 19:31:57.576 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:31:57.628 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:31:57.631 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:31:57.659 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:31:57.661 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:31:57.668 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:31:57.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:31:57.698 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:31:57.699 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 28.9881ms
2024-05-05 19:31:57.701 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:31:57.704 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 44.9968ms
2024-05-05 19:31:57.907 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 19:31:57.921 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:31:57.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:31:57.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:31:57.986 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:31:57.994 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:31:57.995 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 362.3433ms
2024-05-05 19:31:57.997 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:31:57.998 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 422.7613ms
2024-05-05 19:32:02.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:32:02.493 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:02.494 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:32:02.495 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:32:02.497 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:32:02.500 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:32:02.502 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.0372ms
2024-05-05 19:32:02.503 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:32:02.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 12.7575ms
2024-05-05 19:32:03.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - -
2024-05-05 19:32:03.495 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:03.500 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.510 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:03.596 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:03.610 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 96.9937ms
2024-05-05 19:32:03.611 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.612 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - - - 200 2 application/json;+charset=utf-8 118.5919ms
2024-05-05 19:32:03.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:32:03.728 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:03.730 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.731 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:03.795 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:32:03.810 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:32:03.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.839 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.850 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.855 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.860 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.880 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:03.897 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 163.0607ms
2024-05-05 19:32:03.898 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.899 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 171.4273ms
2024-05-05 19:32:03.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - -
2024-05-05 19:32:03.972 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:03.973 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.974 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:03.979 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:03.981 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.4295ms
2024-05-05 19:32:03.983 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - - - 200 2 application/json;+charset=utf-8 12.9114ms
2024-05-05 19:32:04.320 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E - -
2024-05-05 19:32:04.321 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:04.322 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.323 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:04.330 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:04.331 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.0287ms
2024-05-05 19:32:04.335 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E - - - 200 2 application/json;+charset=utf-8 16.5748ms
2024-05-05 19:32:04.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F - -
2024-05-05 19:32:04.575 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:04.576 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.577 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:04.584 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:04.586 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.4976ms
2024-05-05 19:32:04.590 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F - - - 200 2 application/json;+charset=utf-8 19.3425ms
2024-05-05 19:32:04.771 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F%D0%90 - -
2024-05-05 19:32:04.772 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:04.773 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.774 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:04.781 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:04.782 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.4262ms
2024-05-05 19:32:04.785 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F%D0%90 - - - 200 2 application/json;+charset=utf-8 17.5538ms
2024-05-05 19:32:06.530 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:32:06.532 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:06.533 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:06.534 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:06.541 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:32:06.545 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:32:06.548 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.553 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.555 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.558 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.560 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.572 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.578 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.580 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.591 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:06.594 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 57.8879ms
2024-05-05 19:32:06.595 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:06.596 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 65.9731ms
2024-05-05 19:32:51.492 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:32:51.732 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:32:51.770 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:32:51.771 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:32:51.772 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:32:51.773 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:32:51.773 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:32:51.774 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:32:51.775 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:32:51.820 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:32:51.891 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:32:51.892 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:32:51.925 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:32:51.9193137+03:00"
2024-05-05 19:32:51.925 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:32:51.9234843+03:00"
2024-05-05 19:32:53.234 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:32:53.234 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:32:53.265 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:32:53.432 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:32:53.471 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:32:53.4710649+03:00"
2024-05-05 19:32:55.908 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:32:55.956 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.969 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:55.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:55.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.009 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.014 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.038 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.043 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.049 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.056 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.874 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:32:56.974 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:32:56.975 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:32:56.978 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:32:56.979 +03:00 [INF] Hosting environment: Development
2024-05-05 19:32:56.980 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:32:57.211 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:32:57.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 175.0604ms
2024-05-05 19:32:57.391 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:32:57.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.1051ms
2024-05-05 19:32:57.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:32:57.413 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.0239ms
2024-05-05 19:32:57.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:32:57.570 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 121.6662ms
2024-05-05 19:33:01.853 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 19:33:01.863 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:01.866 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 13.0833ms
2024-05-05 19:33:01.867 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 19:33:01.868 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:02.046 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:33:02.049 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:33:02.053 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:33:02.079 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:02.084 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:33:02.088 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:33:02.106 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:33:02.106 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:33:02.110 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:02.118 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:02.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:33:02.188 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:02.196 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 63.492ms
2024-05-05 19:33:02.200 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:02.217 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 110.8100ms
2024-05-05 19:33:02.244 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:33:02.265 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:33:02.284 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: d2d2fda4340d5965975e73c7034b205f59ad20fe6d3b35c10fd35dd079229fce
2024-05-05 19:33:02.444 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 19:33:02.456 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:33:02.535 +03:00 [INF] initializing user data update
2024-05-05 19:33:02.560 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 19:33:02.564 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:33:02.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:33:02.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:33:02.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:33:02.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:33:02.630 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:33:02.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:02.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:02.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:02.724 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:33:02.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:02.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:02.923 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:33:02.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:33:03.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:33:03.084 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:33:03.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:33:03.119 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:03.123 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:03.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:03.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:33:03.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:03.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:03.146 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:33:03.153 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:33:03.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:33:03.161 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:33:03.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:33:03.180 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 19:33:03.238 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1156.2835ms
2024-05-05 19:33:03.240 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:33:03.241 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32944 application/json;+charset=utf-8 1373.7930ms
2024-05-05 19:33:03.261 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:33:03.262 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:03.264 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.4306ms
2024-05-05 19:33:03.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:33:03.269 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:03.270 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:33:03.275 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 19:33:03.287 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:33:03.290 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:33:03.290 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:03.297 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:03.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:33:03.306 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:03.306 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.2294ms
2024-05-05 19:33:03.308 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:03.309 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.6594ms
2024-05-05 19:33:03.313 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 19:33:03.317 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:33:03.323 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 46.2649ms
2024-05-05 19:33:03.324 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:33:03.325 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 60.4331ms
2024-05-05 19:33:04.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:33:04.839 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:04.840 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:33:04.844 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:33:04.851 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:33:04.855 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:33:04.856 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 9.8527ms
2024-05-05 19:33:04.858 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:33:04.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.0966ms
2024-05-05 19:33:09.834 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:33:09.836 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:09.839 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 4.2405ms
2024-05-05 19:33:09.840 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 19:33:09.841 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:09.842 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:33:09.848 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:33:09.875 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:33:09.877 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:09.879 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:09.879 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:33:09.888 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:33:09.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:33:09.903 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:09.910 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 25.6795ms
2024-05-05 19:33:09.912 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:09.915 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 39.9111ms
2024-05-05 19:33:09.916 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:33:09.929 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:33:09.935 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:09.937 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 87.6204ms
2024-05-05 19:33:09.939 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:33:09.941 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 100.5652ms
2024-05-05 19:36:02.969 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:36:03.172 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:36:03.208 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:36:03.209 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:36:03.210 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:36:03.211 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:36:03.212 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:36:03.213 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:36:03.214 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:36:03.253 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:36:03.326 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:36:03.327 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:36:03.365 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:36:03.3649414+03:00"
2024-05-05 19:36:03.365 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:36:03.3597219+03:00"
2024-05-05 19:36:04.671 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:36:04.671 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:36:04.701 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:36:04.865 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:36:04.902 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:36:04.9021795+03:00"
2024-05-05 19:36:08.043 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:36:08.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.137 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.160 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.190 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.201 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.223 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.236 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.239 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.261 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.985 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:36:09.077 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:36:09.078 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:36:09.080 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:36:09.081 +03:00 [INF] Hosting environment: Development
2024-05-05 19:36:09.081 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:36:09.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:36:09.620 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 174.7686ms
2024-05-05 19:36:09.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:36:09.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 7.5564ms
2024-05-05 19:36:09.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:36:09.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.9141ms
2024-05-05 19:36:09.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:36:09.833 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.9281ms
2024-05-05 19:36:13.441 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:36:13.445 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:36:13.466 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:36:13.532 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:36:13.555 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:36:13.632 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:36:13.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:36:13.656 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:37:53.499 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 19:41:13.680 +03:00 [WRN] New task timed out. Hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:41:13.682 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 19:41:13.705 +03:00 [ERR] An unexpected error occurred while processing the channels.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.BotController.CallSubscribersByChannels(DailySubRequest dailySubRequest) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\BotController.cs:line 281
2024-05-05 19:41:13.715 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-05 19:41:13.721 +03:00 [INF] Executed action TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi) in 300159.7713ms
2024-05-05 19:41:13.725 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:41:13.736 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35 - 400 - text/plain;+charset=utf-8 300269.9671ms
