2024-05-05 18:30:49.545 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:30:49.800 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:30:49.849 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:30:49.851 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:30:49.852 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:30:49.854 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:30:49.855 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:30:49.856 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:30:49.857 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:30:49.905 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:30:49.980 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:30:49.981 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:30:50.015 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:30:50.0144715+03:00"
2024-05-05 18:30:50.015 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:30:50.0097079+03:00"
2024-05-05 18:30:51.332 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:30:51.332 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:30:51.364 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:30:51.519 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:30:51.557 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:30:51.5579152+03:00"
2024-05-05 18:30:54.277 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:30:54.331 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.337 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.361 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.367 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.372 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.383 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.395 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.411 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:30:54.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:54.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:30:55.225 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:30:55.327 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:30:55.328 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:30:55.330 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:30:55.332 +03:00 [INF] Hosting environment: Development
2024-05-05 18:30:55.333 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:30:55.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:30:55.694 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:30:55.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 183.0940ms
2024-05-05 18:30:55.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 8.2947ms
2024-05-05 18:30:55.703 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:30:55.714 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.0848ms
2024-05-05 18:30:55.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:30:55.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.8112ms
2024-05-05 18:31:00.147 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:31:00.150 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:31:00.177 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:31:00.272 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:31:00.307 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:31:00.435 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:31:00.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:31:00.480 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:31:04.176 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:31:04.188 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:04.193 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 16.7065ms
2024-05-05 18:31:04.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:31:04.196 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:04.292 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:31:04.298 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:04.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:04.333 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:04.341 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:04.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:04.391 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:04.399 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 48.4226ms
2024-05-05 18:31:04.403 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:04.420 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 92.3077ms
2024-05-05 18:31:04.644 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:31:04.658 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:04.723 +03:00 [INF] initializing user data update
2024-05-05 18:31:04.749 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:31:04.752 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:31:04.800 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:31:04.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:31:04.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:31:04.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:31:04.818 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:31:04.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:04.876 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:04.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:04.911 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:31:05.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.098 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:31:05.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:31:05.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:31:05.256 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:31:05.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:31:05.291 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:05.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:05.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:31:05.300 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:31:05.302 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:31:05.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:31:05.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:31:05.319 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:31:05.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:31:05.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:31:05.337 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:31:05.392 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1089.23ms
2024-05-05 18:31:05.393 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:31:05.394 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 1200.5213ms
2024-05-05 18:31:05.415 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:31:05.416 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:05.417 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.9341ms
2024-05-05 18:31:05.418 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:31:05.419 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:05.420 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:31:05.424 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:31:05.431 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:05.432 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:05.434 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:05.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:05.439 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:05.449 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:05.450 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 12.9935ms
2024-05-05 18:31:05.451 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:05.452 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 20.8811ms
2024-05-05 18:31:05.458 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:31:05.467 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:31:05.472 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 46.2479ms
2024-05-05 18:31:05.473 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:31:05.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 58.2749ms
2024-05-05 18:31:07.054 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:31:07.055 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:07.057 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:07.062 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:31:07.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:07.075 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:31:07.076 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 12.6842ms
2024-05-05 18:31:07.077 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:07.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 24.7315ms
2024-05-05 18:31:11.552 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:31:11.554 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:11.556 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.7149ms
2024-05-05 18:31:11.557 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:31:11.558 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:11.559 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:11.563 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:31:11.580 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:11.580 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:11.583 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:11.584 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:11.594 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:11.603 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:11.607 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:11.610 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 17.4903ms
2024-05-05 18:31:11.611 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:11.612 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.7059ms
2024-05-05 18:31:11.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:31:11.626 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:31:11.628 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:11.629 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 64.0076ms
2024-05-05 18:31:11.632 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:11.633 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 76.3322ms
2024-05-05 18:31:34.768 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:31:34.772 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:31:34.826 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:31:45.061 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:31:45.067 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:45.068 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:45.069 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:31:45.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:45.076 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:31:45.078 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.4627ms
2024-05-05 18:31:45.081 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:31:45.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.0495ms
2024-05-05 18:31:49.298 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:31:49.299 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:49.300 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.9915ms
2024-05-05 18:31:49.302 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 18:31:49.302 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:31:49.307 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:49.308 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:31:49.314 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:31:49.316 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:31:49.324 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:49.326 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:31:49.328 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:31:49.334 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:31:49.336 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:31:49.338 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:49.341 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.5676ms
2024-05-05 18:31:49.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:31:49.343 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:31:49.347 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:31:49.348 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.0054ms
2024-05-05 18:31:49.349 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 39.5205ms
2024-05-05 18:31:49.352 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:31:49.353 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 51.3454ms
2024-05-05 18:32:05.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:32:05.074 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:32:05.075 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:32:05.076 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:32:05.082 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:32:05.090 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:32:05.092 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 12.3449ms
2024-05-05 18:32:05.094 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:32:05.095 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 22.0342ms
2024-05-05 18:32:16.024 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:32:16.024 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:32:16.025 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 1.2632ms
2024-05-05 18:32:16.026 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 68
2024-05-05 18:32:16.026 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:32:16.027 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:32:16.028 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:32:16.032 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:32:16.035 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:32:16.041 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:32:16.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:32:16.043 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:32:16.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:32:16.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:32:16.051 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:32:16.055 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:32:16.057 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:32:16.058 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.292ms
2024-05-05 18:32:16.058 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 29.5711ms
2024-05-05 18:32:16.059 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:32:16.060 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:32:16.060 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 25.8400ms
2024-05-05 18:32:16.061 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 68 - 200 0 - 35.6523ms
2024-05-05 18:36:35.490 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:36:35.735 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:36:35.771 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:36:35.772 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:36:35.773 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:36:35.773 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:36:35.775 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:36:35.776 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:36:35.777 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:36:35.818 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:36:35.889 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:36:35.890 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:36:35.924 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:36:35.9233903+03:00"
2024-05-05 18:36:35.924 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:36:35.9184781+03:00"
2024-05-05 18:36:37.226 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:36:37.226 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:36:37.262 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:36:37.424 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
2024-05-05 18:36:37.456 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:36:37.4561846+03:00"
2024-05-05 18:36:40.426 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:36:40.475 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.484 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.512 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.514 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.516 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.524 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.529 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.531 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.546 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.549 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.551 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.557 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:36:40.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.573 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:40.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:41.390 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:36:41.504 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:36:41.505 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:36:41.507 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:36:41.508 +03:00 [INF] Hosting environment: Development
2024-05-05 18:36:41.509 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:36:42.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:36:42.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:36:42.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 266.1912ms
2024-05-05 18:36:42.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.8883ms
2024-05-05 18:36:42.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:36:42.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.1430ms
2024-05-05 18:36:42.421 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:36:42.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.9569ms
2024-05-05 18:36:46.056 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:36:46.060 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:36:46.090 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:36:46.231 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:36:46.267 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:36:46.403 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:36:46.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:36:46.442 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:36:49.468 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 18:36:49.474 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.477 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 9.4128ms
2024-05-05 18:36:49.479 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 18:36:49.480 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.482 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 18:36:49.506 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 18:36:49.507 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 28.6641ms
2024-05-05 18:36:49.680 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:36:49.681 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.682 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.2322ms
2024-05-05 18:36:49.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:36:49.684 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.771 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=l5PZLy6gvIZ8Mc9_B--H7g - -
2024-05-05 18:36:49.772 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.773 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 18:36:49.793 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:49.798 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:49.822 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:49.824 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.828 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:49.859 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:49.866 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 18:36:49.867 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.868 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 1.9775ms
2024-05-05 18:36:49.869 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 18:36:49.870 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:49.871 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 18:36:49.875 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 18:36:49.877 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:49.889 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:49.895 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.896 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:49.905 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 50.2171ms
2024-05-05 18:36:49.912 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:49.925 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:49.928 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.928 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 28.0285ms
2024-05-05 18:36:49.938 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:49.974 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 18:36:49.981 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 158.0504ms
2024-05-05 18:36:49.981 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 91.6008ms
2024-05-05 18:36:50.031 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 18:36:50.065 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:50.116 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 236.5355ms
2024-05-05 18:36:50.124 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 18:36:50.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 263.3038ms
2024-05-05 18:36:50.149 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:36:50.160 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:50.194 +03:00 [INF] initializing user data update
2024-05-05 18:36:50.214 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:36:50.218 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.262 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.273 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.279 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.283 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.336 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:50.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.477 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:50.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:50.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:50.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:50.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:50.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.713 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.719 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:50.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:50.737 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:50.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:50.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:50.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:50.752 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:36:50.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:36:50.780 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:50.782 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:50.784 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:50.788 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 987.2695ms
2024-05-05 18:36:50.793 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:50.793 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:50.794 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:50.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32964 application/json;+charset=utf-8 1112.0583ms
2024-05-05 18:36:50.802 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.807 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:50.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.803 +03:00 [INF] initializing user data update
2024-05-05 18:36:50.812 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:50.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.815 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:36:50.817 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:50.822 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:36:50.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.823 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.4034ms
2024-05-05 18:36:50.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.828 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.831 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:36:50.831 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 37.5576ms
2024-05-05 18:36:50.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:36:50.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.846 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:50.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:50.883 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:36:50.884 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:50.885 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.9447ms
2024-05-05 18:36:50.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:36:50.887 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:50.888 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:36:50.892 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:36:50.932 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:50.935 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:50.945 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.946 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:50.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:50.953 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:50.954 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.7542ms
2024-05-05 18:36:50.955 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:50.956 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 21.6773ms
2024-05-05 18:36:50.959 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:36:50.964 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:50.968 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 74.3441ms
2024-05-05 18:36:50.969 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:36:50.971 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 84.3479ms
2024-05-05 18:36:50.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:50.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:50.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:50.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:50.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:50.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:51.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:51.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:51.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:51.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:36:51.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:51.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:36:51.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:36:51.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:36:51.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:36:51.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:36:51.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:36:51.047 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:36:51.051 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 262.6698ms
2024-05-05 18:36:51.053 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:36:51.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32964 application/json;+charset=utf-8 277.2257ms
2024-05-05 18:36:51.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:36:51.825 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:51.826 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:51.829 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:36:51.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:36:51.840 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:36:51.842 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 11.1766ms
2024-05-05 18:36:51.843 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:51.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.0964ms
2024-05-05 18:36:55.610 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:36:55.611 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:55.612 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.1967ms
2024-05-05 18:36:55.613 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 18:36:55.615 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:55.616 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:36:55.621 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:55.640 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:36:55.640 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:55.643 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:36:55.643 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:36:55.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:36:55.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:36:55.657 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:55.660 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 8.1126ms
2024-05-05 18:36:55.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:36:55.665 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:36:55.669 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 29.2383ms
2024-05-05 18:36:55.674 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:36:55.678 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:36:55.679 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 56.5033ms
2024-05-05 18:36:55.680 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:36:55.681 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 67.7339ms
2024-05-05 18:36:56.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:36:56.658 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:56.662 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:56.668 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:56.865 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:36:56.890 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:36:56.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.918 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.931 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.936 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.950 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.953 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:56.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:56.986 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:56.993 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 322.8371ms
2024-05-05 18:36:56.994 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:56.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60820 application/json;+charset=utf-8 338.7273ms
2024-05-05 18:36:57.023 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:36:57.024 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.026 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.027 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.035 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:36:57.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:36:57.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.056 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.064 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.087 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.090 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.109 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.113 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 83.718ms
2024-05-05 18:36:57.114 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.115 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60820 application/json;+charset=utf-8 92.5371ms
2024-05-05 18:36:57.142 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:36:57.143 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.144 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.145 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.152 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:36:57.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:36:57.161 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.175 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.178 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.195 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.204 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.213 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:36:57.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:36:57.223 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.227 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 79.9835ms
2024-05-05 18:36:57.228 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60820 application/json;+charset=utf-8 87.2901ms
2024-05-05 18:36:57.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:36:57.258 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.259 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:57.260 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:36:57.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:36:57.268 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:36:57.269 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 7.1746ms
2024-05-05 18:36:57.270 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:36:57.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 14.4679ms
2024-05-05 18:36:57.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:36:57.833 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.834 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.835 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.896 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.898 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 60.7948ms
2024-05-05 18:36:57.900 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 69.8899ms
2024-05-05 18:36:57.944 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:36:57.945 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:57.946 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.947 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:57.955 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:57.957 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.4847ms
2024-05-05 18:36:57.959 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:57.960 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 16.1786ms
2024-05-05 18:36:58.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:36:58.073 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.074 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.075 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.081 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.083 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.9767ms
2024-05-05 18:36:58.087 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 2 application/json;+charset=utf-8 16.5736ms
2024-05-05 18:36:58.190 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - -
2024-05-05 18:36:58.191 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.193 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.194 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.201 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.203 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.633ms
2024-05-05 18:36:58.206 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.207 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - - - 200 2 application/json;+charset=utf-8 17.0992ms
2024-05-05 18:36:58.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - -
2024-05-05 18:36:58.381 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.383 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.384 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.391 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.394 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.9489ms
2024-05-05 18:36:58.396 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - - - 200 2 application/json;+charset=utf-8 16.9728ms
2024-05-05 18:36:58.455 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - -
2024-05-05 18:36:58.456 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:36:58.457 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.458 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:36:58.465 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:36:58.467 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.2312ms
2024-05-05 18:36:58.468 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:36:58.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - - - 200 2 application/json;+charset=utf-8 14.0219ms
2024-05-05 18:37:19.397 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:37:19.399 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.399 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.2230ms
2024-05-05 18:37:19.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:37:19.402 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.403 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:37:19.404 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:19.420 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:37:19.424 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:37:19.429 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.434 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:19.435 +03:00 [INF] initializing user data update
2024-05-05 18:37:19.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:37:19.437 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:37:19.439 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:37:19.440 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:37:19.441 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:19.445 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.6667ms
2024-05-05 18:37:19.446 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.442 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:37:19.445 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:37:19.448 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.3117ms
2024-05-05 18:37:19.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:37:19.457 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:37:19.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:37:19.463 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.469 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.472 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:37:19.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.558 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:37:19.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:37:19.573 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:37:19.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:37:19.579 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:37:19.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:37:19.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:37:19.593 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.595 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:37:19.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:37:19.604 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:37:19.606 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:37:19.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:37:19.611 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:37:19.614 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:37:19.617 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 211.044ms
2024-05-05 18:37:19.619 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:37:19.620 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 219.3190ms
2024-05-05 18:37:19.641 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:37:19.642 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.643 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.7923ms
2024-05-05 18:37:19.644 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:37:19.645 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:19.647 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:37:19.648 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:37:19.659 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:37:19.661 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:37:19.665 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.666 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:19.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:37:19.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:37:19.672 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:37:19.675 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:19.677 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 26.918ms
2024-05-05 18:37:19.677 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.2333ms
2024-05-05 18:37:19.678 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:37:19.680 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:19.681 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 36.7260ms
2024-05-05 18:37:19.682 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 21.0474ms
2024-05-05 18:37:20.240 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:37:20.241 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:37:20.302 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:37:20.839 +03:00 [WRN] Cached task timed out.
2024-05-05 18:37:20.840 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:37:20.862 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:37:26.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:37:26.755 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:26.756 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:37:26.758 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:37:26.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:37:26.772 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:37:26.773 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 12.9849ms
2024-05-05 18:37:26.774 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:37:26.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.7165ms
2024-05-05 18:37:31.652 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:37:31.653 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:31.654 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.2788ms
2024-05-05 18:37:31.656 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:37:31.657 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:37:31.658 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:37:31.659 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:37:31.665 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:37:31.669 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:37:31.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:37:31.675 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:31.681 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:37:31.681 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:37:31.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:37:31.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:37:31.689 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:31.690 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:37:31.691 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 30.1176ms
2024-05-05 18:37:31.693 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.4424ms
2024-05-05 18:37:31.694 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:37:31.694 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:37:31.695 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 38.8826ms
2024-05-05 18:37:31.696 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.0703ms
2024-05-05 18:37:49.459 +03:00 [WRN] Cached task timed out.
2024-05-05 18:37:49.461 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:37:49.474 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:38:26.100 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:38:31.343 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:38:31.607 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:38:31.648 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:38:31.649 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:38:31.651 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:38:31.652 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:38:31.653 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:38:31.654 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:38:31.656 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:38:31.700 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:38:31.771 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:38:31.772 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:38:31.823 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:38:31.8172592+03:00"
2024-05-05 18:38:31.823 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:38:31.8218076+03:00"
2024-05-05 18:38:33.159 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:38:33.159 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:38:33.193 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:38:33.268 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:38:33.2686096+03:00"
2024-05-05 18:38:36.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:38:36.348 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.383 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.386 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.397 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.399 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.402 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.415 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.418 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.429 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.434 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.442 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:38:36.445 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.459 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:36.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:38:37.247 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:38:37.362 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:38:37.363 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:38:37.365 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:38:37.366 +03:00 [INF] Hosting environment: Development
2024-05-05 18:38:37.368 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:38:37.894 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:38:38.165 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:38:38.169 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 279.1713ms
2024-05-05 18:38:38.178 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 13.1840ms
2024-05-05 18:38:38.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:38:38.200 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.6686ms
2024-05-05 18:38:38.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:38:38.464 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 230.4903ms
2024-05-05 18:38:41.946 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:38:41.950 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:38:41.982 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:38:42.090 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:38:42.127 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:38:42.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:38:42.285 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:38:42.305 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 18:39:32.435 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:39:32.443 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:32.448 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:32.452 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:39:32.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:39:32.474 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:39:32.483 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 23.5737ms
2024-05-05 18:39:32.486 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:32.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 68.2006ms
2024-05-05 18:39:38.905 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:39:38.906 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:38.908 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.4062ms
2024-05-05 18:39:38.909 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 18:39:38.910 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:38.996 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:39:39.001 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:39.034 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:39:39.035 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:39:39.039 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:39:39.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:39:39.080 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:39:39.081 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 39.9958ms
2024-05-05 18:39:39.083 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:39:39.084 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 50.1678ms
2024-05-05 18:39:39.298 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:39:39.309 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:39:39.372 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:39:39.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:39:39.411 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:39:39.418 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:39:39.419 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 416.4303ms
2024-05-05 18:39:39.422 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:39:39.423 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 513.8148ms
2024-05-05 18:39:50.557 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:39:50.558 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:50.561 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:50.566 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:50.698 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:50.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:50.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.754 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.757 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.759 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.766 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.770 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.773 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.775 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.779 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.784 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.792 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:50.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:50.798 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:50.830 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 262.686ms
2024-05-05 18:39:50.832 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:50.833 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68660 application/json;+charset=utf-8 276.5129ms
2024-05-05 18:39:50.862 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:39:50.863 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:50.864 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:50.865 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:39:50.868 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:39:50.875 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:39:50.876 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.0408ms
2024-05-05 18:39:50.877 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:39:50.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 15.7072ms
2024-05-05 18:39:51.835 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - -
2024-05-05 18:39:51.836 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:51.838 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:51.839 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:51.878 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:51.879 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 38.8584ms
2024-05-05 18:39:51.881 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:51.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - - - 200 2 application/json;+charset=utf-8 46.9902ms
2024-05-05 18:39:53.316 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 18:39:53.317 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:53.318 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.320 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:53.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:53.333 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:53.337 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:53.339 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:53.341 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:53.342 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 19.7424ms
2024-05-05 18:39:53.343 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 27.4885ms
2024-05-05 18:39:53.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 18:39:53.980 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:53.981 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.983 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:53.990 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:53.992 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.8752ms
2024-05-05 18:39:53.993 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:53.994 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 15.3908ms
2024-05-05 18:39:54.127 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 18:39:54.128 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:54.129 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.130 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:54.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:54.143 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:54.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.147 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.149 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.151 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.153 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:54.155 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.3638ms
2024-05-05 18:39:54.157 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10009 application/json;+charset=utf-8 30.8538ms
2024-05-05 18:39:54.225 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - -
2024-05-05 18:39:54.226 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:54.227 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.227 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:54.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:54.239 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:54.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:54.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:54.251 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:54.252 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 23.2634ms
2024-05-05 18:39:54.253 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:54.254 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - - - 200 10009 application/json;+charset=utf-8 29.1184ms
2024-05-05 18:39:56.504 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 18:39:56.504 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:56.505 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:56.506 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:56.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:56.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:56.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:56.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:56.529 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:56.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:56.532 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:56.533 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 26.7093ms
2024-05-05 18:39:56.534 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:56.537 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10009 application/json;+charset=utf-8 33.6408ms
2024-05-05 18:39:57.362 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 18:39:57.363 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:57.363 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.364 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:57.368 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:57.370 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.5162ms
2024-05-05 18:39:57.371 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.372 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 9.5475ms
2024-05-05 18:39:57.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 18:39:57.906 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:57.907 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.908 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:57.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:57.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:57.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:57.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:57.928 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:57.929 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 19.4386ms
2024-05-05 18:39:57.930 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:57.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 26.1909ms
2024-05-05 18:39:58.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:39:58.430 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:39:58.431 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:58.433 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:39:58.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:39:58.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:39:58.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.451 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.458 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.467 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.472 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.474 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.475 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.479 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.483 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.485 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:39:58.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:39:58.491 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:39:58.496 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 61.2421ms
2024-05-05 18:39:58.496 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:39:58.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68660 application/json;+charset=utf-8 69.1475ms
2024-05-05 18:40:22.004 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:40:39.191 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:40:39.192 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:39.193 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.194 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:39.201 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:39.204 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.5341ms
2024-05-05 18:40:39.205 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 15.6868ms
2024-05-05 18:40:39.361 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:40:39.367 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:39.368 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.369 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:39.375 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:39.377 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.7252ms
2024-05-05 18:40:39.378 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 18.2523ms
2024-05-05 18:40:39.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:40:39.984 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:39.985 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.986 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:39.994 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:39.995 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.0021ms
2024-05-05 18:40:39.996 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:39.997 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 2 application/json;+charset=utf-8 14.4394ms
2024-05-05 18:40:40.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - -
2024-05-05 18:40:40.096 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:40.097 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.098 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:40.105 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:40.107 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.376ms
2024-05-05 18:40:40.108 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - - - 200 2 application/json;+charset=utf-8 16.1930ms
2024-05-05 18:40:40.283 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - -
2024-05-05 18:40:40.284 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:40.285 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.286 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:40.292 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:40.296 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.2503ms
2024-05-05 18:40:40.297 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2 - - - 200 2 application/json;+charset=utf-8 15.9871ms
2024-05-05 18:40:40.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - -
2024-05-05 18:40:40.447 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:40:40.448 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.449 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:40:40.458 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:40:40.461 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.338ms
2024-05-05 18:40:40.463 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:40:40.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE - - - 200 2 application/json;+charset=utf-8 18.6859ms
2024-05-05 18:41:42.946 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:41:43.148 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:41:43.188 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:41:43.189 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:41:43.190 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:41:43.191 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:41:43.192 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:41:43.193 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:41:43.194 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:41:43.240 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:41:43.313 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:41:43.314 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:41:43.347 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:41:43.3457566+03:00"
2024-05-05 18:41:43.347 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:41:43.3416080+03:00"
2024-05-05 18:41:44.673 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:41:44.673 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:41:44.705 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:41:44.869 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
2024-05-05 18:41:44.904 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:41:44.9048285+03:00"
2024-05-05 18:41:47.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:41:47.898 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.931 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.959 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.961 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:41:47.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:47.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:41:48.816 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:41:48.925 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:41:48.926 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:41:48.928 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:41:48.929 +03:00 [INF] Hosting environment: Development
2024-05-05 18:41:48.930 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:41:49.439 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:41:49.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 170.8539ms
2024-05-05 18:41:49.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:41:49.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 3.8997ms
2024-05-05 18:41:49.635 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:41:49.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.7335ms
2024-05-05 18:41:49.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:41:49.848 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.3112ms
2024-05-05 18:41:53.419 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:41:53.422 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:41:53.443 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:41:53.513 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:41:53.535 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:41:53.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:41:53.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:41:53.637 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:42:25.960 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:42:26.176 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:42:26.212 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:42:26.213 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:42:26.214 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:42:26.215 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:42:26.216 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:42:26.217 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:42:26.218 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:42:26.261 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:42:26.334 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:42:26.335 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:42:26.370 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:42:26.3683934+03:00"
2024-05-05 18:42:26.370 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:42:26.3639909+03:00"
2024-05-05 18:42:27.762 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:42:27.762 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:42:27.794 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:42:27.977 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:42:28.014 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:42:28.0148679+03:00"
2024-05-05 18:42:30.693 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:42:30.752 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.759 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.762 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.785 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.798 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.821 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.831 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.839 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.844 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:42:30.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:30.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:42:31.650 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:42:31.767 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:42:31.768 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:42:31.770 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:42:31.771 +03:00 [INF] Hosting environment: Development
2024-05-05 18:42:31.772 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:42:32.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:42:32.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:42:32.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 276.6348ms
2024-05-05 18:42:32.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.3202ms
2024-05-05 18:42:32.627 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:42:32.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.7174ms
2024-05-05 18:42:32.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:42:32.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 229.1659ms
2024-05-05 18:42:36.451 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:42:36.454 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:42:36.479 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:42:36.552 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:42:36.573 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:42:36.653 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:42:36.668 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:42:36.680 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:43:24.295 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:43:24.503 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:43:24.542 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:43:24.542 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:43:24.543 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:43:24.544 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:43:24.545 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:43:24.546 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:43:24.547 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:43:24.588 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:43:24.657 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:43:24.658 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:43:24.706 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:43:24.7054727+03:00"
2024-05-05 18:43:24.706 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:43:24.6980661+03:00"
2024-05-05 18:43:26.020 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:43:26.020 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:43:26.051 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:43:26.124 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:43:26.1246209+03:00"
2024-05-05 18:43:29.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:43:29.256 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.265 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.289 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.301 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.304 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.311 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.317 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.320 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.322 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.334 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.337 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.340 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.342 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.348 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:29.351 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.356 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.358 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:29.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:43:30.181 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:43:30.271 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:43:30.272 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:43:30.274 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:43:30.274 +03:00 [INF] Hosting environment: Development
2024-05-05 18:43:30.275 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:43:30.820 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:43:31.086 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 269.7182ms
2024-05-05 18:43:31.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:43:31.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.2019ms
2024-05-05 18:43:31.107 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:43:31.123 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.4249ms
2024-05-05 18:43:31.151 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:43:31.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.9301ms
2024-05-05 18:43:34.817 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:43:34.821 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:43:34.846 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:43:34.939 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:43:34.981 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:43:35.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:43:35.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:43:35.146 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 288cf8336d5dd0641c7a96483a5a073146a5e7fd172967d585c38a9a212854a1
2024-05-05 18:43:42.602 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:43:42.610 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:42.613 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 10.3021ms
2024-05-05 18:43:42.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:43:42.615 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:42.708 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:43:42.713 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:43:42.735 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:43:42.738 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:42.743 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:43:42.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:43:42.792 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:43:42.801 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 47.7181ms
2024-05-05 18:43:42.804 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:42.822 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 86.5175ms
2024-05-05 18:43:43.035 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:43:43.049 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:43:43.124 +03:00 [INF] initializing user data update
2024-05-05 18:43:43.149 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:43:43.153 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:43:43.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:43:43.202 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:43:43.206 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:43:43.211 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:43:43.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:43:43.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.265 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.284 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:43:43.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.476 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:43:43.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:43:43.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:43:43.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:43:43.661 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:43.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:43:43.671 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:43.672 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:43.680 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:43.681 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.690 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.696 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:43:43.700 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:43:43.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:43:43.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:43:43.717 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:43:43.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:43:43.729 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:43:43.743 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:43:43.802 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1087.2672ms
2024-05-05 18:43:43.804 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:43:43.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 1191.3839ms
2024-05-05 18:43:43.825 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:43:43.826 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:43.827 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 2.1526ms
2024-05-05 18:43:43.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:43:43.832 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:43.834 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:43:43.838 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:43:43.848 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:43:43.849 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:43:43.850 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:43.866 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:43:43.882 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:43:43.884 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:43:43.886 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:43:43.891 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:43.893 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 24.5625ms
2024-05-05 18:43:43.897 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:43:43.899 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 50.5725ms
2024-05-05 18:43:43.900 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 59.3098ms
2024-05-05 18:43:43.901 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:43.902 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:43:43.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 80.1353ms
2024-05-05 18:43:43.929 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:43.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.957 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.961 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.976 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:43.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:43.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:44.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:44.007 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:44.012 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 329.985ms
2024-05-05 18:43:44.013 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.016 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 71099 application/json;+charset=utf-8 346.1156ms
2024-05-05 18:43:44.046 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:43:44.047 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:44.048 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:43:44.052 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:43:44.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:43:44.062 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:43:44.064 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.3892ms
2024-05-05 18:43:44.065 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:43:44.066 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 20.1942ms
2024-05-05 18:43:44.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - -
2024-05-05 18:43:44.830 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:44.834 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.835 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:44.893 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:44.895 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 57.4557ms
2024-05-05 18:43:44.896 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - - - 200 2 application/json;+charset=utf-8 68.8151ms
2024-05-05 18:43:44.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=bu - -
2024-05-05 18:43:44.942 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:44.943 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.944 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:44.951 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:44.952 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.2241ms
2024-05-05 18:43:44.953 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:44.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=bu - - - 200 2 application/json;+charset=utf-8 13.6814ms
2024-05-05 18:43:45.328 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - -
2024-05-05 18:43:45.329 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.330 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.332 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.339 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.341 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.2287ms
2024-05-05 18:43:45.342 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.343 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=b - - - 200 2 application/json;+charset=utf-8 14.9997ms
2024-05-05 18:43:45.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:43:45.429 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.430 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.431 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:45.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:45.447 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.452 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.457 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.463 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.468 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.473 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.476 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.478 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.484 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.494 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.501 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.505 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.508 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.512 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 79.0761ms
2024-05-05 18:43:45.513 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.517 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 71099 application/json;+charset=utf-8 88.7189ms
2024-05-05 18:43:45.739 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 18:43:45.740 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.741 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.742 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.751 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:45.755 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:45.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.763 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.766 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.767 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 23.0884ms
2024-05-05 18:43:45.769 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 31.0486ms
2024-05-05 18:43:45.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 18:43:45.834 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.835 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.837 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.841 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:45.843 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.4869ms
2024-05-05 18:43:45.844 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 12.3479ms
2024-05-05 18:43:45.968 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 18:43:45.970 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:45.971 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:45.972 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:45.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:45.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:45.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:45.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:45.997 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:46.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:46.002 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:46.007 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 32.6349ms
2024-05-05 18:43:46.008 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:46.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10009 application/json;+charset=utf-8 41.0874ms
2024-05-05 18:43:46.047 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - -
2024-05-05 18:43:46.048 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:46.049 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:46.050 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:46.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:46.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:46.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:46.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:46.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:46.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:46.078 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:46.080 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 27.0934ms
2024-05-05 18:43:46.081 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:46.084 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - - - 200 10009 application/json;+charset=utf-8 37.2648ms
2024-05-05 18:43:49.051 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:43:49.053 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.054 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.055 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.061 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.063 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.6542ms
2024-05-05 18:43:49.064 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 13.3825ms
2024-05-05 18:43:49.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:49.162 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.163 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.164 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.170 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.172 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.0291ms
2024-05-05 18:43:49.174 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.176 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 14.7759ms
2024-05-05 18:43:49.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:43:49.305 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.307 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.309 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.317 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:49.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:49.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:49.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:49.331 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.333 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.062ms
2024-05-05 18:43:49.336 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 7810 application/json;+charset=utf-8 33.5626ms
2024-05-05 18:43:49.586 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - -
2024-05-05 18:43:49.587 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:49.588 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.589 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:49.595 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:49.601 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:49.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:49.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:49.611 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:49.613 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.4243ms
2024-05-05 18:43:49.616 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:49.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80%D0%B5 - - - 200 7810 application/json;+charset=utf-8 31.4688ms
2024-05-05 18:43:51.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:43:51.269 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:51.271 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.272 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:51.280 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:51.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:51.288 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:51.291 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:51.295 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:51.297 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.7529ms
2024-05-05 18:43:51.298 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 7810 application/json;+charset=utf-8 30.7335ms
2024-05-05 18:43:51.421 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:51.422 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:51.423 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.424 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:51.429 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:51.433 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.3963ms
2024-05-05 18:43:51.434 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 14.1711ms
2024-05-05 18:43:51.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:43:51.573 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:51.574 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.575 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:51.581 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:51.585 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.4213ms
2024-05-05 18:43:51.586 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:51.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 15.1317ms
2024-05-05 18:43:52.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:52.215 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:52.216 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.217 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:52.224 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:52.226 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.9738ms
2024-05-05 18:43:52.227 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.228 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 14.2437ms
2024-05-05 18:43:52.923 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - -
2024-05-05 18:43:52.924 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:52.925 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.926 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:52.935 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:52.939 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:52.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:52.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:52.952 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:52.954 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 25.2859ms
2024-05-05 18:43:52.955 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:52.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5%D1%80 - - - 200 7810 application/json;+charset=utf-8 33.5729ms
2024-05-05 18:43:53.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - -
2024-05-05 18:43:53.790 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:53.791 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.792 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:53.799 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:53.801 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.1695ms
2024-05-05 18:43:53.802 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4%D0%B5 - - - 200 2 application/json;+charset=utf-8 15.2831ms
2024-05-05 18:43:53.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - -
2024-05-05 18:43:53.942 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:53.943 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.944 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:53.951 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:53.954 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.1954ms
2024-05-05 18:43:53.955 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:53.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B4 - - - 200 2 application/json;+charset=utf-8 15.1804ms
2024-05-05 18:43:54.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 18:43:54.073 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:43:54.074 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:54.075 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:43:54.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 18:43:54.090 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 18:43:54.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.111 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.114 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.117 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.122 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.128 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.133 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.136 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.143 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.146 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 18:43:54.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:43:54.151 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:43:54.155 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 78.055ms
2024-05-05 18:43:54.161 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 18:43:54.162 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 71099 application/json;+charset=utf-8 90.6800ms
2024-05-05 18:44:00.929 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:44:00.930 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:00.931 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 1.9663ms
2024-05-05 18:44:00.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:44:00.933 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:00.934 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:44:00.935 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:00.944 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:44:00.947 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:44:00.954 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:00.954 +03:00 [INF] initializing user data update
2024-05-05 18:44:00.955 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:44:00.955 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:00.958 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:44:00.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:44:00.967 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:44:00.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:44:00.968 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:44:00.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:44:00.981 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:00.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:44:00.986 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 20.5657ms
2024-05-05 18:44:00.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:44:00.993 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:00.997 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:00.998 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 50.0905ms
2024-05-05 18:44:01.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.008 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:44:01.094 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:44:01.111 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:44:01.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:44:01.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:44:01.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:01.137 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:44:01.150 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:44:01.155 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.158 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:44:01.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:44:01.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:44:01.174 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:44:01.180 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:44:01.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:01.187 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:44:01.192 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 253.7651ms
2024-05-05 18:44:01.195 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:44:01.197 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32948 application/json;+charset=utf-8 264.5295ms
2024-05-05 18:44:01.218 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:44:01.220 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:01.222 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.2099ms
2024-05-05 18:44:01.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:44:01.225 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:01.228 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:44:01.228 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:44:01.235 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:44:01.236 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:44:01.247 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:01.248 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:01.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:44:01.252 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:44:01.260 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:44:01.262 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:01.264 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 33.1106ms
2024-05-05 18:44:01.265 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 13.8488ms
2024-05-05 18:44:01.266 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:44:01.267 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:01.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 45.7050ms
2024-05-05 18:44:01.269 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.8660ms
2024-05-05 18:44:03.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:44:03.130 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:03.131 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:44:03.132 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:44:03.136 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:44:03.141 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:44:03.142 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.4918ms
2024-05-05 18:44:03.144 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:44:03.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 16.3254ms
2024-05-05 18:44:13.172 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:44:13.174 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:44:13.201 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:44:14.259 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:44:14.260 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:14.263 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 4.4371ms
2024-05-05 18:44:14.264 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:44:14.266 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:44:14.267 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:44:14.273 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:44:14.287 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:44:14.288 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:14.290 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:44:14.290 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:44:14.293 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:44:14.299 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:44:14.300 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:14.304 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 12.6647ms
2024-05-05 18:44:14.306 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:44:14.307 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 19.6707ms
2024-05-05 18:44:14.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:44:14.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:44:14.322 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:44:14.323 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 47.8098ms
2024-05-05 18:44:14.324 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:44:14.324 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 60.1794ms
2024-05-05 18:44:30.975 +03:00 [WRN] Cached task timed out.
2024-05-05 18:44:30.976 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:44:30.998 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:44:40.252 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:44:40.457 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:44:40.495 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:44:40.496 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:44:40.497 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:44:40.498 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:44:40.499 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:44:40.500 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:44:40.501 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:44:40.559 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:44:40.634 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:44:40.634 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:44:40.666 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:44:40.6597907+03:00"
2024-05-05 18:44:40.666 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:44:40.6645970+03:00"
2024-05-05 18:44:41.942 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:44:41.942 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:44:41.971 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:44:42.133 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:44:42.166 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:44:42.1659905+03:00"
2024-05-05 18:44:44.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:44:44.662 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.700 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.703 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.713 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.730 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.738 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.744 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.746 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:44:44.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.758 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:44.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:44:45.576 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:44:45.679 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:44:45.679 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:44:45.682 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:44:45.682 +03:00 [INF] Hosting environment: Development
2024-05-05 18:44:45.683 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:44:46.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:44:46.532 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:44:46.535 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 184.4458ms
2024-05-05 18:44:46.538 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.7707ms
2024-05-05 18:44:46.545 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:44:46.555 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.4369ms
2024-05-05 18:44:46.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:44:46.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 160.1536ms
2024-05-05 18:44:50.781 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:44:50.785 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:44:50.811 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:44:50.901 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:44:50.939 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:44:51.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:44:51.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:44:51.108 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:45:36.110 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:45:36.115 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:36.118 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:36.120 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:45:36.126 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:36.137 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:45:36.144 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 19.1972ms
2024-05-05 18:45:36.147 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:36.156 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 45.7663ms
2024-05-05 18:45:37.891 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 18:45:37.892 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:37.894 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.9366ms
2024-05-05 18:45:37.903 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 18:45:37.912 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:37.963 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:45:37.966 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:37.982 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:37.983 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:37.985 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:38.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:38.013 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:38.014 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 26.9864ms
2024-05-05 18:45:38.015 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:38.017 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 35.0246ms
2024-05-05 18:45:38.178 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:45:38.186 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:38.228 +03:00 [INF] initializing user data update
2024-05-05 18:45:38.241 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:45:38.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:45:38.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:45:38.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:45:38.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:45:38.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 18:45:38.282 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 18:45:38.298 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.314 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.339 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:45:38.377 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.408 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:45:38.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:45:38.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:45:38.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:45:38.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:45:38.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 18:45:38.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 18:45:38.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.592 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 18:45:38.596 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 18:45:38.599 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 18:45:38.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 18:45:38.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 18:45:38.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:45:38.614 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 18:45:38.648 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 680.9416ms
2024-05-05 18:45:38.649 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 18:45:38.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32942 application/json;+charset=utf-8 746.1264ms
2024-05-05 18:45:38.670 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:45:38.671 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:38.671 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.8411ms
2024-05-05 18:45:38.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 18:45:38.673 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:38.674 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:45:38.676 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 18:45:38.682 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:38.684 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:38.685 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:38.686 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:38.697 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:38.704 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:38.706 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 18:45:38.707 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.0779ms
2024-05-05 18:45:38.710 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 18:45:38.710 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:38.712 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 29.8400ms
2024-05-05 18:45:38.713 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 35.7854ms
2024-05-05 18:45:38.716 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 18:45:38.717 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 44.3173ms
2024-05-05 18:45:41.399 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:45:41.400 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:41.401 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:41.402 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:45:41.407 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:41.410 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:45:41.411 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 7.2527ms
2024-05-05 18:45:41.415 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:41.416 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 17.2344ms
2024-05-05 18:45:43.345 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:45:43.346 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:43.347 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.6854ms
2024-05-05 18:45:43.349 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:45:43.351 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:43.353 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:43.358 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:45:43.372 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:43.373 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:43.374 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:43.380 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:43.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:43.383 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:43.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:45:43.391 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:43.394 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.5683ms
2024-05-05 18:45:43.394 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:43.396 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:43.396 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 24.1958ms
2024-05-05 18:45:43.396 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 36.4539ms
2024-05-05 18:45:43.398 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:43.399 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 50.2490ms
2024-05-05 18:45:45.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:45:45.279 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:45.280 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:45.281 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:45:45.283 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:45.285 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:45:45.286 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 3.5088ms
2024-05-05 18:45:45.286 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:45:45.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 9.1076ms
2024-05-05 18:45:47.511 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 18:45:47.512 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:45:47.516 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:47.517 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:45:47.527 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:45:47.529 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:45:47.536 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:47.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:45:47.537 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:45:47.540 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:45:47.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:45:47.547 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:45:47.549 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:47.551 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:45:47.552 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.7809ms
2024-05-05 18:45:47.553 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 33.5456ms
2024-05-05 18:45:47.553 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:45:47.555 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:45:47.556 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.0749ms
2024-05-05 18:45:47.557 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 45.7177ms
2024-05-05 18:46:08.259 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 18:46:08.260 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 18:46:08.350 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 18:46:30.875 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:47:19.100 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:47:19.316 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:47:19.354 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:47:19.355 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:47:19.356 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:47:19.357 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:47:19.358 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:47:19.358 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:47:19.360 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:47:19.401 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:47:19.469 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:47:19.470 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:47:19.505 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:47:19.4996613+03:00"
2024-05-05 18:47:19.505 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:47:19.5055283+03:00"
2024-05-05 18:47:20.813 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:47:20.813 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:47:20.843 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:47:20.999 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:47:21.039 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:47:21.0396928+03:00"
2024-05-05 18:47:23.769 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:47:23.818 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.848 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.860 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.870 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.884 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.886 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.889 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.890 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.892 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:47:23.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.898 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:23.900 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:47:24.749 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:47:24.844 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:47:24.845 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:47:24.847 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:47:24.847 +03:00 [INF] Hosting environment: Development
2024-05-05 18:47:24.848 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:47:25.154 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:47:25.328 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 176.4051ms
2024-05-05 18:47:25.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:47:25.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.2483ms
2024-05-05 18:47:25.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:47:25.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.8810ms
2024-05-05 18:47:25.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:47:25.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.5502ms
2024-05-05 18:47:27.455 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:47:27.461 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:47:27.533 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:47:27.549 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:47:27.562 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:47:27.577 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:47:27.583 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 28.7023ms
2024-05-05 18:47:27.586 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:47:27.595 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 139.5811ms
2024-05-05 18:47:29.586 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:47:29.588 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:47:29.607 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:47:29.609 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:47:29.617 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:47:29.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:47:29.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:47:29.712 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: d2d2fda4340d5965975e73c7034b205f59ad20fe6d3b35c10fd35dd079229fce
2024-05-05 18:47:32.388 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:47:32.390 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:47:32.392 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.2024ms
2024-05-05 18:47:32.393 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 18:47:32.394 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:47:32.445 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:47:32.448 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:47:32.479 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:47:32.481 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:47:32.484 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:47:32.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:47:32.514 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:47:32.515 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 28.4081ms
2024-05-05 18:47:32.516 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:47:32.517 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 37.9775ms
2024-05-05 18:47:32.675 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:47:32.684 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:47:32.722 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:47:32.727 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:47:32.741 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:47:32.745 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:47:32.745 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 295.6545ms
2024-05-05 18:47:32.746 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:47:32.747 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 353.9913ms
2024-05-05 18:49:09.690 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:50:21.698 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:50:21.895 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:50:21.931 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:50:21.931 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:50:21.932 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:50:21.933 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:50:21.935 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:50:21.936 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:50:21.938 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:21.978 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:22.045 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:22.046 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:22.082 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:50:22.0761716+03:00"
2024-05-05 18:50:22.082 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:50:22.0803005+03:00"
2024-05-05 18:50:23.399 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:50:23.399 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:50:23.433 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:50:23.587 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:50:41.415 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:50:41.611 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:50:41.651 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:50:41.652 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:50:41.653 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:50:41.655 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:50:41.656 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:50:41.657 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:50:41.658 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:41.696 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:41.766 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:50:41.767 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:50:41.800 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:50:41.7986644+03:00"
2024-05-05 18:50:41.800 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:50:41.7948063+03:00"
2024-05-05 18:50:43.088 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:50:43.088 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:50:43.120 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:50:43.280 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
2024-05-05 18:52:08.644 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:52:08.840 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:52:08.876 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:52:08.877 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:52:08.878 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:52:08.878 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:52:08.879 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:52:08.880 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:52:08.882 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:52:08.921 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:52:08.995 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:52:08.996 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:52:09.028 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:52:09.0219614+03:00"
2024-05-05 18:52:09.028 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:52:09.0267482+03:00"
2024-05-05 18:52:10.337 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:52:10.337 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:52:10.367 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:52:10.524 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:52:10.558 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:52:10.5582791+03:00"
2024-05-05 18:52:13.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:52:13.666 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.675 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.692 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.744 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.750 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.755 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.757 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:52:13.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:13.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:52:14.575 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:52:14.676 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:52:14.677 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:52:14.679 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:52:14.679 +03:00 [INF] Hosting environment: Development
2024-05-05 18:52:14.680 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:52:15.156 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:52:15.413 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:52:15.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 7.5112ms
2024-05-05 18:52:15.422 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:52:15.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 272.0292ms
2024-05-05 18:52:15.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.1601ms
2024-05-05 18:52:15.482 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:52:15.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.5694ms
2024-05-05 18:52:19.151 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:52:19.155 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:52:19.179 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:52:19.272 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:52:19.306 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:52:19.445 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:52:19.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:52:19.491 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 18:52:27.861 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:52:27.867 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:27.872 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:27.875 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:52:27.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:27.889 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:52:27.896 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.8141ms
2024-05-05 18:52:27.898 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:27.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 52.1437ms
2024-05-05 18:52:29.972 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:52:29.974 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:29.975 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.9544ms
2024-05-05 18:52:29.976 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 53
2024-05-05 18:52:29.977 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:30.032 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:30.036 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:52:30.061 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:52:30.062 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:30.066 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:52:30.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:52:30.098 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:30.099 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 30.0436ms
2024-05-05 18:52:30.101 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:30.104 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 42.7230ms
2024-05-05 18:52:30.257 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:52:30.266 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:52:30.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:30.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:52:30.329 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:52:30.334 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:30.335 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 296.3759ms
2024-05-05 18:52:30.337 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:30.338 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 53 - 200 0 - 362.4913ms
2024-05-05 18:52:37.695 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:52:37.696 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:37.698 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:37.700 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:52:37.706 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:37.710 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:52:37.711 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.4596ms
2024-05-05 18:52:37.714 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:52:37.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 19.5966ms
2024-05-05 18:52:39.058 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:52:39.061 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:39.063 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 4.5017ms
2024-05-05 18:52:39.064 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 65
2024-05-05 18:52:39.065 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:52:39.068 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:39.069 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:52:39.076 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:52:39.077 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:52:39.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:52:39.083 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:39.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:52:39.086 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:52:39.093 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:52:39.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:52:39.096 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:39.098 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:52:39.098 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 27.605ms
2024-05-05 18:52:39.099 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.353ms
2024-05-05 18:52:39.099 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:52:39.100 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:52:39.101 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 65 - 200 0 - 36.8236ms
2024-05-05 18:52:39.102 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 25.0009ms
2024-05-05 18:54:28.009 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:54:28.222 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:54:28.259 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:54:28.260 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:54:28.261 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:54:28.262 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:54:28.263 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:54:28.264 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:54:28.265 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:54:28.306 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:54:28.375 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:54:28.376 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:54:28.407 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:54:28.4025827+03:00"
2024-05-05 18:54:28.407 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:54:28.4071787+03:00"
2024-05-05 18:54:29.727 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:54:29.727 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:54:29.756 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:54:29.915 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:54:29.979 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:54:29.9796742+03:00"
2024-05-05 18:54:32.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:54:32.950 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:32.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.988 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:32.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.006 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.015 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.019 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.026 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.028 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.033 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.040 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.042 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:54:33.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:54:33.870 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:54:33.970 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:54:33.971 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:54:33.973 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:54:33.973 +03:00 [INF] Hosting environment: Development
2024-05-05 18:54:33.974 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:54:34.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:54:34.827 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:54:34.835 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.4601ms
2024-05-05 18:54:34.836 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 270.2704ms
2024-05-05 18:54:34.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:54:34.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.4195ms
2024-05-05 18:54:34.893 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:54:35.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.9486ms
2024-05-05 18:54:38.532 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:54:38.536 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:54:38.565 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:54:38.665 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:54:38.703 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:54:38.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:54:38.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:54:38.874 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: d12b99463cd479f08674ed12456151dc2681e6b2cc60a9ce484f34d6599ccf1c
2024-05-05 18:55:42.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:55:42.155 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:55:42.160 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:55:42.166 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:55:42.184 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:55:42.198 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:55:42.209 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 27.1146ms
2024-05-05 18:55:42.212 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:55:42.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 84.6133ms
2024-05-05 18:55:48.236 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:55:48.237 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:55:48.241 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 5.3763ms
2024-05-05 18:55:48.243 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:55:48.244 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:55:48.295 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:55:48.300 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:55:48.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:55:48.328 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:55:48.331 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:55:48.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:55:48.357 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:55:48.358 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 25.7768ms
2024-05-05 18:55:48.359 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:55:48.361 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 33.4245ms
2024-05-05 18:55:48.503 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:55:48.511 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:55:48.549 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:55:48.555 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:55:48.569 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:55:48.573 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:55:48.573 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 272.2486ms
2024-05-05 18:55:48.574 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:55:48.575 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 332.0167ms
2024-05-05 18:56:18.586 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 18:58:02.073 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 18:58:02.274 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 18:58:02.312 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 18:58:02.313 +03:00 [INF] Quartz Scheduler created
2024-05-05 18:58:02.314 +03:00 [INF] RAMJobStore initialized.
2024-05-05 18:58:02.315 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 18:58:02.316 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 18:58:02.316 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 18:58:02.317 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:58:02.358 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:58:02.429 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 18:58:02.429 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 18:58:02.461 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T18:58:02.4544335+03:00"
2024-05-05 18:58:02.461 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T18:58:02.4586008+03:00"
2024-05-05 18:58:03.759 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 18:58:03.759 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 18:58:03.789 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 18:58:03.952 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 18:58:03.990 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T18:58:03.9909263+03:00"
2024-05-05 18:58:06.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 18:58:06.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.549 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.557 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.569 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.571 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.583 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.588 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.592 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.597 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 18:58:06.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.605 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.612 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.614 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:06.616 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 18:58:07.426 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 18:58:07.520 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 18:58:07.521 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 18:58:07.523 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 18:58:07.524 +03:00 [INF] Hosting environment: Development
2024-05-05 18:58:07.525 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 18:58:07.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 18:58:07.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 18:58:08.000 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 193.0666ms
2024-05-05 18:58:08.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.9397ms
2024-05-05 18:58:08.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 18:58:08.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.8266ms
2024-05-05 18:58:08.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 18:58:08.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.2675ms
2024-05-05 18:58:12.554 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:58:12.557 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 18:58:12.577 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 18:58:12.647 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 18:58:12.672 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 18:58:12.749 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 18:58:12.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 18:58:12.777 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 18:58:15.858 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:58:15.864 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:15.872 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:15.875 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:58:15.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:15.889 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:58:15.896 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.1194ms
2024-05-05 18:58:15.898 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:15.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 49.8134ms
2024-05-05 18:58:17.856 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:58:17.858 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:17.859 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.2302ms
2024-05-05 18:58:17.860 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 64
2024-05-05 18:58:17.861 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:17.915 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:17.919 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:58:17.942 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:58:17.943 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:17.946 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:58:17.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:58:17.976 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:17.977 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 27.7058ms
2024-05-05 18:58:17.980 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:17.982 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 39.6919ms
2024-05-05 18:58:18.129 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 18:58:18.137 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:58:18.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:18.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:58:18.192 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:58:18.196 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:18.196 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 274.9641ms
2024-05-05 18:58:18.197 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:18.198 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 64 - 200 0 - 338.4518ms
2024-05-05 18:58:29.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 18:58:29.873 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:29.873 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:29.874 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 18:58:29.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:29.881 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 18:58:29.882 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.331ms
2024-05-05 18:58:29.884 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 18:58:29.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 13.8544ms
2024-05-05 18:58:32.191 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 18:58:32.192 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:32.194 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.4966ms
2024-05-05 18:58:32.196 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 18:58:32.197 +03:00 [INF] CORS policy execution successful.
2024-05-05 18:58:32.203 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:32.204 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 18:58:32.214 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 18:58:32.217 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 18:58:32.224 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:32.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 18:58:32.225 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 18:58:32.229 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 18:58:32.231 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 18:58:32.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 18:58:32.239 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:32.241 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 18:58:32.241 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.1338ms
2024-05-05 18:58:32.242 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 35.9829ms
2024-05-05 18:58:32.242 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 18:58:32.243 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 18:58:32.244 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.1055ms
2024-05-05 18:58:32.245 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 48.7754ms
2024-05-05 18:59:52.614 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 19:02:20.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:02:20.802 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:02:20.803 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:02:20.804 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:02:20.810 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:02:20.814 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:02:20.815 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.1301ms
2024-05-05 19:02:20.819 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:02:20.820 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 20.5561ms
2024-05-05 19:03:12.787 +03:00 [WRN] New task timed out. Hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 19:03:12.788 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 19:03:12.816 +03:00 [ERR] An unexpected error occurred while processing the channels.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.BotController.CallSubscribersByChannels(DailySubRequest dailySubRequest) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\BotController.cs:line 281
2024-05-05 19:03:12.823 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-05 19:03:12.825 +03:00 [INF] Executed action TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi) in 300151.4958ms
2024-05-05 19:03:12.826 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:03:12.827 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35 - 400 - text/plain;+charset=utf-8 300250.2817ms
2024-05-05 19:15:54.908 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:15:55.111 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:15:55.152 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:15:55.154 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:15:55.155 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:15:55.156 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:15:55.158 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:15:55.159 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:15:55.161 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:15:55.201 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:15:55.272 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:15:55.273 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:15:55.328 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:15:55.3264183+03:00"
2024-05-05 19:15:55.328 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:15:55.3218897+03:00"
2024-05-05 19:15:56.649 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:15:56.649 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:15:56.677 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:15:56.863 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:15:56.921 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:15:56.9214921+03:00"
2024-05-05 19:15:59.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:15:59.763 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.809 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.832 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.840 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.842 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.849 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.863 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:15:59.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:15:59.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:16:00.674 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:16:00.778 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:16:00.779 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:16:00.781 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:16:00.782 +03:00 [INF] Hosting environment: Development
2024-05-05 19:16:00.783 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:16:01.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:16:01.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:16:01.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.2458ms
2024-05-05 19:16:01.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 186.3221ms
2024-05-05 19:16:01.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:16:01.534 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.9178ms
2024-05-05 19:16:01.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:16:01.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.3353ms
2024-05-05 19:16:05.456 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:16:05.460 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:16:05.487 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:16:05.582 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:16:05.610 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:16:05.695 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:16:05.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:16:05.721 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:16:17.603 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:16:17.609 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:17.613 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:17.616 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:16:17.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:17.633 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:16:17.639 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 17.4374ms
2024-05-05 19:16:17.641 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:17.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 47.7917ms
2024-05-05 19:16:20.922 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:16:20.923 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:20.925 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.5760ms
2024-05-05 19:16:20.925 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 59
2024-05-05 19:16:20.926 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:20.980 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:20.983 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:21.007 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:21.008 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:21.011 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:21.029 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:21.039 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:21.040 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 27.7137ms
2024-05-05 19:16:21.041 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:21.043 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 36.0144ms
2024-05-05 19:16:21.228 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 19:16:21.236 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:21.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:21.280 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:16:21.295 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:16:21.299 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:21.300 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 314.6925ms
2024-05-05 19:16:21.301 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:21.302 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 59 - 200 0 - 376.4430ms
2024-05-05 19:16:30.974 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:16:30.975 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:30.976 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:30.977 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:16:30.981 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:30.986 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:16:30.987 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.2731ms
2024-05-05 19:16:30.990 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:30.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 17.5891ms
2024-05-05 19:16:35.259 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:16:35.259 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:35.261 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.4367ms
2024-05-05 19:16:35.262 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 19:16:35.263 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:35.266 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:35.267 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:35.275 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:35.276 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:35.284 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:35.285 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:35.285 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:35.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:16:35.291 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:35.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:16:35.296 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:35.300 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:35.300 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.5439ms
2024-05-05 19:16:35.301 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 32.2517ms
2024-05-05 19:16:35.302 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:35.303 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:16:35.304 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.8684ms
2024-05-05 19:16:35.304 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 42.3811ms
2024-05-05 19:16:37.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:16:37.246 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:37.246 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:37.247 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:16:37.250 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:16:37.253 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:16:37.254 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.8423ms
2024-05-05 19:16:37.255 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:16:37.256 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 11.6102ms
2024-05-05 19:16:39.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - -
2024-05-05 19:16:39.215 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:39.216 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.224 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:39.313 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:39.328 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 101.9283ms
2024-05-05 19:16:39.329 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - - - 200 2 application/json;+charset=utf-8 115.8645ms
2024-05-05 19:16:39.807 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - -
2024-05-05 19:16:39.808 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:39.811 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.813 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:39.823 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:39.825 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 10.0586ms
2024-05-05 19:16:39.827 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - - - 200 2 application/json;+charset=utf-8 21.3068ms
2024-05-05 19:16:39.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - -
2024-05-05 19:16:39.962 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:39.963 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.964 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:39.972 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:39.973 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.9614ms
2024-05-05 19:16:39.975 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:39.976 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - - - 200 2 application/json;+charset=utf-8 15.3598ms
2024-05-05 19:16:40.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - -
2024-05-05 19:16:40.126 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:40.126 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.128 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:40.133 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:40.134 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 3.8809ms
2024-05-05 19:16:40.137 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - - - 200 2 application/json;+charset=utf-8 13.5991ms
2024-05-05 19:16:40.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - -
2024-05-05 19:16:40.255 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:40.256 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.257 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:40.264 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:40.266 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.5266ms
2024-05-05 19:16:40.267 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:40.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - - - 200 2 application/json;+charset=utf-8 14.5375ms
2024-05-05 19:16:42.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:16:42.496 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:42.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.498 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:42.567 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:42.583 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:42.591 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.610 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.613 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.615 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.626 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.638 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.644 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.646 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.649 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.654 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.661 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.664 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:42.682 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 181.2552ms
2024-05-05 19:16:42.683 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.684 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 189.8142ms
2024-05-05 19:16:42.761 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%3D - -
2024-05-05 19:16:42.763 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:42.765 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.766 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:42.771 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:42.773 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.2771ms
2024-05-05 19:16:42.775 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.776 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%3D - - - 200 2 application/json;+charset=utf-8 14.5033ms
2024-05-05 19:16:42.793 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:16:42.794 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:42.794 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.795 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:42.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:42.804 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:42.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.809 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.816 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.832 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.848 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:42.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:42.857 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:42.860 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 63.1876ms
2024-05-05 19:16:42.861 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:42.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 68.3612ms
2024-05-05 19:16:43.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - -
2024-05-05 19:16:43.379 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.381 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.382 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.390 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:43.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:43.400 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.405 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.407 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.9808ms
2024-05-05 19:16:43.410 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.411 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8 - - - 200 15491 application/json;+charset=utf-8 33.3390ms
2024-05-05 19:16:43.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - -
2024-05-05 19:16:43.496 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.498 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.506 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.508 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.7161ms
2024-05-05 19:16:43.509 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3 - - - 200 2 application/json;+charset=utf-8 16.1101ms
2024-05-05 19:16:43.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - -
2024-05-05 19:16:43.643 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.644 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.644 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:43.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:43.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.661 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.666 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.668 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 21.9409ms
2024-05-05 19:16:43.669 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80 - - - 200 10010 application/json;+charset=utf-8 27.9890ms
2024-05-05 19:16:43.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - -
2024-05-05 19:16:43.730 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:43.731 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.732 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:43.739 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:43.742 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:43.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:43.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:43.755 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:43.756 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 22.7161ms
2024-05-05 19:16:43.757 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:43.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B8%D0%B3%D1%80%D1%8B - - - 200 10010 application/json;+charset=utf-8 29.2844ms
2024-05-05 19:16:45.369 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:16:45.370 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:45.371 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:45.372 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:16:45.378 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:16:45.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:16:45.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.401 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.407 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.409 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.415 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.419 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.420 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.422 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.424 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:16:45.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:45.430 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:45.433 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 59.2881ms
2024-05-05 19:16:45.434 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:16:45.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 69.8817ms
2024-05-05 19:16:47.595 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 19:16:47.596 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:47.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.3761ms
2024-05-05 19:16:47.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 19:16:47.600 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:47.609 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:16:47.614 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:47.621 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:47.623 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:47.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:47.625 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:47.632 +03:00 [INF] initializing user data update
2024-05-05 19:16:47.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:47.640 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:47.641 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.987ms
2024-05-05 19:16:47.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:16:47.642 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:47.644 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.9657ms
2024-05-05 19:16:47.667 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 19:16:47.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:16:47.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:16:47.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:16:47.686 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:16:47.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:16:47.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.725 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:16:47.758 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.784 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:16:47.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:16:47.910 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:16:47.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:16:47.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:16:47.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:16:47.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:16:47.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.989 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:16:47.995 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:16:47.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:16:48.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:16:48.006 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:16:48.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:16:48.013 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 19:16:48.021 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 404.598ms
2024-05-05 19:16:48.023 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:16:48.024 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32945 application/json;+charset=utf-8 425.7189ms
2024-05-05 19:16:48.045 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:16:48.046 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:48.047 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.9732ms
2024-05-05 19:16:48.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:16:48.049 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:16:48.050 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:16:48.053 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 19:16:48.063 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:16:48.064 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:48.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:16:48.067 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:16:48.076 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:16:48.079 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:16:48.080 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.685ms
2024-05-05 19:16:48.081 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:16:48.082 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 18.4080ms
2024-05-05 19:16:48.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 19:16:48.089 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:16:48.092 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 36.5937ms
2024-05-05 19:16:48.093 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:16:48.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 45.2088ms
2024-05-05 19:19:11.902 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:19:12.096 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:19:12.132 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:19:12.132 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:19:12.133 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:19:12.134 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:19:12.135 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:19:12.135 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:19:12.136 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:19:12.176 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:19:12.266 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:19:12.267 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:19:12.301 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:19:12.3004751+03:00"
2024-05-05 19:19:12.301 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:19:12.2950652+03:00"
2024-05-05 19:19:13.678 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:19:13.678 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:19:13.709 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:19:13.864 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
2024-05-05 19:19:13.899 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:19:13.8990926+03:00"
2024-05-05 19:19:16.574 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:19:16.622 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.667 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.670 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.675 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.680 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.682 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.684 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.687 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.696 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.701 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:19:16.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:16.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:19:17.557 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:19:17.659 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:19:17.660 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:19:17.662 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:19:17.662 +03:00 [INF] Hosting environment: Development
2024-05-05 19:19:17.664 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:19:17.945 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:19:18.137 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 194.1188ms
2024-05-05 19:19:18.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:19:18.148 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:19:18.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 15.4986ms
2024-05-05 19:19:18.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.4818ms
2024-05-05 19:19:18.241 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:19:18.482 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.6651ms
2024-05-05 19:31:34.249 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:31:34.472 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:31:34.507 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:31:34.508 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:31:34.509 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:31:34.510 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:31:34.511 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:31:34.512 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:31:34.513 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:31:34.554 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:31:34.643 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:31:34.643 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:31:34.674 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:31:34.6686911+03:00"
2024-05-05 19:31:34.674 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:31:34.6728330+03:00"
2024-05-05 19:31:35.980 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:31:35.980 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:31:36.011 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:31:36.168 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:31:36.202 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:31:36.2024153+03:00"
2024-05-05 19:31:38.889 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:31:38.939 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.977 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.984 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:38.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.992 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.994 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:38.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:39.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:31:39.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:39.005 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:39.007 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:31:39.840 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:31:39.933 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:31:39.934 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:31:39.936 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:31:39.936 +03:00 [INF] Hosting environment: Development
2024-05-05 19:31:39.937 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:31:40.228 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:31:40.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:31:40.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 168.8240ms
2024-05-05 19:31:40.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 10.1209ms
2024-05-05 19:31:40.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:31:40.421 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.5131ms
2024-05-05 19:31:40.487 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:31:40.601 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.0936ms
2024-05-05 19:31:44.791 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:31:44.795 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:31:44.830 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:31:44.918 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:31:44.952 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:31:45.080 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:31:45.099 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:31:45.116 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:31:52.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:31:52.625 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:31:52.629 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:31:52.631 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:31:52.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:31:52.647 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:31:52.653 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.6791ms
2024-05-05 19:31:52.655 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:31:52.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 43.9448ms
2024-05-05 19:31:57.571 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:31:57.573 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:31:57.575 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.3454ms
2024-05-05 19:31:57.576 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 19:31:57.576 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:31:57.628 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:31:57.631 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:31:57.659 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:31:57.661 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:31:57.668 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:31:57.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:31:57.698 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:31:57.699 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 28.9881ms
2024-05-05 19:31:57.701 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:31:57.704 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 44.9968ms
2024-05-05 19:31:57.907 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 19:31:57.921 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:31:57.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:31:57.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:31:57.986 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:31:57.994 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:31:57.995 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 362.3433ms
2024-05-05 19:31:57.997 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:31:57.998 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 422.7613ms
2024-05-05 19:32:02.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:32:02.493 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:02.494 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:32:02.495 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:32:02.497 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:32:02.500 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:32:02.502 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.0372ms
2024-05-05 19:32:02.503 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:32:02.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 12.7575ms
2024-05-05 19:32:03.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - -
2024-05-05 19:32:03.495 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:03.500 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.510 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:03.596 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:03.610 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 96.9937ms
2024-05-05 19:32:03.611 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.612 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - - - 200 2 application/json;+charset=utf-8 118.5919ms
2024-05-05 19:32:03.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:32:03.728 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:03.730 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.731 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:03.795 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:32:03.810 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:32:03.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.839 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.850 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.855 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.860 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:03.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:03.880 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:03.897 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 163.0607ms
2024-05-05 19:32:03.898 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.899 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 171.4273ms
2024-05-05 19:32:03.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - -
2024-05-05 19:32:03.972 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:03.973 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.974 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:03.979 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:03.981 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.4295ms
2024-05-05 19:32:03.983 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:03.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96 - - - 200 2 application/json;+charset=utf-8 12.9114ms
2024-05-05 19:32:04.320 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E - -
2024-05-05 19:32:04.321 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:04.322 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.323 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:04.330 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:04.331 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.0287ms
2024-05-05 19:32:04.335 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E - - - 200 2 application/json;+charset=utf-8 16.5748ms
2024-05-05 19:32:04.573 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F - -
2024-05-05 19:32:04.575 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:04.576 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.577 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:04.584 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:04.586 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 6.4976ms
2024-05-05 19:32:04.590 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F - - - 200 2 application/json;+charset=utf-8 19.3425ms
2024-05-05 19:32:04.771 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F%D0%90 - -
2024-05-05 19:32:04.772 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:04.773 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.774 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:04.781 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:04.782 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.4262ms
2024-05-05 19:32:04.785 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:04.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%96%D0%9E%D0%9F%D0%90 - - - 200 2 application/json;+charset=utf-8 17.5538ms
2024-05-05 19:32:06.530 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 19:32:06.532 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:32:06.533 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:06.534 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:32:06.541 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 19:32:06.545 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 19:32:06.548 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.553 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.555 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.558 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.560 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.572 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.578 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.580 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 19:32:06.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:32:06.591 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:32:06.594 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 57.8879ms
2024-05-05 19:32:06.595 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 19:32:06.596 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 65.9731ms
2024-05-05 19:32:51.492 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:32:51.732 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:32:51.770 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:32:51.771 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:32:51.772 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:32:51.773 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:32:51.773 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:32:51.774 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:32:51.775 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:32:51.820 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:32:51.891 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:32:51.892 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:32:51.925 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:32:51.9193137+03:00"
2024-05-05 19:32:51.925 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:32:51.9234843+03:00"
2024-05-05 19:32:53.234 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:32:53.234 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:32:53.265 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:32:53.432 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:32:53.471 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:32:53.4710649+03:00"
2024-05-05 19:32:55.908 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:32:55.956 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.963 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.969 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:55.990 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:55.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:55.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.009 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.014 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.038 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.043 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.049 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:32:56.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.056 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:32:56.874 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:32:56.974 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:32:56.975 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:32:56.978 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:32:56.979 +03:00 [INF] Hosting environment: Development
2024-05-05 19:32:56.980 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:32:57.211 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:32:57.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 175.0604ms
2024-05-05 19:32:57.391 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:32:57.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.1051ms
2024-05-05 19:32:57.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:32:57.413 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.0239ms
2024-05-05 19:32:57.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:32:57.570 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 121.6662ms
2024-05-05 19:33:01.853 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 19:33:01.863 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:01.866 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 13.0833ms
2024-05-05 19:33:01.867 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 19:33:01.868 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:02.046 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:33:02.049 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:33:02.053 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:33:02.079 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:02.084 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:33:02.088 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:33:02.106 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:33:02.106 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:33:02.110 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:02.118 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:02.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:33:02.188 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:02.196 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 63.492ms
2024-05-05 19:33:02.200 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:02.217 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 110.8100ms
2024-05-05 19:33:02.244 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:33:02.265 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:33:02.284 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: d2d2fda4340d5965975e73c7034b205f59ad20fe6d3b35c10fd35dd079229fce
2024-05-05 19:33:02.444 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 19:33:02.456 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:33:02.535 +03:00 [INF] initializing user data update
2024-05-05 19:33:02.560 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 19:33:02.564 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:33:02.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:33:02.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:33:02.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:33:02.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 19:33:02.630 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 19:33:02.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:02.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:02.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:02.724 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:33:02.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:02.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:02.923 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:33:02.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:33:03.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:33:03.084 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:33:03.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:33:03.119 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:03.123 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:03.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 19:33:03.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 19:33:03.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:03.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 19:33:03.146 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 19:33:03.153 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 19:33:03.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 19:33:03.161 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 19:33:03.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:33:03.180 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 19:33:03.238 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1156.2835ms
2024-05-05 19:33:03.240 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 19:33:03.241 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32944 application/json;+charset=utf-8 1373.7930ms
2024-05-05 19:33:03.261 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:33:03.262 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:03.264 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.4306ms
2024-05-05 19:33:03.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 19:33:03.269 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:03.270 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:33:03.275 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 19:33:03.287 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:33:03.290 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:33:03.290 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:03.297 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:03.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:33:03.306 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:03.306 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.2294ms
2024-05-05 19:33:03.308 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:03.309 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.6594ms
2024-05-05 19:33:03.313 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 19:33:03.317 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 19:33:03.323 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 46.2649ms
2024-05-05 19:33:03.324 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 19:33:03.325 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 60.4331ms
2024-05-05 19:33:04.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 19:33:04.839 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:04.840 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:33:04.844 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 19:33:04.851 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:33:04.855 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 19:33:04.856 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 9.8527ms
2024-05-05 19:33:04.858 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 19:33:04.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 21.0966ms
2024-05-05 19:33:09.834 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 19:33:09.836 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:09.839 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 4.2405ms
2024-05-05 19:33:09.840 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 19:33:09.841 +03:00 [INF] CORS policy execution successful.
2024-05-05 19:33:09.842 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:33:09.848 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 19:33:09.875 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 19:33:09.877 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:09.879 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 19:33:09.879 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 19:33:09.888 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 19:33:09.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 19:33:09.903 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:09.910 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 25.6795ms
2024-05-05 19:33:09.912 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 19:33:09.915 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 39.9111ms
2024-05-05 19:33:09.916 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 19:33:09.929 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 19:33:09.935 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 19:33:09.937 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 87.6204ms
2024-05-05 19:33:09.939 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 19:33:09.941 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 100.5652ms
2024-05-05 19:36:02.969 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 19:36:03.172 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 19:36:03.208 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 19:36:03.209 +03:00 [INF] Quartz Scheduler created
2024-05-05 19:36:03.210 +03:00 [INF] RAMJobStore initialized.
2024-05-05 19:36:03.211 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 19:36:03.212 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 19:36:03.213 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 19:36:03.214 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:36:03.253 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:36:03.326 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 19:36:03.327 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 19:36:03.365 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T19:36:03.3649414+03:00"
2024-05-05 19:36:03.365 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T19:36:03.3597219+03:00"
2024-05-05 19:36:04.671 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 19:36:04.671 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 19:36:04.701 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 19:36:04.865 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 19:36:04.902 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T19:36:04.9021795+03:00"
2024-05-05 19:36:08.043 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 19:36:08.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.137 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.160 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.190 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.201 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.223 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.236 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.239 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 19:36:08.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.261 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 19:36:08.985 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 19:36:09.077 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 19:36:09.078 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 19:36:09.080 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 19:36:09.081 +03:00 [INF] Hosting environment: Development
2024-05-05 19:36:09.081 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 19:36:09.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 19:36:09.620 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 174.7686ms
2024-05-05 19:36:09.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 19:36:09.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 7.5564ms
2024-05-05 19:36:09.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 19:36:09.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.9141ms
2024-05-05 19:36:09.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 19:36:09.833 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.9281ms
2024-05-05 19:36:13.441 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:36:13.445 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 19:36:13.466 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 19:36:13.532 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:36:13.555 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 19:36:13.632 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 19:36:13.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 19:36:13.656 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:37:53.499 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 19:41:13.680 +03:00 [WRN] New task timed out. Hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 19:41:13.682 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 19:41:13.705 +03:00 [ERR] An unexpected error occurred while processing the channels.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.BotController.CallSubscribersByChannels(DailySubRequest dailySubRequest) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\BotController.cs:line 281
2024-05-05 19:41:13.715 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-05 19:41:13.721 +03:00 [INF] Executed action TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi) in 300159.7713ms
2024-05-05 19:41:13.725 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 19:41:13.736 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35 - 400 - text/plain;+charset=utf-8 300269.9671ms
2024-05-05 20:16:11.552 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:16:11.778 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:16:11.816 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:16:11.817 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:16:11.819 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:16:11.819 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:16:11.820 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:16:11.821 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:16:11.822 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:16:11.862 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:16:11.935 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:16:11.936 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:16:11.976 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:16:11.9743370+03:00"
2024-05-05 20:16:11.976 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:16:11.9700947+03:00"
2024-05-05 20:16:13.349 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:16:13.350 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:16:13.387 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:16:13.539 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 20:16:13.579 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:16:13.5791484+03:00"
2024-05-05 20:16:16.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:16:16.182 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.189 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.191 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.219 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.224 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.226 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.235 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.239 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.252 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.262 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:16:16.266 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.268 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:16.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:17.083 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:16:17.180 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:16:17.181 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:16:17.184 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:16:17.185 +03:00 [INF] Hosting environment: Development
2024-05-05 20:16:17.185 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:16:17.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:16:17.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 189.0156ms
2024-05-05 20:16:17.848 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:16:17.848 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:16:17.855 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 7.0394ms
2024-05-05 20:16:17.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.9558ms
2024-05-05 20:16:17.895 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:16:18.013 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.9719ms
2024-05-05 20:16:22.112 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:16:22.116 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:16:22.146 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:16:22.243 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:16:22.278 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:16:22.409 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:16:22.429 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:16:22.446 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:16:55.330 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 20:16:55.335 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.338 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 7.9122ms
2024-05-05 20:16:55.340 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 20:16:55.341 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.343 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 20:16:55.360 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 20:16:55.361 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 21.5520ms
2024-05-05 20:16:55.551 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:16:55.553 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.554 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.7911ms
2024-05-05 20:16:55.555 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:16:55.557 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.624 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:16:55.627 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:16:55.645 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:16:55.646 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:55.648 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:16:55.654 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=1LW2Rh0rCMPZLlYX_sZPPg - -
2024-05-05 20:16:55.656 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.657 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 20:16:55.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:16:55.684 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:16:55.692 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 35.2526ms
2024-05-05 20:16:55.695 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:55.708 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 62.7142ms
2024-05-05 20:16:55.748 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:16:55.749 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.750 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 1.8446ms
2024-05-05 20:16:55.751 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:16:55.753 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:55.757 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:16:55.777 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 20:16:55.808 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:16:55.810 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:55.813 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:16:55.824 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 20:16:55.825 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:16:55.834 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:16:55.835 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 13.2006ms
2024-05-05 20:16:55.837 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:55.838 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 30.1927ms
2024-05-05 20:16:55.891 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:16:55.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 20:16:55.900 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:16:55.918 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:16:55.924 +03:00 [INF] initializing user data update
2024-05-05 20:16:55.937 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:16:55.937 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 145.5273ms
2024-05-05 20:16:55.939 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:16:55.939 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:16:55.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 188.9706ms
2024-05-05 20:16:55.976 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:16:55.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:16:55.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:16:55.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:16:55.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:16:56.003 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:16:56.080 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:16:56.154 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:16:56.194 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:16:56.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:16:56.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:56.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:16:56.251 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:16:56.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:16:56.261 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:16:56.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:16:56.267 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:56.273 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:16:56.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:16:56.293 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:56.294 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:16:56.295 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:16:56.297 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 668.4106ms
2024-05-05 20:16:56.299 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:16:56.301 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:16:56.307 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32944 application/json;+charset=utf-8 751.3736ms
2024-05-05 20:16:56.307 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:16:56.312 +03:00 [INF] initializing user data update
2024-05-05 20:16:56.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:16:56.313 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:56.314 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:16:56.317 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:16:56.321 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:16:56.322 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:16:56.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:16:56.331 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:16:56.338 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:16:56.340 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:16:56.342 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:16:56.342 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 15.4538ms
2024-05-05 20:16:56.345 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:16:56.345 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:56.348 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.348 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 40.5257ms
2024-05-05 20:16:56.353 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.355 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.358 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:16:56.385 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:16:56.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:16:56.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:16:56.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:16:56.402 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:56.405 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:16:56.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.405 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:56.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.408 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.1651ms
2024-05-05 20:16:56.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:16:56.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:16:56.412 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:56.415 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:16:56.415 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:16:56.417 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.420 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:16:56.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:16:56.427 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:16:56.429 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:56.430 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:16:56.431 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:16:56.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:16:56.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:16:56.443 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:16:56.444 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:16:56.446 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:16:56.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:16:56.447 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.0559ms
2024-05-05 20:16:56.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:16:56.453 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:16:56.453 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:16:56.455 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:16:56.456 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 29.2698ms
2024-05-05 20:16:56.457 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 34.8583ms
2024-05-05 20:16:56.460 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:16:56.461 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:16:56.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 54.4899ms
2024-05-05 20:16:56.464 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 167.5186ms
2024-05-05 20:16:56.465 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:16:56.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32944 application/json;+charset=utf-8 174.4952ms
2024-05-05 20:16:59.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:16:59.258 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:16:59.259 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:16:59.262 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:16:59.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:16:59.273 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:16:59.275 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.1024ms
2024-05-05 20:16:59.276 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:16:59.276 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 19.8660ms
2024-05-05 20:17:03.260 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:17:03.261 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:03.263 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.1209ms
2024-05-05 20:17:03.265 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 54
2024-05-05 20:17:03.268 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:03.269 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:17:03.274 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:03.288 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:17:03.289 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:03.291 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:17:03.292 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:17:03.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:17:03.305 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:17:03.310 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:03.311 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:17:03.311 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.0091ms
2024-05-05 20:17:03.316 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:03.320 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.0814ms
2024-05-05 20:17:03.321 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:17:03.326 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:03.326 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 50.6149ms
2024-05-05 20:17:03.328 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:17:03.330 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 54 - 200 0 - 65.7944ms
2024-05-05 20:17:19.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:17:19.496 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:19.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:17:19.497 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:17:19.501 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:17:19.503 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:17:19.504 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.4614ms
2024-05-05 20:17:19.505 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:17:19.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 11.7623ms
2024-05-05 20:17:23.526 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:17:23.527 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:23.528 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.2542ms
2024-05-05 20:17:23.530 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52
2024-05-05 20:17:23.531 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:23.534 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:17:23.535 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:23.543 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:17:23.547 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:17:23.552 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:23.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:17:23.555 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:17:23.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:17:23.561 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:17:23.564 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:17:23.565 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:23.567 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:23.567 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 8.0233ms
2024-05-05 20:17:23.568 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 30.4759ms
2024-05-05 20:17:23.570 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:23.572 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:17:23.573 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 25.7789ms
2024-05-05 20:17:23.573 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 52 - 200 0 - 43.7068ms
2024-05-05 20:17:25.948 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:17:25.950 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:17:26.002 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:17:26.336 +03:00 [WRN] Cached task timed out.
2024-05-05 20:17:26.337 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:17:26.358 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:17:35.271 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:17:35.272 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:35.273 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:17:35.274 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:17:35.277 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:17:35.281 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:17:35.282 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.3741ms
2024-05-05 20:17:35.283 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:17:35.286 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 14.5815ms
2024-05-05 20:17:39.141 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:17:39.142 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:39.143 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.1004ms
2024-05-05 20:17:39.145 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 20:17:39.155 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:39.158 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:17:39.159 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:39.165 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:17:39.167 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:17:39.172 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:39.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:17:39.173 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:17:39.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:17:39.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:17:39.185 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:17:39.186 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:39.190 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:39.191 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.0936ms
2024-05-05 20:17:39.191 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 30.9063ms
2024-05-05 20:17:39.193 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:39.194 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:17:39.195 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 28.2156ms
2024-05-05 20:17:39.196 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 51.0293ms
2024-05-05 20:17:45.461 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:17:45.462 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:45.463 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:45.467 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:45.623 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:17:45.639 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:17:45.648 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.652 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.655 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.662 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.666 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.673 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.676 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.683 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.686 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.701 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.711 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:45.715 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 245.3842ms
2024-05-05 20:17:45.716 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:45.720 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 258.9660ms
2024-05-05 20:17:45.749 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:17:45.751 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:45.752 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:45.753 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:45.760 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:17:45.763 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:17:45.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.771 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.783 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.787 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.789 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.792 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.793 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.797 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.799 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.802 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.804 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.806 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.808 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.816 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:45.818 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 63.3427ms
2024-05-05 20:17:45.820 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:45.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 71.8118ms
2024-05-05 20:17:45.848 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:17:45.848 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:45.849 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:45.850 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:45.856 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:17:45.859 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:17:45.861 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.873 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.877 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.882 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.884 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.890 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.896 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.898 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:17:45.903 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:45.904 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:45.907 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 55.0127ms
2024-05-05 20:17:45.908 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:45.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 60.9833ms
2024-05-05 20:17:45.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:17:45.937 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:45.938 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:17:45.938 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:17:45.941 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:17:45.943 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:17:45.944 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 4.2374ms
2024-05-05 20:17:45.945 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:17:45.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 9.0182ms
2024-05-05 20:17:46.801 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - -
2024-05-05 20:17:46.803 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:46.804 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:46.805 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:46.848 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:46.850 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 42.5779ms
2024-05-05 20:17:46.851 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:46.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - - - 200 2 application/json;+charset=utf-8 51.1995ms
2024-05-05 20:17:47.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - -
2024-05-05 20:17:47.372 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:47.373 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.374 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:47.379 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:47.381 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.28ms
2024-05-05 20:17:47.383 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - - - 200 2 application/json;+charset=utf-8 12.3320ms
2024-05-05 20:17:47.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - -
2024-05-05 20:17:47.516 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:47.520 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.522 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:47.529 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:47.532 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 8.2015ms
2024-05-05 20:17:47.533 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.535 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - - - 200 2 application/json;+charset=utf-8 19.8984ms
2024-05-05 20:17:47.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - -
2024-05-05 20:17:47.674 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:47.675 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.676 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:47.685 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:47.688 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 8.3087ms
2024-05-05 20:17:47.689 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.690 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - - - 200 2 application/json;+charset=utf-8 17.5558ms
2024-05-05 20:17:47.807 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - -
2024-05-05 20:17:47.809 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:47.809 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.810 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:17:47.817 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:47.822 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 9.1843ms
2024-05-05 20:17:47.823 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:17:47.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - - - 200 2 application/json;+charset=utf-8 17.1616ms
2024-05-05 20:17:49.293 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:17:49.294 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:49.295 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 1.7279ms
2024-05-05 20:17:49.296 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:17:49.297 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:49.298 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:17:49.299 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:17:49.306 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:17:49.309 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:17:49.314 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:49.314 +03:00 [INF] initializing user data update
2024-05-05 20:17:49.315 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:17:49.315 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:17:49.317 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:17:49.321 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:17:49.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:17:49.328 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:17:49.329 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:49.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:17:49.331 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 8.4909ms
2024-05-05 20:17:49.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:17:49.334 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:49.338 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 28.8486ms
2024-05-05 20:17:49.338 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:17:49.341 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:49.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:49.345 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:49.347 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:17:49.374 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:17:49.377 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:17:49.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:17:49.386 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:17:49.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:17:49.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:17:49.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:17:49.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:49.402 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:49.404 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:17:49.406 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:17:49.409 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:17:49.411 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:17:49.414 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:17:49.419 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:17:49.422 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:17:49.424 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:17:49.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:17:49.428 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:17:49.431 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 130.2688ms
2024-05-05 20:17:49.433 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:17:49.434 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 138.1943ms
2024-05-05 20:17:49.455 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:17:49.456 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:49.457 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.6031ms
2024-05-05 20:17:49.458 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:17:49.458 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:17:49.461 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:17:49.463 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:17:49.470 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:17:49.471 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:17:49.482 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:49.483 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:17:49.484 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:17:49.489 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:17:49.493 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:17:49.496 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:17:49.498 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 32.9619ms
2024-05-05 20:17:49.499 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 12.2591ms
2024-05-05 20:17:49.500 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:17:49.501 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:17:49.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 44.6465ms
2024-05-05 20:17:49.503 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 31.9303ms
2024-05-05 20:18:02.156 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 20:35:31.878 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:35:32.100 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:35:32.153 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:35:32.154 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:35:32.155 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:35:32.156 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:35:32.156 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:35:32.157 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:35:32.158 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:35:32.208 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:35:32.292 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:35:32.293 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:35:32.328 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:35:32.3270359+03:00"
2024-05-05 20:35:32.328 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:35:32.3227194+03:00"
2024-05-05 20:35:33.685 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:35:33.685 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:35:33.713 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:35:33.877 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
2024-05-05 20:35:33.914 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:35:33.9139968+03:00"
2024-05-05 20:35:36.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:35:36.511 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.538 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.543 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.545 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.547 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.557 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.566 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.571 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.572 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.580 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:35:36.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.586 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:36.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:37.419 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:35:37.522 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:35:37.523 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:35:37.525 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:35:37.526 +03:00 [INF] Hosting environment: Development
2024-05-05 20:35:37.527 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:35:37.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:35:38.038 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 104.7281ms
2024-05-05 20:35:38.047 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:35:38.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 3.3156ms
2024-05-05 20:35:38.106 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:35:38.216 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.1426ms
2024-05-05 20:35:42.401 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:35:42.404 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:35:42.424 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:35:42.505 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:35:42.534 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:35:42.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:35:42.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:35:42.699 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:35:48.533 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:35:48.537 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:48.542 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:35:48.546 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:35:48.552 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:35:48.561 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:35:48.567 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 16.8219ms
2024-05-05 20:35:48.569 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:35:48.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 48.1959ms
2024-05-05 20:35:54.556 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 20:35:54.557 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.558 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 2.2852ms
2024-05-05 20:35:54.560 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 20:35:54.561 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.565 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 20:35:54.586 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 20:35:54.587 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 27.2020ms
2024-05-05 20:35:54.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:35:54.783 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.784 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.1292ms
2024-05-05 20:35:54.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:35:54.786 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.846 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:35:54.849 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:35:54.867 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:35:54.868 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:54.872 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=-dBOrjZMsBFw_94aQ6df-w - -
2024-05-05 20:35:54.872 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:35:54.872 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.876 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 20:35:54.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:35:54.905 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:35:54.907 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 31.7473ms
2024-05-05 20:35:54.908 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:54.909 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 42.5637ms
2024-05-05 20:35:54.961 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:35:54.962 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.963 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 1.7837ms
2024-05-05 20:35:54.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:35:54.965 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:54.966 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:35:54.969 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 20:35:54.978 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:35:54.982 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:54.985 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:35:55.001 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:35:55.012 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:35:55.015 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 19.9903ms
2024-05-05 20:35:55.021 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:55.023 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 45.8151ms
2024-05-05 20:35:55.036 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 20:35:55.098 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:35:55.100 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 20:35:55.108 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:35:55.124 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:35:55.135 +03:00 [INF] initializing user data update
2024-05-05 20:35:55.143 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 172.2425ms
2024-05-05 20:35:55.145 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:35:55.146 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 182.2504ms
2024-05-05 20:35:55.148 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:35:55.150 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:35:55.182 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:35:55.188 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:35:55.191 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:35:55.194 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:35:55.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:35:55.211 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.252 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:35:55.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.296 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:35:55.359 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:35:55.393 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:35:55.420 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:35:55.432 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:55.442 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.444 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.446 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.448 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:35:55.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.457 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:35:55.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:35:55.462 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:35:55.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:35:55.467 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:55.471 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:35:55.486 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:35:55.487 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:55.488 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:35:55.489 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:35:55.498 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:35:55.499 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:35:55.500 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 650.0044ms
2024-05-05 20:35:55.504 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:55.504 +03:00 [INF] initializing user data update
2024-05-05 20:35:55.505 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:35:55.505 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:35:55.505 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:35:55.506 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:35:55.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 721.3964ms
2024-05-05 20:35:55.512 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:35:55.512 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:35:55.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:35:55.518 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:35:55.521 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:35:55.521 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.7132ms
2024-05-05 20:35:55.524 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:35:55.525 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:55.527 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:35:55.528 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 28.3620ms
2024-05-05 20:35:55.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:35:55.535 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.538 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.543 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:35:55.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.573 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:35:55.579 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:35:55.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:35:55.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:35:55.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:55.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.591 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.595 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:35:55.597 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:35:55.598 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:55.598 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:35:55.599 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 2.1926ms
2024-05-05 20:35:55.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:35:55.601 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.602 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:35:55.605 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:35:55.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:35:55.607 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:35:55.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:35:55.616 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:35:55.617 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:35:55.619 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:35:55.620 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:35:55.620 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:55.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:35:55.628 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:35:55.630 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:35:55.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:35:55.636 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:35:55.635 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:35:55.637 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:35:55.641 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:35:55.642 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.2377ms
2024-05-05 20:35:55.643 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 151.6958ms
2024-05-05 20:35:55.644 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:35:55.645 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:35:55.645 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 34.9172ms
2024-05-05 20:35:55.646 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 28.9048ms
2024-05-05 20:35:55.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 160.8935ms
2024-05-05 20:35:55.648 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:35:55.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 50.3848ms
2024-05-05 20:36:13.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:36:13.809 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:13.810 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:36:13.814 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:36:13.928 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:36:13.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:36:13.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.957 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.959 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.962 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.980 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.984 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.987 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:13.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:13.999 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:36:14.002 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 185.9985ms
2024-05-05 20:36:14.003 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:36:14.005 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 196.8112ms
2024-05-05 20:36:14.032 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:36:14.033 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:14.036 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:36:14.037 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:36:14.043 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:36:14.046 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:36:14.049 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.057 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.063 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.071 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.075 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.087 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.090 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.091 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:36:14.094 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 55.6578ms
2024-05-05 20:36:14.095 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:36:14.096 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 63.4476ms
2024-05-05 20:36:14.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:36:14.123 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:14.124 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:36:14.125 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:36:14.132 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:36:14.135 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:36:14.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.142 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.151 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.153 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.156 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.158 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.160 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.169 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.172 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.179 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.182 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:36:14.184 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:14.186 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:36:14.188 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 62.1377ms
2024-05-05 20:36:14.189 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:36:14.191 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 68.2498ms
2024-05-05 20:36:14.218 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:36:14.219 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:14.220 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:36:14.220 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:36:14.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:36:14.227 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:36:14.228 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.1029ms
2024-05-05 20:36:14.230 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:36:14.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 11.9148ms
2024-05-05 20:36:24.796 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:36:24.797 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:24.798 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.1674ms
2024-05-05 20:36:24.803 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:36:24.804 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:24.808 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:36:24.810 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:36:24.818 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:36:24.819 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:36:24.824 +03:00 [INF] initializing user data update
2024-05-05 20:36:24.824 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:36:24.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:36:24.825 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:36:24.825 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:36:24.828 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:36:24.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:36:24.832 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:36:24.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:36:24.837 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:36:24.840 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.2297ms
2024-05-05 20:36:24.840 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:36:24.841 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:36:24.844 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:36:24.846 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 26.5301ms
2024-05-05 20:36:24.848 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:36:24.851 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:24.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:24.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:24.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:36:24.886 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:36:24.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:36:24.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:36:24.898 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:36:24.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:36:24.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:36:24.909 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:36:24.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:24.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:24.918 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:36:24.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:36:24.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:36:24.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:36:24.932 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:36:24.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:36:24.943 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:36:24.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:36:24.950 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:36:24.953 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:36:24.956 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 142.6466ms
2024-05-05 20:36:24.957 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:36:24.958 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 155.1845ms
2024-05-05 20:36:24.979 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:36:24.980 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:24.980 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.1208ms
2024-05-05 20:36:24.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:36:24.982 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:24.984 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:36:24.984 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:36:24.990 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:36:24.991 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:36:24.996 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:36:24.997 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:36:24.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:36:25.001 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:36:25.003 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:36:25.004 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:36:25.006 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 20.1467ms
2024-05-05 20:36:25.006 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.4034ms
2024-05-05 20:36:25.007 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:36:25.008 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:36:25.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 27.2014ms
2024-05-05 20:36:25.009 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 18.6221ms
2024-05-05 20:36:25.168 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:36:25.170 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:36:25.230 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:36:25.520 +03:00 [WRN] Cached task timed out.
2024-05-05 20:36:25.521 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:36:25.544 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:36:39.865 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:36:39.866 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:39.867 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:36:39.868 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:36:39.873 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:36:39.880 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:36:39.884 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 13.099ms
2024-05-05 20:36:39.885 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:36:39.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 22.0102ms
2024-05-05 20:36:46.054 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:36:46.054 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:46.056 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 1.9532ms
2024-05-05 20:36:46.057 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 20:36:46.059 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:36:46.060 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:36:46.062 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:36:46.085 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:36:46.087 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:36:46.090 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:36:46.091 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:36:46.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:36:46.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:36:46.099 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:36:46.099 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.3172ms
2024-05-05 20:36:46.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:36:46.101 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:36:46.104 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 17.4928ms
2024-05-05 20:36:46.108 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:36:46.112 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:36:46.113 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 47.4549ms
2024-05-05 20:36:46.114 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:36:46.114 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 57.6902ms
2024-05-05 20:36:54.855 +03:00 [WRN] Cached task timed out.
2024-05-05 20:36:54.856 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:36:54.877 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:37:22.440 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 20:37:31.673 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:37:31.889 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:37:31.986 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:37:32.024 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:37:32.025 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:37:32.026 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:37:32.027 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:37:32.028 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:37:32.029 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:37:32.030 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:37:32.072 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:37:32.147 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:37:32.148 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:37:32.184 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:37:32.1805613+03:00"
2024-05-05 20:37:32.185 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:37:32.1856875+03:00"
2024-05-05 20:37:33.497 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:37:33.497 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:37:33.526 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:37:33.604 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:37:33.6042837+03:00"
2024-05-05 20:37:36.584 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:37:36.640 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.648 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.655 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.677 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.688 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.747 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.750 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.753 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:37:36.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:36.765 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:37:37.630 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:37:37.631 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:37:37.633 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:37:37.634 +03:00 [INF] Hosting environment: Development
2024-05-05 20:37:37.634 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:37:38.066 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:37:38.267 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:37:38.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 205.3134ms
2024-05-05 20:37:38.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.4334ms
2024-05-05 20:37:38.280 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:37:38.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 35.6365ms
2024-05-05 20:37:38.344 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:37:38.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 207.1240ms
2024-05-05 20:37:42.310 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:37:42.314 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:37:42.343 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:37:42.446 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:37:42.485 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:37:42.624 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:37:42.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:37:42.661 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:37:42.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:37:42.991 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:37:42.997 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:37:43.002 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:37:43.011 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:37:43.024 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:37:43.033 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 23.3971ms
2024-05-05 20:37:43.036 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:37:43.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 77.2525ms
2024-05-05 20:37:50.519 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:37:50.521 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:37:50.523 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.4646ms
2024-05-05 20:37:50.524 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 54
2024-05-05 20:37:50.525 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:37:50.618 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:37:50.623 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:37:50.663 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:37:50.665 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:37:50.669 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:37:50.700 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:37:50.714 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:37:50.715 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 43.0905ms
2024-05-05 20:37:50.717 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:37:50.720 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 56.4050ms
2024-05-05 20:37:50.952 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:37:50.964 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:37:51.035 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:37:51.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:37:51.076 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:37:51.086 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:37:51.087 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 461.7303ms
2024-05-05 20:37:51.088 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:37:51.090 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 54 - 200 0 - 565.7807ms
2024-05-05 20:38:09.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:38:09.776 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:38:09.777 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:38:09.778 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:38:09.782 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:38:09.786 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:38:09.787 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.9281ms
2024-05-05 20:38:09.788 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:38:09.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 14.8277ms
2024-05-05 20:38:10.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%BC%D1%83%D1%80%D0%B0%D0%B2%D0%B5%D0%B9 - -
2024-05-05 20:38:10.870 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:38:10.873 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:38:10.879 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:38:10.971 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:38:10.986 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 103.8334ms
2024-05-05 20:38:10.988 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:38:10.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%BC%D1%83%D1%80%D0%B0%D0%B2%D0%B5%D0%B9 - - - 200 2 application/json;+charset=utf-8 120.9143ms
2024-05-05 20:38:12.844 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:38:12.844 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:38:12.845 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 1.3626ms
2024-05-05 20:38:12.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:38:12.847 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:38:12.847 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:38:12.850 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:38:12.859 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:38:12.861 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:38:12.862 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:38:12.863 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:38:12.868 +03:00 [INF] initializing user data update
2024-05-05 20:38:12.870 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:38:12.875 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:38:12.875 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.2492ms
2024-05-05 20:38:12.876 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:38:12.877 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 17.6319ms
2024-05-05 20:38:12.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:38:12.889 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:38:12.909 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:38:12.913 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:38:12.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:38:12.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:38:12.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:38:12.940 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:38:12.959 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:38:12.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:38:12.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:38:13.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:38:13.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:38:13.085 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:38:13.124 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:38:13.163 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:38:13.191 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:38:13.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:38:13.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:38:13.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:38:13.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:38:13.225 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:38:13.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:38:13.231 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:38:13.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:38:13.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:38:13.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:38:13.245 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:38:13.248 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:38:13.250 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:38:13.274 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 422.2783ms
2024-05-05 20:38:13.275 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:38:13.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32950 application/json;+charset=utf-8 429.4874ms
2024-05-05 20:38:13.296 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:38:13.297 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:38:13.297 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.3799ms
2024-05-05 20:38:13.298 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:38:13.299 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:38:13.299 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:38:13.302 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:38:13.308 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:38:13.310 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:38:13.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:38:13.312 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:38:13.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:38:13.326 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:38:13.327 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.4533ms
2024-05-05 20:38:13.327 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:38:13.329 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 20.0208ms
2024-05-05 20:38:13.329 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:38:13.335 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:38:13.339 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 35.529ms
2024-05-05 20:38:13.340 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:38:13.341 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 43.1566ms
2024-05-05 20:38:42.912 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:38:42.913 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:38:42.939 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:39:04.968 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:39:05.080 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:39:05.177 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:39:05.279 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:39:05.280 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:39:05.281 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:39:05.283 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:39:05.283 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:39:05.285 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:39:05.286 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:39:05.331 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:39:05.404 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:39:05.405 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:39:05.434 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:39:05.4340532+03:00"
2024-05-05 20:39:05.439 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:39:05.4388852+03:00"
2024-05-05 20:39:06.830 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:39:06.830 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:39:06.862 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:39:07.031 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
2024-05-05 20:39:07.155 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:39:07.1554819+03:00"
2024-05-05 20:39:09.817 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:39:09.871 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.879 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.882 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.919 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.923 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.931 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.936 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.941 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.955 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.957 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.965 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:39:09.980 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:09.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:10.882 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:39:10.885 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:39:10.887 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:39:10.888 +03:00 [INF] Hosting environment: Development
2024-05-05 20:39:10.890 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:39:11.114 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:39:11.292 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 180.7461ms
2024-05-05 20:39:11.295 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:39:11.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.5073ms
2024-05-05 20:39:11.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:39:11.321 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.1371ms
2024-05-05 20:39:11.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:39:11.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.3836ms
2024-05-05 20:39:15.561 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:39:15.567 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:39:15.620 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:39:15.720 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:39:15.757 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:39:15.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:39:15.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:39:15.959 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:39:19.181 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 20:39:19.185 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.188 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 7.5748ms
2024-05-05 20:39:19.190 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 20:39:19.192 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.193 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 20:39:19.211 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 20:39:19.212 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 22.0214ms
2024-05-05 20:39:19.424 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:39:19.425 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.427 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.9877ms
2024-05-05 20:39:19.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:39:19.429 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.493 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:39:19.496 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:19.517 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:39:19.518 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=CP2whjr0DKeeRnXYCRyaKw - -
2024-05-05 20:39:19.519 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.518 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:19.520 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 20:39:19.527 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:19.556 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:39:19.571 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:39:19.576 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 39.5872ms
2024-05-05 20:39:19.579 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:19.589 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 72.2624ms
2024-05-05 20:39:19.612 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:39:19.613 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.614 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 1.8307ms
2024-05-05 20:39:19.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:39:19.616 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:19.618 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:39:19.621 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 20:39:19.628 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:39:19.630 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:19.638 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:19.654 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:39:19.667 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:39:19.673 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 27.0713ms
2024-05-05 20:39:19.681 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:19.687 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 59.8435ms
2024-05-05 20:39:19.703 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 20:39:19.780 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:39:19.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 20:39:19.788 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:39:19.807 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:39:19.811 +03:00 [INF] initializing user data update
2024-05-05 20:39:19.825 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:39:19.827 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:39:19.827 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 204.6545ms
2024-05-05 20:39:19.830 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:39:19.831 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 215.2441ms
2024-05-05 20:39:19.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:39:19.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:39:19.879 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:39:19.882 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:39:19.885 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:39:19.901 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:19.919 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:19.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:19.945 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:39:19.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:19.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.012 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:39:20.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:39:20.089 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:39:20.116 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:39:20.132 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:20.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.147 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.151 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:39:20.157 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.160 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:39:20.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:39:20.168 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:39:20.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:39:20.175 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:20.178 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:39:20.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:39:20.197 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:20.197 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:39:20.198 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:20.209 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:39:20.213 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:39:20.213 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 715.6126ms
2024-05-05 20:39:20.218 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:20.218 +03:00 [INF] initializing user data update
2024-05-05 20:39:20.219 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:39:20.219 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:39:20.220 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:20.222 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:39:20.222 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32950 application/json;+charset=utf-8 793.8959ms
2024-05-05 20:39:20.227 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:39:20.225 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:39:20.227 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:39:20.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:39:20.234 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:39:20.237 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.1769ms
2024-05-05 20:39:20.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:39:20.237 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:20.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:39:20.240 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 27.2364ms
2024-05-05 20:39:20.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:39:20.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.252 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.255 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:39:20.282 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.286 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:39:20.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:39:20.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:39:20.300 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:39:20.303 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:20.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:39:20.315 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:39:20.318 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.321 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:39:20.322 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:39:20.323 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:20.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:39:20.325 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.0938ms
2024-05-05 20:39:20.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:39:20.328 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:39:20.328 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:20.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:39:20.331 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:39:20.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:39:20.334 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:39:20.335 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:39:20.344 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:39:20.345 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:39:20.347 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:39:20.347 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:20.350 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 150.8543ms
2024-05-05 20:39:20.356 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:20.358 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:39:20.361 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:39:20.361 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32950 application/json;+charset=utf-8 165.4067ms
2024-05-05 20:39:20.363 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:39:20.364 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 5.4271ms
2024-05-05 20:39:20.366 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:20.366 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:39:20.367 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.6199ms
2024-05-05 20:39:20.370 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:39:20.375 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 37.6996ms
2024-05-05 20:39:20.375 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:39:20.376 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 50.0180ms
2024-05-05 20:39:23.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:39:23.353 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:23.353 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:39:23.355 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:39:23.360 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:39:23.364 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:39:23.365 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.0238ms
2024-05-05 20:39:23.365 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:39:23.366 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 14.3402ms
2024-05-05 20:39:26.717 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:39:26.719 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:26.720 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.5008ms
2024-05-05 20:39:26.721 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 20:39:26.723 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:39:26.724 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:39:26.727 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:39:26.741 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:39:26.743 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:26.744 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:39:26.745 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:39:26.759 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:39:26.760 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:39:26.768 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:39:26.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:39:26.770 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.8793ms
2024-05-05 20:39:26.774 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:39:26.775 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 34.4583ms
2024-05-05 20:39:26.778 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:39:26.783 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:39:26.784 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 55.5517ms
2024-05-05 20:39:26.786 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:39:26.788 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 66.4579ms
2024-05-05 20:39:49.842 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:39:49.844 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:39:49.867 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:39:50.245 +03:00 [WRN] Cached task timed out.
2024-05-05 20:39:50.246 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:39:50.258 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:40:55.594 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 20:41:06.077 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:41:13.107 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:41:13.324 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:41:13.364 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:41:13.365 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:41:13.366 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:41:13.368 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:41:13.369 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:41:13.370 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:41:13.372 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:41:13.412 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:41:13.497 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:41:13.498 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:41:13.535 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:41:13.5291231+03:00"
2024-05-05 20:41:13.535 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:41:13.5330748+03:00"
2024-05-05 20:41:14.825 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:41:14.825 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:41:14.857 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:41:15.009 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
2024-05-05 20:41:15.138 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:41:15.1383820+03:00"
2024-05-05 20:41:17.863 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:41:17.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:17.920 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:17.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:17.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.955 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.958 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.961 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.969 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:17.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:17.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.986 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:17.997 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:18.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.006 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.014 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.016 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:18.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:18.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:18.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:18.842 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:41:18.931 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:41:18.932 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:41:18.934 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:41:18.935 +03:00 [INF] Hosting environment: Development
2024-05-05 20:41:18.936 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:41:19.231 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:41:19.405 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 176.0823ms
2024-05-05 20:41:19.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:41:19.419 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.7176ms
2024-05-05 20:41:19.425 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:41:19.438 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.2134ms
2024-05-05 20:41:19.472 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:41:19.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.1498ms
2024-05-05 20:41:23.652 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:41:23.656 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:41:23.687 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:41:23.778 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:41:23.816 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:41:23.961 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:41:23.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:41:24.005 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:41:27.852 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:41:28.042 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:41:28.078 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:41:28.079 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:41:28.080 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:41:28.081 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:41:28.081 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:41:28.082 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:41:28.083 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:41:28.121 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:41:28.196 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:41:28.197 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:41:28.233 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:41:28.2276174+03:00"
2024-05-05 20:41:28.233 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:41:28.2330536+03:00"
2024-05-05 20:41:29.588 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:41:29.588 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:41:29.628 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:41:29.781 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
2024-05-05 20:41:29.815 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:41:29.8156410+03:00"
2024-05-05 20:41:32.636 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:41:32.687 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.694 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.727 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.730 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.738 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.747 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.750 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.752 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.757 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.762 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.765 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.770 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.776 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.779 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:41:32.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.784 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:32.789 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:33.604 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:41:33.704 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:41:33.705 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:41:33.708 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:41:33.708 +03:00 [INF] Hosting environment: Development
2024-05-05 20:41:33.709 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:41:34.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:41:34.558 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:41:34.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 181.5863ms
2024-05-05 20:41:34.569 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:41:34.569 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 10.9944ms
2024-05-05 20:41:34.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.3927ms
2024-05-05 20:41:34.620 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:41:34.830 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 210.6840ms
2024-05-05 20:41:38.361 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:41:38.365 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:41:38.392 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:41:38.489 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:41:38.558 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:41:38.747 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:41:38.799 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:41:38.895 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:41:42.593 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 20:41:42.599 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:42.602 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 9.1988ms
2024-05-05 20:41:42.603 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 20:41:42.605 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:42.607 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 20:41:42.628 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 20:41:42.629 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 25.9268ms
2024-05-05 20:41:42.795 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:41:42.796 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:42.797 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.0254ms
2024-05-05 20:41:42.798 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:41:42.799 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:42.876 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=wh--uQkzF6a-jTQ74-2qLA - -
2024-05-05 20:41:42.880 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:42.881 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 20:41:42.905 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:41:42.912 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:42.943 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:41:42.944 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:42.949 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:43.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:41:43.024 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:41:43.032 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 74.7133ms
2024-05-05 20:41:43.035 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:43.051 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 107.5441ms
2024-05-05 20:41:43.247 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:41:43.278 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:41:43.343 +03:00 [INF] initializing user data update
2024-05-05 20:41:43.370 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:41:43.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:41:43.413 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:41:43.420 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:41:43.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:41:43.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:41:43.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:41:43.456 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:43.479 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:43.495 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:43.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:41:43.610 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:43.640 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:43.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:41:43.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:41:43.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:41:43.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:41:43.890 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:43.908 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:43.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:43.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:43.917 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:41:43.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:43.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:43.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:41:43.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:41:43.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:41:43.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:41:43.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:43.957 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:41:44.012 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1097.5805ms
2024-05-05 20:41:44.014 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:41:44.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32944 application/json;+charset=utf-8 1217.3263ms
2024-05-05 20:41:45.017 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:41:45.019 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:45.020 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 2.7524ms
2024-05-05 20:41:45.021 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:41:45.022 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:45.023 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:41:45.027 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:41:45.035 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:41:45.036 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:45.039 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:41:45.041 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:45.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:41:45.062 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:41:45.063 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:41:45.063 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:45.064 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 15.0949ms
2024-05-05 20:41:45.065 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 2.6543ms
2024-05-05 20:41:45.066 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:41:45.066 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:45.069 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:41:45.070 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:45.071 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 36.2668ms
2024-05-05 20:41:45.075 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:41:45.076 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:41:45.080 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 20:41:45.082 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 52.2447ms
2024-05-05 20:41:45.086 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:41:45.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 67.1308ms
2024-05-05 20:41:45.088 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:41:45.090 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:45.091 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:45.093 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 20:41:45.097 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:41:45.102 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:41:45.103 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.0365ms
2024-05-05 20:41:45.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 20:41:45.105 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:45.108 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 20.3134ms
2024-05-05 20:41:45.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:41:45.116 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 34.2392ms
2024-05-05 20:41:45.118 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:41:45.119 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 52.7728ms
2024-05-05 20:41:45.160 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:41:45.161 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:45.162 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:41:45.163 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:45.170 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:41:45.171 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:41:45.180 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:45.181 +03:00 [INF] initializing user data update
2024-05-05 20:41:45.182 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:41:45.181 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:45.183 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:41:45.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:41:45.188 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:41:45.189 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:41:45.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:41:45.197 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:41:45.201 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.0671ms
2024-05-05 20:41:45.201 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:41:45.202 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:45.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:41:45.206 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 34.8446ms
2024-05-05 20:41:45.211 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:41:45.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:45.219 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:45.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:45.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:41:45.304 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:45.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:45.312 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:41:45.319 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:41:45.322 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:41:45.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:41:45.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:45.335 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:45.338 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:45.341 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:41:45.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:41:45.349 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:45.353 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:41:45.359 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:41:45.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:41:45.368 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:41:45.372 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:41:45.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:41:45.378 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:41:45.384 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 219.1541ms
2024-05-05 20:41:45.385 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:41:45.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32944 application/json;+charset=utf-8 226.9856ms
2024-05-05 20:41:46.640 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:41:46.641 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:46.642 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:41:46.645 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:41:46.653 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:41:46.656 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:41:46.658 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.0465ms
2024-05-05 20:41:46.659 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:41:46.660 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 19.7969ms
2024-05-05 20:41:47.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:41:47.085 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:47.086 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:41:47.087 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:41:47.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:41:47.095 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:41:47.096 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.8682ms
2024-05-05 20:41:47.097 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:41:47.099 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 15.1898ms
2024-05-05 20:41:49.979 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:41:49.980 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:49.982 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.6383ms
2024-05-05 20:41:49.983 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 20:41:49.985 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:41:49.986 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:41:49.993 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:41:50.013 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:41:50.015 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:50.016 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:41:50.017 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:41:50.026 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:41:50.026 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:41:50.033 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:41:50.034 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.5082ms
2024-05-05 20:41:50.035 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:41:50.036 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.8156ms
2024-05-05 20:41:50.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:41:50.047 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:41:50.050 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:41:50.051 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 56.0938ms
2024-05-05 20:41:50.052 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:41:50.053 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 70.0344ms
2024-05-05 20:41:52.990 +03:00 [INF] Executed endpoint '/Authhub'
2024-05-05 20:41:52.991 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/Authhub?id=wh--uQkzF6a-jTQ74-2qLA - - - 101 - - 10114.7135ms
2024-05-05 20:42:04.361 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 20:42:04.362 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:04.362 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 1.9911ms
2024-05-05 20:42:04.363 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 20:42:04.367 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:04.368 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 20:42:04.371 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 20:42:04.372 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 9.0636ms
2024-05-05 20:42:04.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:42:04.524 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:04.527 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:42:04.532 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:42:04.663 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:42:04.680 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:42:04.688 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.699 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.701 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.718 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=z1uGArihWe0NYo1GX3hgug - -
2024-05-05 20:42:04.721 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.722 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:04.728 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 20:42:04.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.738 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.743 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.747 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:04.755 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:04.760 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:42:04.765 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 230.9249ms
2024-05-05 20:42:04.766 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:42:04.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 244.2357ms
2024-05-05 20:42:05.001 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:42:05.003 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.004 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:42:05.005 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:42:05.013 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:42:05.021 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:42:05.021 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:42:05.025 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.025 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.031 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 10.8749ms
2024-05-05 20:42:05.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.033 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:42:05.036 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.036 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.039 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.040 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:42:05.041 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.042 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 20:42:05.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.054 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 20:42:05.054 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:42:05.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.059 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 20:42:05.060 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:05.064 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.065 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:42:05.065 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:05.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.069 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 20.0317ms
2024-05-05 20:42:05.072 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:42:05.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.076 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:42:05.078 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:42:05.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.081 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 48.5967ms
2024-05-05 20:42:05.082 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.7492ms
2024-05-05 20:42:05.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.087 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:05.091 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.092 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 38.2297ms
2024-05-05 20:42:05.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.100 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.105 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:42:05.108 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.110 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.115 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:42:05.116 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 11.4278ms
2024-05-05 20:42:05.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:42:05.122 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 114.6917ms
2024-05-05 20:42:05.123 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.124 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:42:05.125 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:42:05.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 124.4057ms
2024-05-05 20:42:05.126 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:05.135 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:42:05.139 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:42:05.143 +03:00 [INF] initializing user data update
2024-05-05 20:42:05.143 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:42:05.143 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:05.144 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:42:05.146 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:42:05.146 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:05.147 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:42:05.150 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:42:05.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:42:05.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:42:05.159 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:42:05.160 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:42:05.161 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.163 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:42:05.164 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 10.09ms
2024-05-05 20:42:05.164 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:42:05.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:42:05.168 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:05.168 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:42:05.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.171 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 32.1485ms
2024-05-05 20:42:05.176 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:42:05.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.179 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:42:05.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:42:05.189 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.194 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.202 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.209 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.212 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.214 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.216 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:05.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:05.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.223 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:42:05.225 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.230 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:42:05.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:42:05.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.236 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:42:05.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:42:05.239 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:42:05.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.245 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:42:05.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.249 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 77.0453ms
2024-05-05 20:42:05.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:05.251 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:42:05.253 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:42:05.253 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 60818 application/json;+charset=utf-8 95.2548ms
2024-05-05 20:42:05.257 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:05.260 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:05.262 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:42:05.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:42:05.266 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:42:05.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:42:05.271 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:42:05.274 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:42:05.277 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 147.1909ms
2024-05-05 20:42:05.278 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:42:05.278 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 160.7838ms
2024-05-05 20:42:05.281 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:42:05.282 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:05.282 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:42:05.283 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:42:05.286 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:42:05.289 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:42:05.290 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.4572ms
2024-05-05 20:42:05.290 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:42:05.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 10.2235ms
2024-05-05 20:42:13.382 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:42:13.383 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:42:13.408 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:42:15.203 +03:00 [WRN] Cached task timed out.
2024-05-05 20:42:15.204 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:42:15.227 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:42:15.985 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:42:15.986 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:15.988 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.9821ms
2024-05-05 20:42:15.989 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:42:15.991 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:15.993 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:42:15.995 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:16.000 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:42:16.005 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:42:16.012 +03:00 [INF] initializing user data update
2024-05-05 20:42:16.012 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:16.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:42:16.013 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:42:16.014 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:16.018 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:42:16.024 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:42:16.026 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:42:16.028 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:42:16.031 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.5026ms
2024-05-05 20:42:16.031 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:42:16.032 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:16.039 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:42:16.039 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 33.2906ms
2024-05-05 20:42:16.042 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:42:16.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:16.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:16.056 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:16.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:42:16.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:16.088 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:16.093 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:42:16.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:42:16.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:42:16.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:42:16.107 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:42:16.110 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:16.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:16.117 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:42:16.121 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:42:16.124 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:16.127 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:42:16.132 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:42:16.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:42:16.138 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:42:16.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:42:16.146 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:42:16.148 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:42:16.151 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 154.8068ms
2024-05-05 20:42:16.152 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:42:16.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 164.1589ms
2024-05-05 20:42:16.174 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:42:16.175 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:16.176 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 2.5676ms
2024-05-05 20:42:16.177 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:42:16.178 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:16.180 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:42:16.181 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:42:16.190 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:42:16.196 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:42:16.202 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:16.203 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:16.204 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:42:16.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:42:16.211 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:42:16.212 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:42:16.214 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 29.2065ms
2024-05-05 20:42:16.214 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.1353ms
2024-05-05 20:42:16.215 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:42:16.216 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:16.217 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 39.6041ms
2024-05-05 20:42:16.218 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 21.6675ms
2024-05-05 20:42:17.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:42:17.635 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:17.636 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:42:17.637 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:42:17.641 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:42:17.647 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:42:17.648 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.2809ms
2024-05-05 20:42:17.649 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:42:17.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 16.2513ms
2024-05-05 20:42:18.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:42:18.578 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:18.579 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:42:18.580 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:42:18.584 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:42:18.588 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:42:18.590 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 8.1228ms
2024-05-05 20:42:18.591 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:42:18.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 15.3910ms
2024-05-05 20:42:20.116 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:42:20.119 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:20.120 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.5072ms
2024-05-05 20:42:20.122 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 20:42:20.123 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:42:20.125 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:42:20.125 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:42:20.132 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:42:20.135 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:42:20.139 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:20.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:42:20.140 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:42:20.143 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:42:20.146 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:42:20.150 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:42:20.153 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:42:20.156 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:42:20.156 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 11.6785ms
2024-05-05 20:42:20.157 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 29.9058ms
2024-05-05 20:42:20.158 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:42:20.159 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:42:20.160 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 25.2333ms
2024-05-05 20:42:20.161 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 39.8337ms
2024-05-05 20:45:22.980 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:45:23.224 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:45:23.264 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:45:23.264 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:45:23.265 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:45:23.266 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:45:23.267 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:45:23.268 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:45:23.270 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:45:23.317 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:45:23.400 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:45:23.400 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:45:23.480 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:45:23.4788735+03:00"
2024-05-05 20:45:23.480 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:45:23.4726533+03:00"
2024-05-05 20:45:25.259 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:45:25.259 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:45:25.290 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:45:25.466 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
2024-05-05 20:45:25.503 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:45:25.5036564+03:00"
2024-05-05 20:45:28.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:45:28.160 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.167 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.191 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.197 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.200 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.203 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.212 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.217 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.224 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.236 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.238 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.246 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:45:28.248 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:28.253 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:45:29.071 +03:00 [INF] ChannelUpdateBackgroundService starting...
2024-05-05 20:45:29.172 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:45:29.173 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:45:29.174 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:45:29.175 +03:00 [INF] Hosting environment: Development
2024-05-05 20:45:29.176 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:45:32.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:45:33.019 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:45:33.102 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:45:33.120 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:45:33.133 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:45:33.142 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:45:33.152 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 26.2707ms
2024-05-05 20:45:33.154 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:45:33.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 186.5134ms
2024-05-05 20:45:33.549 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:45:33.553 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:45:33.577 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:45:33.580 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:45:33.590 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:45:33.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:45:33.689 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:45:33.702 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:45:35.154 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:45:35.155 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:45:35.156 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.5372ms
2024-05-05 20:45:35.157 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 20:45:35.158 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:45:35.213 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:45:35.217 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:45:35.252 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:45:35.254 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:45:35.257 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:45:35.277 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:45:35.288 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:45:35.289 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 29.2634ms
2024-05-05 20:45:35.291 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:45:35.295 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 43.0831ms
2024-05-05 20:45:35.470 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:45:35.477 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:45:35.516 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:45:35.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:45:35.540 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:45:35.545 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:45:35.546 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 325.1187ms
2024-05-05 20:45:35.549 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:45:35.551 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 393.0369ms
2024-05-05 20:45:36.391 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:45:36.573 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 182.4814ms
2024-05-05 20:45:36.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:45:36.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.4744ms
2024-05-05 20:45:36.592 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:45:37.838 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 1246.5159ms
2024-05-05 20:45:37.864 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:45:37.995 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 130.6296ms
2024-05-05 20:49:23.045 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:49:23.243 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:49:23.280 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:49:23.281 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:49:23.282 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:49:23.283 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:49:23.284 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:49:23.285 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:49:23.287 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:49:23.326 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:49:23.395 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:49:23.396 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:49:23.429 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:49:23.4223140+03:00"
2024-05-05 20:49:23.429 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:49:23.4291793+03:00"
2024-05-05 20:49:24.781 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:49:24.781 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:49:24.812 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:49:24.890 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:49:24.8907784+03:00"
2024-05-05 20:49:27.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:49:27.633 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.639 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.644 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.670 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.673 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.675 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.677 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.681 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.683 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.685 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.688 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.690 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.692 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.700 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.706 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:49:27.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.713 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.716 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:27.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:49:28.627 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:49:28.628 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:49:28.629 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:49:28.630 +03:00 [INF] Hosting environment: Development
2024-05-05 20:49:28.631 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:49:28.954 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:49:29.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:49:29.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 175.1169ms
2024-05-05 20:49:29.135 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 10.6807ms
2024-05-05 20:49:29.141 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:49:29.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.8491ms
2024-05-05 20:49:29.220 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:49:29.339 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.2427ms
2024-05-05 20:49:32.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:49:32.042 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:49:32.118 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:49:32.136 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:49:32.149 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:49:32.164 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:49:32.172 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 29.5481ms
2024-05-05 20:49:32.174 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:49:32.184 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 147.9056ms
2024-05-05 20:49:33.495 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:49:33.498 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:49:33.527 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:49:33.531 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:49:33.540 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:49:33.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:49:33.632 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:49:33.644 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 20f1f0a40647f284fe8089ee7029059c2cdd683d26b26c627b7d3ab50117190b
2024-05-05 20:49:34.276 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:49:34.278 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:49:34.279 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.9973ms
2024-05-05 20:49:34.280 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 54
2024-05-05 20:49:34.281 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:49:34.337 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:49:34.341 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:49:34.369 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:49:34.371 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:49:34.373 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:49:34.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:49:34.401 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:49:34.402 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 26.8488ms
2024-05-05 20:49:34.403 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:49:34.406 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 36.6790ms
2024-05-05 20:49:34.584 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:49:34.591 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:49:34.630 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:49:34.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:49:34.655 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:49:34.660 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:49:34.660 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 315.926ms
2024-05-05 20:49:34.661 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:49:34.662 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 54 - 200 0 - 381.9709ms
2024-05-05 20:49:57.236 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:49:57.506 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:49:57.545 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:49:57.546 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:49:57.547 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:49:57.548 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:49:57.549 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:49:57.550 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:49:57.551 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:49:57.593 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:49:57.674 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:49:57.675 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:49:57.706 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:49:57.7049738+03:00"
2024-05-05 20:49:57.706 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:49:57.6994080+03:00"
2024-05-05 20:49:59.096 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:49:59.096 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:49:59.128 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:49:59.291 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 20:49:59.330 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:49:59.3304488+03:00"
2024-05-05 20:50:02.291 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:50:02.342 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.348 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.352 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.373 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.379 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.382 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.387 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.407 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.410 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.418 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.424 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.433 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.442 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:50:02.444 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:02.452 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:50:03.336 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:50:03.337 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:50:03.339 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:50:03.340 +03:00 [INF] Hosting environment: Development
2024-05-05 20:50:03.341 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:50:03.753 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:50:03.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 178.1864ms
2024-05-05 20:50:03.933 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:50:03.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 11.2609ms
2024-05-05 20:50:03.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:50:03.963 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.9126ms
2024-05-05 20:50:04.030 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:50:04.256 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 225.8280ms
2024-05-05 20:50:07.834 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:50:07.838 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:50:07.864 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:50:07.956 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:50:07.993 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:50:08.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:50:08.144 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:50:08.160 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 20:50:12.143 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:50:12.150 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:12.156 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:50:12.160 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:50:12.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:50:12.182 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:50:12.192 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 24.3222ms
2024-05-05 20:50:12.195 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:50:12.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 70.8267ms
2024-05-05 20:50:14.214 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:50:14.215 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:14.217 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.9058ms
2024-05-05 20:50:14.219 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 20:50:14.222 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:14.312 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:50:14.317 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:14.348 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:50:14.349 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:50:14.353 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:50:14.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:50:14.394 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:50:14.395 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 40.0096ms
2024-05-05 20:50:14.398 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:50:14.400 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 51.9896ms
2024-05-05 20:50:14.655 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:50:14.668 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:50:14.737 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:50:14.746 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:50:14.770 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:50:14.777 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:50:14.778 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 458.4468ms
2024-05-05 20:50:14.779 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:50:14.780 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 561.0662ms
2024-05-05 20:50:28.106 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:50:28.108 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:28.109 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:50:28.110 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:50:28.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:50:28.120 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:50:28.122 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 9.4877ms
2024-05-05 20:50:28.123 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:50:28.125 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 18.3991ms
2024-05-05 20:50:31.641 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:50:31.642 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:31.643 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.4528ms
2024-05-05 20:50:31.644 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50
2024-05-05 20:50:31.645 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:31.647 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:50:31.648 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:31.657 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:50:31.658 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:50:31.662 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:50:31.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:50:31.664 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:50:31.667 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:50:31.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:50:31.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:50:31.676 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:50:31.678 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:50:31.679 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 8.9507ms
2024-05-05 20:50:31.679 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 29.2281ms
2024-05-05 20:50:31.680 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:50:31.681 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:50:31.682 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 23.9326ms
2024-05-05 20:50:31.684 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 50 - 200 0 - 40.2219ms
2024-05-05 20:50:38.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:50:38.065 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:38.066 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:50:38.067 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:50:38.072 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:50:38.075 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:50:38.076 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.3169ms
2024-05-05 20:50:38.078 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:50:38.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 14.5429ms
2024-05-05 20:50:41.092 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - -
2024-05-05 20:50:41.093 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:41.094 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.102 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:41.176 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - -
2024-05-05 20:50:41.180 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:41.182 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.183 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:41.194 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:50:41.194 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:50:41.208 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 23.1316ms
2024-05-05 20:50:41.208 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 103.6176ms
2024-05-05 20:50:41.210 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.210 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3 - - - 200 2 application/json;+charset=utf-8 35.4275ms
2024-05-05 20:50:41.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83 - - - 200 2 application/json;+charset=utf-8 119.7717ms
2024-05-05 20:50:41.319 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - -
2024-05-05 20:50:41.320 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:41.321 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.321 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:41.326 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:50:41.327 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 4.6103ms
2024-05-05 20:50:41.328 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.329 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE - - - 200 2 application/json;+charset=utf-8 10.1238ms
2024-05-05 20:50:41.509 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - -
2024-05-05 20:50:41.510 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:41.511 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.512 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:41.521 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:50:41.523 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.215ms
2024-05-05 20:50:41.524 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.526 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB - - - 200 2 application/json;+charset=utf-8 17.0676ms
2024-05-05 20:50:41.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - -
2024-05-05 20:50:41.638 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:50:41.638 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.640 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:50:41.645 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:50:41.647 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.4106ms
2024-05-05 20:50:41.649 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:50:41.650 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D1%83%D0%B3%D0%BE%D0%BB%D1%8C - - - 200 2 application/json;+charset=utf-8 14.3171ms
2024-05-05 20:50:59.321 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:50:59.513 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:50:59.555 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:50:59.556 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:50:59.557 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:50:59.559 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:50:59.560 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:50:59.561 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:50:59.562 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:50:59.607 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:50:59.685 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:50:59.685 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:50:59.723 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:50:59.7212849+03:00"
2024-05-05 20:50:59.723 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:50:59.7170613+03:00"
2024-05-05 20:51:01.059 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:51:01.059 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:51:01.089 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:51:01.255 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 20:51:01.293 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:51:01.2936529+03:00"
2024-05-05 20:51:01.634 +03:00 [ERR] re-indexing channels
2024-05-05 20:51:04.013 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:51:04.053 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.062 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.064 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.071 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.074 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.105 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.107 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.110 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.117 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.123 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.132 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:51:04.137 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.144 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.147 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.150 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:04.152 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:05.088 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:51:05.089 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:51:05.091 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:51:05.092 +03:00 [INF] Hosting environment: Development
2024-05-05 20:51:05.093 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:51:05.345 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:51:05.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 179.1467ms
2024-05-05 20:51:05.526 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:51:05.538 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.0505ms
2024-05-05 20:51:05.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:51:05.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.8940ms
2024-05-05 20:51:05.630 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:51:05.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.1840ms
2024-05-05 20:51:06.311 +03:00 [ERR] re-indexing channels
2024-05-05 20:51:09.844 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:51:09.848 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:51:09.872 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:51:09.970 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:51:10.005 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:51:10.141 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:51:10.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:51:10.182 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: e288f8a63c5c558491b25aefd2a2835b800173669495f68b146acf7c0769075c
2024-05-05 20:51:23.328 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:51:23.344 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:23.347 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 18.7116ms
2024-05-05 20:51:23.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:51:23.351 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:23.447 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:51:23.452 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:51:23.476 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:51:23.479 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:51:23.484 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:51:23.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:51:23.540 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:51:23.549 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 55.1331ms
2024-05-05 20:51:23.552 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:51:23.572 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 96.0595ms
2024-05-05 20:51:23.803 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:51:23.816 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:51:23.883 +03:00 [INF] initializing user data update
2024-05-05 20:51:23.906 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:51:23.910 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:51:23.955 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:51:23.962 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:51:23.967 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:51:23.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:51:23.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:51:23.999 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:24.024 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:24.043 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:24.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:51:24.161 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:51:24.195 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:51:24.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:51:24.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:51:24.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:51:24.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:51:24.443 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:24.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:24.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:24.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:24.474 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:51:24.478 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:51:24.483 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:51:24.489 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:51:24.493 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:51:24.500 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:51:24.504 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:51:24.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:51:24.522 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:51:24.579 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1124.2612ms
2024-05-05 20:51:24.581 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:51:24.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32946 application/json;+charset=utf-8 1233.7690ms
2024-05-05 20:51:24.603 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:51:24.604 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:24.607 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 3.0611ms
2024-05-05 20:51:24.608 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:51:24.609 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:24.611 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:51:24.615 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:51:24.625 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:51:24.626 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:51:24.629 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:51:24.629 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:51:24.648 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:51:24.653 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:51:24.654 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 12.7362ms
2024-05-05 20:51:24.655 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:51:24.656 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 31.1400ms
2024-05-05 20:51:24.661 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:51:24.667 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:51:24.674 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 53.9251ms
2024-05-05 20:51:24.675 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:51:24.676 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 68.3526ms
2024-05-05 20:51:26.423 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:51:26.424 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:26.425 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:51:26.429 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:51:26.439 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:51:26.442 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:51:26.443 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.5148ms
2024-05-05 20:51:26.444 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:51:26.446 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 23.2657ms
2024-05-05 20:51:37.388 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:51:37.389 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:37.391 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.1279ms
2024-05-05 20:51:37.392 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 20:51:37.393 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:37.395 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:51:37.399 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:51:37.417 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:51:37.418 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:51:37.420 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:51:37.420 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:51:37.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:51:37.432 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:51:37.436 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:51:37.437 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.2415ms
2024-05-05 20:51:37.438 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:51:37.440 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 23.1291ms
2024-05-05 20:51:37.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:51:37.454 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:51:37.458 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:51:37.460 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 58.5323ms
2024-05-05 20:51:37.461 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:51:37.463 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 70.2866ms
2024-05-05 20:51:39.592 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:51:39.594 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:39.598 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:39.604 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:51:39.813 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:51:39.840 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:51:39.854 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.863 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.870 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.882 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.895 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.910 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:51:39.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:51:39.942 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:51:39.949 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 341.6696ms
2024-05-05 20:51:39.950 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:39.952 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 54088 application/json;+charset=utf-8 359.6889ms
2024-05-05 20:51:39.977 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:51:39.979 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:39.980 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:51:39.981 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:51:39.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:51:39.990 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:51:39.992 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 7.8613ms
2024-05-05 20:51:39.994 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:51:39.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 18.8534ms
2024-05-05 20:51:41.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6 - -
2024-05-05 20:51:41.216 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:41.218 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.219 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:51:41.278 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:51:41.280 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 58.691ms
2024-05-05 20:51:41.281 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6 - - - 200 2 application/json;+charset=utf-8 67.2684ms
2024-05-05 20:51:41.307 +03:00 [ERR] re-indexing channels
2024-05-05 20:51:41.478 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE - -
2024-05-05 20:51:41.480 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:41.481 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.482 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:51:41.489 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:51:41.492 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.8688ms
2024-05-05 20:51:41.493 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.494 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE - - - 200 2 application/json;+charset=utf-8 16.2677ms
2024-05-05 20:51:41.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF - -
2024-05-05 20:51:41.638 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:41.639 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.640 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:51:41.647 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:51:41.648 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.8683ms
2024-05-05 20:51:41.649 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF - - - 200 2 application/json;+charset=utf-8 13.6755ms
2024-05-05 20:51:41.825 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF%D0%B0 - -
2024-05-05 20:51:41.826 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:51:41.827 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.828 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:51:41.835 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:51:41.836 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 5.8415ms
2024-05-05 20:51:41.838 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:51:41.839 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF%D0%B0 - - - 200 2 application/json;+charset=utf-8 14.4175ms
2024-05-05 20:51:53.925 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:51:53.926 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:51:53.965 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:56:14.637 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 20:56:14.888 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 20:56:14.927 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 20:56:14.928 +03:00 [INF] Quartz Scheduler created
2024-05-05 20:56:14.929 +03:00 [INF] RAMJobStore initialized.
2024-05-05 20:56:14.931 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 20:56:14.932 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 20:56:14.932 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 20:56:14.935 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:56:14.983 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:56:15.058 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 20:56:15.059 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 20:56:15.093 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T20:56:15.0870617+03:00"
2024-05-05 20:56:15.093 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T20:56:15.0914691+03:00"
2024-05-05 20:56:16.435 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 20:56:16.435 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 20:56:16.465 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 20:56:16.628 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 20:56:16.665 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T20:56:16.6651592+03:00"
2024-05-05 20:56:19.190 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 20:56:19.238 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.259 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.266 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.268 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.272 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.275 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.280 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.282 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.283 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.286 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.288 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.292 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.295 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:56:19.299 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.300 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.303 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.305 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:19.310 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 20:56:20.247 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 20:56:20.247 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 20:56:20.249 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 20:56:20.250 +03:00 [INF] Hosting environment: Development
2024-05-05 20:56:20.251 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 20:56:20.529 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 20:56:20.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 299.8381ms
2024-05-05 20:56:20.828 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 20:56:20.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 8.5623ms
2024-05-05 20:56:20.843 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 20:56:20.865 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.7932ms
2024-05-05 20:56:20.895 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 20:56:21.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.4196ms
2024-05-05 20:56:21.699 +03:00 [ERR] re-indexing channels
2024-05-05 20:56:25.164 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:56:25.166 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 20:56:25.191 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 20:56:25.255 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 20:56:25.276 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 20:56:25.355 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 20:56:25.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 20:56:25.380 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 20:57:22.240 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - -
2024-05-05 20:57:22.247 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.251 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - - - 204 - - 10.2892ms
2024-05-05 20:57:22.254 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0
2024-05-05 20:57:22.255 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.257 +03:00 [INF] Executing endpoint '/Authhub/negotiate'
2024-05-05 20:57:22.279 +03:00 [INF] Executed endpoint '/Authhub/negotiate'
2024-05-05 20:57:22.280 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/Authhub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 26.7127ms
2024-05-05 20:57:22.446 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 20:57:22.447 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.448 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.3519ms
2024-05-05 20:57:22.450 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:57:22.455 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.532 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/Authhub?id=fcEIZYwBB3PnUS4XcHUtYQ - -
2024-05-05 20:57:22.533 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.534 +03:00 [INF] Executing endpoint '/Authhub'
2024-05-05 20:57:22.554 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:57:22.558 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:22.599 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:57:22.600 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:22.604 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:22.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:57:22.646 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:57:22.647 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.648 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Notification/UserNotifications - - - 204 - - 2.0531ms
2024-05-05 20:57:22.649 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - -
2024-05-05 20:57:22.650 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:22.652 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:57:22.656 +03:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications() on controller TgCheckerApi.Controllers.NotificationController (TgCheckerApi).
2024-05-05 20:57:22.656 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:57:22.676 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 55.8208ms
2024-05-05 20:57:22.686 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:57:22.695 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:22.698 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:22.699 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:22.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:57:22.718 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:57:22.720 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 14.914ms
2024-05-05 20:57:22.728 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:22.738 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.unique_key = @__uniqueKeyClaim_0
LIMIT 2
2024-05-05 20:57:22.745 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 58.1121ms
2024-05-05 20:57:22.745 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 145.9926ms
2024-05-05 20:57:22.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.user_id = @__user_Id_0
2024-05-05 20:57:22.846 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Notification, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:57:22.904 +03:00 [INF] Executed action TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi) in 244.9603ms
2024-05-05 20:57:22.906 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.NotificationController.GetUserNotifications (TgCheckerApi)'
2024-05-05 20:57:22.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Notification/UserNotifications - - - 200 10268 application/json;+charset=utf-8 259.0330ms
2024-05-05 20:57:22.912 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 20:57:22.922 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:57:22.954 +03:00 [INF] initializing user data update
2024-05-05 20:57:22.974 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:57:22.978 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:57:23.023 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:57:23.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:57:23.034 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:57:23.037 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:57:23.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:57:23.067 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.096 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.112 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.131 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:57:23.226 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.271 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:57:23.341 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:57:23.399 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:57:23.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:57:23.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:57:23.479 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.487 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.492 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.496 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:57:23.501 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.505 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.511 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:57:23.519 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:57:23.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:57:23.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:57:23.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:57:23.539 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:57:23.565 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 20:57:23.566 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:23.567 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:57:23.569 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:23.577 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:57:23.579 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:23.580 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:57:23.580 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:23.582 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1022.0519ms
2024-05-05 20:57:23.594 +03:00 [INF] initializing user data update
2024-05-05 20:57:23.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:57:23.594 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:57:23.598 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:57:23.601 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:57:23.603 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:57:23.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:57:23.611 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32942 application/json;+charset=utf-8 1160.6713ms
2024-05-05 20:57:23.612 +03:00 [INF] Request found in cache. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:57:23.614 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 18.4712ms
2024-05-05 20:57:23.619 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:57:23.624 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:23.630 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:57:23.633 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 55.9132ms
2024-05-05 20:57:23.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 20:57:23.648 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 20:57:23.658 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.662 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.667 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.673 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:57:23.712 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:57:23.712 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:23.713 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 2.0065ms
2024-05-05 20:57:23.714 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 20:57:23.715 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:23.717 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:57:23.721 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 20:57:23.732 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:57:23.734 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:57:23.739 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:23.740 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:23.744 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:57:23.749 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:57:23.750 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.3197ms
2024-05-05 20:57:23.752 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:23.753 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 18.3122ms
2024-05-05 20:57:23.756 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 20:57:23.759 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:57:23.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.766 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 42.0735ms
2024-05-05 20:57:23.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.768 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 20:57:23.771 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 56.9667ms
2024-05-05 20:57:23.771 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:57:23.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:57:23.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:57:23.861 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:57:23.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:57:23.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:57:23.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 20:57:23.908 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 20:57:23.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 20:57:23.932 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 20:57:23.939 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 20:57:23.946 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 20:57:23.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 20:57:23.955 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 20:57:23.984 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 412.1598ms
2024-05-05 20:57:23.995 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 20:57:23.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32942 application/json;+charset=utf-8 433.8470ms
2024-05-05 20:57:25.173 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:57:25.174 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:25.175 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:57:25.179 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:57:25.187 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:57:25.191 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:57:25.192 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.6946ms
2024-05-05 20:57:25.193 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:57:25.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 20.9363ms
2024-05-05 20:57:30.438 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 20:57:30.439 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:30.441 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.3097ms
2024-05-05 20:57:30.442 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 56
2024-05-05 20:57:30.443 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:57:30.444 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:57:30.451 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:57:30.468 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 20:57:30.469 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:30.471 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 20:57:30.472 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 20:57:30.483 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:57:30.485 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 20:57:30.489 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:57:30.490 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 8.2469ms
2024-05-05 20:57:30.491 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 20:57:30.493 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 20:57:30.494 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 26.4195ms
2024-05-05 20:57:30.504 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 20:57:30.509 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 20:57:30.510 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 56.3721ms
2024-05-05 20:57:30.511 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 20:57:30.512 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 56 - 200 0 - 70.3931ms
2024-05-05 20:57:31.679 +03:00 [ERR] re-indexing channels
2024-05-05 20:57:52.997 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 20:57:52.998 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:57:53.051 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:57:53.632 +03:00 [WRN] Cached task timed out.
2024-05-05 20:57:53.633 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 20:57:53.655 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 20:58:05.249 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 20:58:06.764 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:58:06.765 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:58:06.767 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:06.771 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:58:06.896 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:58:06.912 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:58:06.920 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.923 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.927 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.932 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.934 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.942 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.953 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.958 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:06.962 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:06.965 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:58:06.970 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 196.8482ms
2024-05-05 20:58:06.971 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:06.972 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68662 application/json;+charset=utf-8 208.4490ms
2024-05-05 20:58:07.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:58:07.007 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:58:07.009 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:07.011 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:58:07.020 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:58:07.024 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:58:07.031 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.034 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.038 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.048 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.062 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.075 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.086 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.091 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.094 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.109 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:58:07.114 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 99.897ms
2024-05-05 20:58:07.115 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:07.117 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68662 application/json;+charset=utf-8 111.6518ms
2024-05-05 20:58:07.151 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:58:07.152 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:58:07.154 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:07.155 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:58:07.162 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:58:07.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:58:07.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.178 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.183 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.189 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.196 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.203 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.208 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.213 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.219 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:07.224 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:07.228 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:58:07.232 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 74.3401ms
2024-05-05 20:58:07.233 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:07.234 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68662 application/json;+charset=utf-8 83.1429ms
2024-05-05 20:58:07.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 20:58:07.267 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:58:07.267 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:58:07.268 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 20:58:07.271 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 20:58:07.274 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 20:58:07.275 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.2597ms
2024-05-05 20:58:07.275 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 20:58:07.276 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 11.0748ms
2024-05-05 20:58:08.030 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B1%D1%83%D1%80%D1%83%D0%BD%D0%B4%D1%83%D0%BA - -
2024-05-05 20:58:08.032 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:58:08.033 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:08.034 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:58:08.100 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:58:08.102 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 64.7972ms
2024-05-05 20:58:08.103 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:08.105 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B1%D1%83%D1%80%D1%83%D0%BD%D0%B4%D1%83%D0%BA - - - 200 2 application/json;+charset=utf-8 74.7833ms
2024-05-05 20:58:10.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - -
2024-05-05 20:58:10.176 +03:00 [INF] CORS policy execution successful.
2024-05-05 20:58:10.178 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:10.179 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 20:58:10.189 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 20:58:10.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 20:58:10.197 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.203 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.208 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.214 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.217 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.223 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.229 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.236 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.239 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 20:58:10.252 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 20:58:10.255 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 20:58:10.261 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 78.9931ms
2024-05-05 20:58:10.262 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 20:58:10.264 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language= - - - 200 68662 application/json;+charset=utf-8 88.8962ms
2024-05-05 21:01:25.389 +03:00 [WRN] New task timed out. Hash: 1753ccde6dea3f745dd7cd48bee3ac1e1c4e1777d643c4e5eea9003a328a3ac8
2024-05-05 21:01:25.391 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 21:01:25.416 +03:00 [ERR] An unexpected error occurred while processing the channels.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.BotController.CallSubscribersByChannels(DailySubRequest dailySubRequest) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\BotController.cs:line 281
2024-05-05 21:01:25.421 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-05 21:01:25.422 +03:00 [INF] Executed action TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi) in 300144.3583ms
2024-05-05 21:01:25.423 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 21:01:25.425 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35 - 400 - text/plain;+charset=utf-8 300233.4354ms
2024-05-05 21:09:08.868 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 21:09:09.068 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 21:09:09.102 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 21:09:09.103 +03:00 [INF] Quartz Scheduler created
2024-05-05 21:09:09.104 +03:00 [INF] RAMJobStore initialized.
2024-05-05 21:09:09.105 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 21:09:09.106 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 21:09:09.106 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 21:09:09.107 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:09:09.147 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:09:09.217 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:09:09.218 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:09:09.251 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T21:09:09.2451841+03:00"
2024-05-05 21:09:09.251 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T21:09:09.2490547+03:00"
2024-05-05 21:09:10.502 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 21:09:10.502 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 21:09:10.530 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 21:09:10.682 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 21:09:10.719 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T21:09:10.7198888+03:00"
2024-05-05 21:09:13.124 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 21:09:13.176 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.188 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.212 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.226 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.236 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.259 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.264 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.267 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.271 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.273 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.282 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.284 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.286 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.288 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.290 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:09:13.296 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.298 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:13.301 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:14.187 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 21:09:14.187 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 21:09:14.189 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 21:09:14.190 +03:00 [INF] Hosting environment: Development
2024-05-05 21:09:14.191 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 21:09:14.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 21:09:14.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 171.0793ms
2024-05-05 21:09:14.558 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 21:09:14.571 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 13.1783ms
2024-05-05 21:09:14.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 21:09:14.586 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.9703ms
2024-05-05 21:09:14.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 21:09:14.765 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.3365ms
2024-05-05 21:09:15.742 +03:00 [ERR] re-indexing channels
2024-05-05 21:09:19.005 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 21:09:19.014 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:19.017 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 11.5088ms
2024-05-05 21:09:19.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 21:09:19.019 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:19.197 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 21:09:19.226 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:09:19.286 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:09:19.291 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:09:19.306 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:09:19.363 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:09:19.393 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:09:19.393 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:09:19.397 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:09:19.402 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 86.4179ms
2024-05-05 21:09:19.406 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 21:09:19.407 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:09:19.409 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 21:09:19.415 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 21:09:19.424 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 138.0787ms
2024-05-05 21:09:19.573 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 21:09:19.582 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 21:09:19.594 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:09:19.595 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 21:09:19.623 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 21:09:19.661 +03:00 [INF] initializing user data update
2024-05-05 21:09:19.684 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 21:09:19.688 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 21:09:19.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 21:09:19.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 21:09:19.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 21:09:19.740 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 21:09:19.743 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 21:09:19.767 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:09:19.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:09:19.813 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:09:19.832 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 21:09:19.933 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:09:19.962 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:09:20.012 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 21:09:20.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 21:09:20.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 21:09:20.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 21:09:20.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:20.190 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:09:20.195 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:09:20.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:09:20.202 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 21:09:20.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:09:20.209 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:09:20.214 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 21:09:20.219 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 21:09:20.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 21:09:20.225 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 21:09:20.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:09:20.240 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 21:09:20.295 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 1065.0919ms
2024-05-05 21:09:20.296 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 21:09:20.297 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32951 application/json;+charset=utf-8 1279.2220ms
2024-05-05 21:09:20.319 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 21:09:20.319 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:20.320 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.7974ms
2024-05-05 21:09:20.321 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 21:09:20.323 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:20.325 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 21:09:20.329 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 21:09:20.336 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:09:20.336 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:09:20.339 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:09:20.340 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:09:20.350 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:09:20.363 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:09:20.364 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 16.3191ms
2024-05-05 21:09:20.365 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:09:20.366 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 21:09:20.367 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 31.5441ms
2024-05-05 21:09:20.372 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 21:09:20.377 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 46.1027ms
2024-05-05 21:09:20.378 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 21:09:20.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 57.6920ms
2024-05-05 21:09:21.489 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:09:21.490 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:21.491 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:09:21.495 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:09:21.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:09:21.505 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:09:21.507 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 10.2575ms
2024-05-05 21:09:21.508 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:09:21.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 20.1708ms
2024-05-05 21:09:26.053 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 21:09:26.054 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:26.056 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.8565ms
2024-05-05 21:09:26.057 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 21:09:26.059 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:09:26.060 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:09:26.064 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:09:26.081 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:09:26.082 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:09:26.084 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:09:26.085 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:09:26.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:09:26.096 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:09:26.097 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:09:26.097 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 9.9029ms
2024-05-05 21:09:26.100 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:09:26.105 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 23.9668ms
2024-05-05 21:09:26.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 21:09:26.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 21:09:26.121 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:09:26.122 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 56.1701ms
2024-05-05 21:09:26.124 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:09:26.125 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 67.8950ms
2024-05-05 21:09:30.730 +03:00 [ERR] re-indexing channels
2024-05-05 21:09:49.720 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 21:09:56.825 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 21:09:56.875 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 21:10:59.639 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 21:10:59.838 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 21:10:59.874 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 21:10:59.875 +03:00 [INF] Quartz Scheduler created
2024-05-05 21:10:59.876 +03:00 [INF] RAMJobStore initialized.
2024-05-05 21:10:59.877 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 21:10:59.878 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 21:10:59.879 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 21:10:59.880 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:10:59.921 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:10:59.994 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:10:59.995 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:11:00.042 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T21:11:00.0409015+03:00"
2024-05-05 21:11:00.042 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T21:11:00.0361714+03:00"
2024-05-05 21:11:01.338 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 21:11:01.338 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 21:11:01.366 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 21:11:01.519 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
2024-05-05 21:11:01.557 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T21:11:01.5572658+03:00"
2024-05-05 21:11:01.888 +03:00 [ERR] re-indexing channels
2024-05-05 21:11:03.968 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 21:11:04.005 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.030 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.036 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.042 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.045 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.048 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.057 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.064 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.075 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.088 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.091 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:04.093 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:04.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:05.027 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 21:11:05.028 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 21:11:05.030 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 21:11:05.031 +03:00 [INF] Hosting environment: Development
2024-05-05 21:11:05.032 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 21:11:05.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 21:11:05.742 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 166.0024ms
2024-05-05 21:11:05.751 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 21:11:05.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.3431ms
2024-05-05 21:11:05.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 21:11:05.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.5940ms
2024-05-05 21:11:05.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 21:11:05.953 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.2148ms
2024-05-05 21:11:06.578 +03:00 [ERR] re-indexing channels
2024-05-05 21:11:10.006 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:11:10.013 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:11:10.108 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:11:10.133 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:11:10.151 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:11:10.172 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:11:10.178 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:11:10.181 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 40.3435ms
2024-05-05 21:11:10.182 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:11:10.185 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:11:10.209 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 203.8288ms
2024-05-05 21:11:10.221 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 21:11:10.225 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 21:11:10.239 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 21:11:10.356 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 21:11:10.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 21:11:10.393 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: 3b2516aca7b61e0c306dc4c384e094c6eef9e6bdce5faf9045446bf0e6f3f80e
2024-05-05 21:11:14.946 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 21:11:14.948 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:11:14.949 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.1963ms
2024-05-05 21:11:14.950 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 44
2024-05-05 21:11:14.951 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:11:15.038 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:11:15.045 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:11:15.078 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:11:15.079 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:11:15.084 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:11:15.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:11:15.129 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:11:15.130 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 44.5935ms
2024-05-05 21:11:15.132 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:11:15.134 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 56.1961ms
2024-05-05 21:11:15.371 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 21:11:15.381 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:11:15.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:11:15.451 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 21:11:15.479 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 21:11:15.486 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:11:15.487 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 439.3628ms
2024-05-05 21:11:15.488 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:11:15.489 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 44 - 200 0 - 538.6654ms
2024-05-05 21:11:16.567 +03:00 [ERR] re-indexing channels
2024-05-05 21:11:55.228 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 21:11:55.423 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 21:11:55.459 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 21:11:55.460 +03:00 [INF] Quartz Scheduler created
2024-05-05 21:11:55.461 +03:00 [INF] RAMJobStore initialized.
2024-05-05 21:11:55.462 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 21:11:55.463 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 21:11:55.464 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 21:11:55.466 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:11:55.505 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:11:55.577 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:11:55.577 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:11:55.611 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T21:11:55.6099588+03:00"
2024-05-05 21:11:55.611 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T21:11:55.6051345+03:00"
2024-05-05 21:11:56.910 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 21:11:56.910 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 21:11:56.938 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 21:11:57.095 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 21:11:57.131 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T21:11:57.1316633+03:00"
2024-05-05 21:11:59.774 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 21:11:59.827 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.859 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.883 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.886 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.890 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.892 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.895 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.900 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.902 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.904 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.909 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.916 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:11:59.918 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:11:59.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:00.822 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 21:12:00.823 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 21:12:00.826 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 21:12:00.826 +03:00 [INF] Hosting environment: Development
2024-05-05 21:12:00.827 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 21:12:01.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 21:12:01.307 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 171.8118ms
2024-05-05 21:12:01.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 21:12:01.319 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 8.5961ms
2024-05-05 21:12:01.331 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 21:12:01.345 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.7908ms
2024-05-05 21:12:01.402 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 21:12:01.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.1952ms
2024-05-05 21:12:05.731 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:12:05.735 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:12:05.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:12:05.764 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:12:05.770 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 21:12:05.864 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:12:05.864 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 21:12:05.893 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:12:05.895 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 21:12:05.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:12:05.931 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:12:05.940 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 39.4284ms
2024-05-05 21:12:05.944 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:12:05.959 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 201.7876ms
2024-05-05 21:12:06.028 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 21:12:06.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 21:12:06.065 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: ff94383094a0c1a5f909ef6dc75af0080cccfa3ae21ac2586e9efdb816b80edc
2024-05-05 21:12:08.935 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 21:12:08.937 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:12:08.938 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 2.8801ms
2024-05-05 21:12:08.940 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 44
2024-05-05 21:12:08.941 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:12:09.035 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:12:09.040 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:12:09.073 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:12:09.074 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:12:09.081 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:12:09.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:12:09.127 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:12:09.128 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 45.362ms
2024-05-05 21:12:09.130 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:12:09.133 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 59.3238ms
2024-05-05 21:12:09.369 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 21:12:09.380 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:12:09.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:12:09.452 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 21:12:09.476 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 21:12:09.483 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:12:09.484 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 441.4166ms
2024-05-05 21:12:09.485 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:12:09.486 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 44 - 200 0 - 546.6368ms
2024-05-05 21:12:40.332 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 21:12:40.528 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 21:12:40.568 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 21:12:40.569 +03:00 [INF] Quartz Scheduler created
2024-05-05 21:12:40.570 +03:00 [INF] RAMJobStore initialized.
2024-05-05 21:12:40.571 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 21:12:40.572 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 21:12:40.573 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 21:12:40.574 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:12:40.616 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:12:40.691 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:12:40.692 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:12:40.724 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T21:12:40.7224785+03:00"
2024-05-05 21:12:40.724 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T21:12:40.7182601+03:00"
2024-05-05 21:12:42.027 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 21:12:42.027 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 21:12:42.059 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 21:12:42.223 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 21:12:42.261 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T21:12:42.2614212+03:00"
2024-05-05 21:12:42.385 +03:00 [ERR] Error indexing channels: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[TgCheckerApi.Models.DTO.ChannelElasticDto, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2024-05-05 21:12:46.319 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-05 21:12:46.544 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-05-05 21:12:46.584 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-05-05 21:12:46.592 +03:00 [INF] Quartz Scheduler created
2024-05-05 21:12:46.593 +03:00 [INF] RAMJobStore initialized.
2024-05-05 21:12:46.595 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-05-05 21:12:46.595 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-05-05 21:12:46.596 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-05-05 21:12:46.597 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:12:46.635 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:12:46.702 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-05-05 21:12:46.702 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-05-05 21:12:46.743 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-05-05T21:12:46.7366380+03:00"
2024-05-05 21:12:46.743 +03:00 [INF] RecalculateTopPosJob started at "2024-05-05T21:12:46.7414598+03:00"
2024-05-05 21:12:48.010 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-05-05 21:12:48.010 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-05-05 21:12:48.043 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-05-05 21:12:48.202 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = Int32), @p17='?' (DbType = Int32), @p16='?' (DbType = Int32), @p19='?' (DbType = Int32), @p18='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
UPDATE "Channel" SET "TopPos" = @p14
WHERE id = @p15;
UPDATE "Channel" SET "TopPos" = @p16
WHERE id = @p17;
UPDATE "Channel" SET "TopPos" = @p18
WHERE id = @p19;
UPDATE "Channel" SET "TopPos" = @p20
WHERE id = @p21;
2024-05-05 21:12:48.416 +03:00 [INF] RecalculateTopPosJob completed at "2024-05-05T21:12:48.4169093+03:00"
2024-05-05 21:12:48.549 +03:00 [ERR] Error indexing channels: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[TgCheckerApi.Models.DTO.ChannelElasticDto, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2024-05-05 21:12:50.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
2024-05-05 21:12:50.742 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.747 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.772 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.777 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.780 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.783 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.788 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.806 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.809 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.826 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.text
FROM "Tag" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:12:50.831 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:50.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__p_0
2024-05-05 21:12:51.762 +03:00 [INF] Now listening on: https://localhost:7256
2024-05-05 21:12:51.763 +03:00 [INF] Now listening on: https://localhost:5244
2024-05-05 21:12:51.765 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-05 21:12:51.765 +03:00 [INF] Hosting environment: Development
2024-05-05 21:12:51.766 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\
2024-05-05 21:12:52.209 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/index.html - -
2024-05-05 21:12:52.377 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 169.8919ms
2024-05-05 21:12:52.381 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-05-05 21:12:52.391 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.7464ms
2024-05-05 21:12:52.396 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/_vs/browserLink - -
2024-05-05 21:12:52.414 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.5466ms
2024-05-05 21:12:52.475 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - -
2024-05-05 21:12:52.591 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.7552ms
2024-05-05 21:12:53.458 +03:00 [ERR] Error indexing channels: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[TgCheckerApi.Models.DTO.ChannelElasticDto, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2024-05-05 21:12:56.855 +03:00 [INF] Start processing HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:12:56.858 +03:00 [INF] Sending HTTP request POST "https://localhost:7256/api/Bot/getSubscribersByChannels"
2024-05-05 21:12:56.882 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35
2024-05-05 21:12:56.967 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 21:12:57.000 +03:00 [INF] Route matched with {action = "CallSubscribersByChannels", controller = "Bot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CallSubscribersByChannels(DailySubRequest) on controller TgCheckerApi.Controllers.BotController (TgCheckerApi).
2024-05-05 21:12:57.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.telegram_id
FROM "Channel" AS c
2024-05-05 21:12:57.142 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id
FROM "Channel" AS c
2024-05-05 21:12:57.157 +03:00 [INF] Received request for get_subscribers_count_batch. Request hash: b392c27600d067df509777d31536b7ba1f5faa486300f61983bc6d521be002b9
2024-05-05 21:12:58.452 +03:00 [ERR] Error indexing channels: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[TgCheckerApi.Models.DTO.ChannelElasticDto, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
2024-05-05 21:13:41.355 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:13:41.362 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:13:41.367 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:13:41.371 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:13:41.378 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:13:41.390 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:13:41.398 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 20.8925ms
2024-05-05 21:13:41.402 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:13:41.418 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 62.9581ms
2024-05-05 21:14:01.164 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:14:01.166 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:01.168 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:14:01.169 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:14:01.174 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:14:01.177 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:14:01.178 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 7.0639ms
2024-05-05 21:14:01.179 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:14:01.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 16.5148ms
2024-05-05 21:14:30.524 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - -
2024-05-05 21:14:30.525 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:30.527 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Channel/102/Details - - - 204 - - 3.1841ms
2024-05-05 21:14:30.539 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48
2024-05-05 21:14:30.544 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:30.631 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:14:30.636 +03:00 [INF] Route matched with {action = "SetChannelDetails", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetChannelDetails(Int32, TgCheckerApi.Models.PutModels.ChannelDetailsPutModel) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:14:30.668 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:14:30.669 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:14:30.673 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:14:30.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:14:30.715 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:14:30.716 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 41.6651ms
2024-05-05 21:14:30.718 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:14:30.720 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 51.5344ms
2024-05-05 21:14:30.957 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2024-05-05 21:14:30.968 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:14:31.029 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:14:31.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag
FROM "ChannelHasTag" AS c
WHERE c.channel = @__channelId_0
2024-05-05 21:14:31.060 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET description = @p0
WHERE id = @p1;
2024-05-05 21:14:31.065 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:14:31.065 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi) in 426.3537ms
2024-05-05 21:14:31.066 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.SetChannelDetails (TgCheckerApi)'
2024-05-05 21:14:31.067 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7256/api/Channel/102/Details application/json;+charset=utf-8 48 - 200 0 - 528.0103ms
2024-05-05 21:14:33.603 +03:00 [ERR] re-indexing channels
2024-05-05 21:14:36.937 +03:00 [ERR] Error occurred executing UpdateSubscribersJob via HTTP request.
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at TgCheckerApi.Job.UpdateSubscribersJob.Execute(IJobExecutionContext context) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Job\UpdateSubscribersJob.cs:line 49
2024-05-05 21:14:37.649 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:14:37.651 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:37.652 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:14:37.654 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:14:37.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:14:37.659 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:14:37.660 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 5.277ms
2024-05-05 21:14:37.663 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:14:37.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 15.1486ms
2024-05-05 21:14:38.924 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6 - -
2024-05-05 21:14:38.925 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:38.929 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:38.934 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:14:39.056 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 21:14:39.068 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 131.0386ms
2024-05-05 21:14:39.069 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.070 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6 - - - 200 2 application/json;+charset=utf-8 145.8415ms
2024-05-05 21:14:39.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE - -
2024-05-05 21:14:39.189 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:39.191 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.192 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:14:39.198 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 21:14:39.201 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 7.3381ms
2024-05-05 21:14:39.202 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE - - - 200 2 application/json;+charset=utf-8 15.5689ms
2024-05-05 21:14:39.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF - -
2024-05-05 21:14:39.309 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:39.311 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.312 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:14:39.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF%D0%B0 - -
2024-05-05 21:14:39.355 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:39.356 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.357 +03:00 [INF] Route matched with {action = "GetChannels", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.ChannelGetModel]]] GetChannels(Int32, System.String, System.String, System.String, System.String, System.String) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-05-05 21:14:39.386 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 21:14:39.386 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__channelIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
2024-05-05 21:14:39.404 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 21:14:39.405 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__channelIds_0='?' (DbType = Object), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c.tgclient_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE (c."Hidden" <> TRUE OR c."Hidden" IS NULL) AND c.id = ANY (@__channelIds_0)
ORDER BY COALESCE(c.bumps, 0.0) DESC
LIMIT @__p_2 OFFSET @__p_1
2024-05-05 21:14:39.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 21:14:39.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-05-05 21:14:39.430 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:39.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:39.432 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 21:14:39.433 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.ChannelGetModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 21:14:39.444 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 129.4538ms
2024-05-05 21:14:39.444 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi) in 84.6332ms
2024-05-05 21:14:39.445 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.446 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannels (TgCheckerApi)'
2024-05-05 21:14:39.447 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF - - - 200 7805 application/json;+charset=utf-8 138.5588ms
2024-05-05 21:14:39.447 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Channel/Page/1?&sortOption=rating&ascending=False&language=&search=%D0%B6%D0%BE%D0%BF%D0%B0 - - - 200 7805 application/json;+charset=utf-8 93.4674ms
2024-05-05 21:14:48.485 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/Auth - -
2024-05-05 21:14:48.486 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:48.487 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/Auth - - - 204 - - 2.1048ms
2024-05-05 21:14:48.488 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Auth - -
2024-05-05 21:14:48.489 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:48.490 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 21:14:48.495 +03:00 [INF] Route matched with {action = "GetMe", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.UserProfileModel]] GetMe() on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:14:48.504 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:14:48.505 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:14:48.507 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:14:48.507 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:14:48.517 +03:00 [INF] initializing user data update
2024-05-05 21:14:48.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:14:48.521 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:14:48.522 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 6.1379ms
2024-05-05 21:14:48.524 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:14:48.525 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 21.9320ms
2024-05-05 21:14:48.535 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 21:14:48.540 +03:00 [INF] Received request for getProfilePictureAndUsername. Request hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 21:14:48.570 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 21:14:48.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 21:14:48.579 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 21:14:48.582 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.parent_id = @__p_0
2024-05-05 21:14:48.585 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.comment_id = @__p_0
2024-05-05 21:14:48.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:48.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:48.614 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:48.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 21:14:48.667 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:14:48.694 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:14:48.734 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 21:14:48.775 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 21:14:48.816 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 21:14:48.847 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 21:14:48.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.api_hash, t.api_id, t.channel_count, t.phone_number, t.telegram_id
FROM "TgClient" AS t
WHERE t.id = @__p_0
LIMIT 1
2024-05-05 21:14:48.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.user_id
FROM "ChannelAccess" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:48.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:48.877 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.content, c.created_at, c.parent_id, c.rating, c.user_id
FROM "Comment" AS c
WHERE c.channel_id = @__p_0
2024-05-05 21:14:48.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT m.id, m.channel_telegram_id, m.media, m.text, m.views
FROM "Message" AS m
WHERE m.channel_telegram_id = @__p_0
2024-05-05 21:14:48.882 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:14:48.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.is_new, n.target_telegram, n.type_id, n.user_id
FROM "Notification" AS n
WHERE n.channel_id = @__p_0
2024-05-05 21:14:48.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.amount_currency, p.amount_value, p.capture, p.capture_json, p.captured_at, p.channel_id, p.client_ip, p.created_at, p.description, p.duration, p.expires_at, p.full_json, p.paid, p.payment_method, p.status, p.sub_given, p.subtype_id, p.user_id
FROM "Payments" AS p
WHERE p.channel_id = @__p_0
2024-05-05 21:14:48.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.channel_id, r.comment_id, r.notification_sent, r.reason, r.report_time, r.report_type, r.staff_id, r.status, r.text, r.user_id
FROM "Report" AS r
WHERE r.channel_id = @__p_0
2024-05-05 21:14:48.899 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.channel_id
FROM "StatisticsSheet" AS s
WHERE s.channel_id = @__p_0
2024-05-05 21:14:48.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t."autoRenewal", t."channelId", t.channel_name, t.discount, t.duration, t.expires, t.price, t.status, t.subscription_type_id, t."userId", t.username
FROM "TelegramPayments" AS t
WHERE t."channelId" = @__p_0
2024-05-05 21:14:48.907 +03:00 [INF] Executing OkObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.UserProfileModel'.
2024-05-05 21:14:48.923 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi) in 424.5803ms
2024-05-05 21:14:48.924 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.GetMe (TgCheckerApi)'
2024-05-05 21:14:48.925 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Auth - - - 200 32942 application/json;+charset=utf-8 437.2797ms
2024-05-05 21:14:48.945 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 21:14:48.946 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:48.946 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7256/api/User/PaymentHistory - - - 204 - - 1.1918ms
2024-05-05 21:14:48.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - -
2024-05-05 21:14:48.948 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:48.949 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 21:14:48.952 +03:00 [INF] Route matched with {action = "GetPaymentHistory", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.GetModels.PaymentHistoryModel]]] GetPaymentHistory() on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-05-05 21:14:48.958 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - -
2024-05-05 21:14:48.958 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:14:48.960 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uniqueKeyClaim_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.avatar, t.chat_id, t.last_update, t.notification_settings, t.telegram_id, t.unique_key, t.username, t1.id, t1.channel_id, t1.user_id, t1.id0, t1.avatar, t1.bumps, t1.description, t1.flag, t1."Hidden", t1."IsPartner", t1.language, t1.last_bump, t1.members, t1.name, t1.notification_sent, t1.notifications, t1.promo_post, t1.promo_post_interval, t1.promo_post_last, t1.promo_post_sent, t1.promo_post_time, t1.telegram_id, t1.tgclient_id, t1."TopPos", t1."Url", t1."user", t1.id1, t1.channel, t1.tag, t1.id00, t1.text, t3.id, t3.channel_id, t3.content, t3.created_at, t3.parent_id, t3.rating, t3.user_id, t3.id0, t3.avatar, t3.bumps, t3.description, t3.flag, t3."Hidden", t3."IsPartner", t3.language, t3.last_bump, t3.members, t3.name, t3.notification_sent, t3.notifications, t3.promo_post, t3.promo_post_interval, t3.promo_post_last, t3.promo_post_sent, t3.promo_post_time, t3.telegram_id, t3.tgclient_id, t3."TopPos", t3."Url", t3."user"
FROM (
    SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKeyClaim_0
    LIMIT 2
) AS t
LEFT JOIN (
    SELECT c.id, c.channel_id, c.user_id, c0.id AS id0, c0.avatar, c0.bumps, c0.description, c0.flag, c0."Hidden", c0."IsPartner", c0.language, c0.last_bump, c0.members, c0.name, c0.notification_sent, c0.notifications, c0.promo_post, c0.promo_post_interval, c0.promo_post_last, c0.promo_post_sent, c0.promo_post_time, c0.telegram_id, c0.tgclient_id, c0."TopPos", c0."Url", c0."user", t0.id AS id1, t0.channel, t0.tag, t0.id0 AS id00, t0.text
    FROM "ChannelAccess" AS c
    LEFT JOIN "Channel" AS c0 ON c.channel_id = c0.id
    LEFT JOIN (
        SELECT c1.id, c1.channel, c1.tag, t2.id AS id0, t2.text
        FROM "ChannelHasTag" AS c1
        LEFT JOIN "Tag" AS t2 ON c1.tag = t2.id
    ) AS t0 ON c0.id = t0.channel
) AS t1 ON t.id = t1.user_id
LEFT JOIN (
    SELECT c2.id, c2.channel_id, c2.content, c2.created_at, c2.parent_id, c2.rating, c2.user_id, c3.id AS id0, c3.avatar, c3.bumps, c3.description, c3.flag, c3."Hidden", c3."IsPartner", c3.language, c3.last_bump, c3.members, c3.name, c3.notification_sent, c3.notifications, c3.promo_post, c3.promo_post_interval, c3.promo_post_last, c3.promo_post_sent, c3.promo_post_time, c3.telegram_id, c3.tgclient_id, c3."TopPos", c3."Url", c3."user"
    FROM "Comment" AS c2
    INNER JOIN "Channel" AS c3 ON c2.channel_id = c3.id
) AS t3 ON t.id = t3.user_id
ORDER BY t.id, t1.id, t1.id0, t1.id1, t1.id00, t3.id
2024-05-05 21:14:48.963 +03:00 [INF] Route matched with {action = "ValidateUniqueKey", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateUniqueKey(System.String) on controller TgCheckerApi.Controllers.AuthController (TgCheckerApi).
2024-05-05 21:14:48.972 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uniqueKey_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "User" AS u
    WHERE u.unique_key = @__uniqueKey_0)
2024-05-05 21:14:48.977 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-05-05 21:14:48.978 +03:00 [INF] Executed action TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi) in 7.0322ms
2024-05-05 21:14:48.979 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.AuthController.ValidateUniqueKey (TgCheckerApi)'
2024-05-05 21:14:48.979 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.channel_id AS "ChannelId", p.id AS "PaymentId", p.subtype_id AS "ChannelSubscriptionType", p.created_at AS "PurchaseDate", p.duration AS "SubscriptionDuration", p.amount_value AS "AmountValue", p.amount_currency AS "AmountCurrency"
FROM "Payments" AS p
WHERE p.user_id = @__userId_0 AND p.status = 'Succeeded'
2024-05-05 21:14:48.980 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7256/api/Auth/ValidateUniqueKey/bebra - - - 200 0 - 22.4902ms
2024-05-05 21:14:48.983 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.GetModels.PaymentHistoryModel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-05 21:14:48.986 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi) in 33.2272ms
2024-05-05 21:14:48.987 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.GetPaymentHistory (TgCheckerApi)'
2024-05-05 21:14:48.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/User/PaymentHistory - - - 200 3338 application/json;+charset=utf-8 41.3871ms
2024-05-05 21:14:49.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7256/api/Tags - -
2024-05-05 21:14:49.985 +03:00 [INF] CORS policy execution successful.
2024-05-05 21:14:49.986 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:14:49.987 +03:00 [INF] Route matched with {action = "GetTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetTags() on controller TgCheckerApi.Controllers.TagsController (TgCheckerApi).
2024-05-05 21:14:49.991 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t.text
FROM "Tag" AS t
2024-05-05 21:14:49.994 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-05-05 21:14:49.995 +03:00 [INF] Executed action TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi) in 6.2362ms
2024-05-05 21:14:49.997 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TagsController.GetTags (TgCheckerApi)'
2024-05-05 21:14:49.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7256/api/Tags - - - 200 - text/plain;+charset=utf-8 13.7850ms
2024-05-05 21:15:18.578 +03:00 [WRN] New task timed out. Hash: 5ec5950f142bca89e2aa6cb4127bdea9391929bfdb585a0fda8bc0406276e946
2024-05-05 21:15:18.579 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 21:15:18.615 +03:00 [ERR] Invalid operation when updating user profile.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.AuthController.UpdateUserProfileIfNeeded(User user) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\AuthController.cs:line 146
2024-05-05 21:17:57.170 +03:00 [WRN] New task timed out. Hash: b392c27600d067df509777d31536b7ba1f5faa486300f61983bc6d521be002b9
2024-05-05 21:17:57.171 +03:00 [WRN] Response is not in expected 'OkObjectResult' format or does not contain a string value.
2024-05-05 21:17:57.196 +03:00 [ERR] An unexpected error occurred while processing the channels.
System.InvalidOperationException: Invalid response format.
   at TgCheckerApi.Services.WebSocketService.ResponseToObject[T](IActionResult response) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Services\WebSocketService.cs:line 75
   at TgCheckerApi.Controllers.BotController.CallSubscribersByChannels(DailySubRequest dailySubRequest) in C:\Users\timar\source\Repos\TgCheckerApidfgdfgdfg\TgCheckerApi\Controllers\BotController.cs:line 281
2024-05-05 21:17:57.199 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-05 21:17:57.201 +03:00 [INF] Executed action TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi) in 300198.6074ms
2024-05-05 21:17:57.202 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.BotController.CallSubscribersByChannels (TgCheckerApi)'
2024-05-05 21:17:57.203 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7256/api/Bot/getSubscribersByChannels application/json;+charset=utf-8 35 - 400 - text/plain;+charset=utf-8 300321.2436ms
