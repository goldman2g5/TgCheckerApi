2024-03-06 01:13:07.673 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:13:07.946 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:13:07.989 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:13:07.990 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:13:07.991 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:13:07.991 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:13:07.993 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:13:07.994 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:13:07.997 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:13:08.047 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:13:08.420 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:13:08.421 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:13:08.424 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:13:08.425 +03:00 [INF] Hosting environment: Development
2024-03-06 01:13:08.425 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:13:08.472 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:13:08.507 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:13:08.5066830+03:00"
2024-03-06 01:13:08.514 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:13:09.424 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:13:09.529 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:13:09.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=9cFaVAfkn0EE3Aykhnqc3g - -
2024-03-06 01:13:09.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 1071.1192ms
2024-03-06 01:13:09.545 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:13:09.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger - -
2024-03-06 01:13:09.610 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger - - - 301 0 - 25.4582ms
2024-03-06 01:13:09.617 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:13:09.857 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - -
2024-03-06 01:13:09.858 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - -
2024-03-06 01:13:09.859 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - -
2024-03-06 01:13:09.861 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 244.3470ms
2024-03-06 01:13:09.938 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-06 01:13:09.938 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-06 01:13:09.939 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 80.4871ms
2024-03-06 01:13:09.940 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - - - 200 144929 text/css 82.7788ms
2024-03-06 01:13:09.943 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:13:09.944 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:13:09.951 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.4650ms
2024-03-06 01:13:09.954 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-06 01:13:09.955 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 96.3564ms
2024-03-06 01:13:09.968 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.2712ms
2024-03-06 01:13:10.444 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:13:10.479 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/favicon-32x32.png - -
2024-03-06 01:13:10.483 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-03-06 01:13:10.485 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/favicon-32x32.png - - - 200 628 image/png 5.9977ms
2024-03-06 01:13:10.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.1956ms
2024-03-06 01:13:11.681 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:13:11.862 +03:00 [ERR] Failed to invoke hub method 'ReceiveStream'.
System.OperationCanceledException: The underlying connection was closed.
   at System.Threading.Channels.AsyncOperation`1.GetResult(Int16 token)
   at System.Threading.Channels.ChannelReader`1.ReadAllAsync(CancellationToken cancellationToken)+MoveNext()
   at System.Threading.Channels.ChannelReader`1.ReadAllAsync(CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at TgCheckerApi.Websockets.BotHub.ReceiveStream(IAsyncEnumerable`1 stream, String param) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Hubs\BotHub.cs:line 39
   at TgCheckerApi.Websockets.BotHub.ReceiveStream(IAsyncEnumerable`1 stream, String param) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Hubs\BotHub.cs:line 39
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.ExecuteMethod(ObjectMethodExecutor methodExecutor, Hub hub, Object[] arguments)
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.<Invoke>g__ExecuteInvocation|16_0(DefaultHubDispatcher`1 dispatcher, ObjectMethodExecutor methodExecutor, THub hub, Object[] arguments, AsyncServiceScope scope, IHubActivator`1 hubActivator, HubConnectionContext connection, HubMethodInvocationMessage hubMethodInvocationMessage, Boolean isStreamCall)
2024-03-06 01:13:11.872 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:13:11.8727159+03:00"
2024-03-06 01:13:11.863 +03:00 [INF] Executed endpoint '/BotHub'
2024-03-06 01:13:11.943 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/BotHub?id=9cFaVAfkn0EE3Aykhnqc3g - - - 101 - - 2404.5631ms
2024-03-06 01:13:18.402 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:13:18.406 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:13:18.422 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:13:18.425 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:13:18.426 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:13:18.441 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 19.2133ms
2024-03-06 01:13:18.466 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=Nd2UI6d9Md6kc4KQcrIpbQ - -
2024-03-06 01:13:18.476 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:13:19.053 +03:00 [INF] Received HTTP response headers after 640.3805ms - 200
2024-03-06 01:13:19.057 +03:00 [INF] End processing HTTP request after 657.4331ms - 200
2024-03-06 01:13:19.064 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-06 01:13:33.383 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/User application/json 165
2024-03-06 01:13:33.385 +03:00 [INF] Executing endpoint 'TgCheckerApi.MapperProfiles.UserController.PostUser (TgCheckerApi)'
2024-03-06 01:13:33.421 +03:00 [INF] Route matched with {action = "PostUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.BaseModels.User]] PostUser(TgCheckerApi.Models.UserPostModel) on controller TgCheckerApi.MapperProfiles.UserController (TgCheckerApi).
2024-03-06 01:13:33.980 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__user_TelegramId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.telegram_id = @__user_TelegramId_0
LIMIT 1
2024-03-06 01:13:34.038 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-03-06 01:13:34.048 +03:00 [INF] Executed action TgCheckerApi.MapperProfiles.UserController.PostUser (TgCheckerApi) in 618.8275ms
2024-03-06 01:13:34.049 +03:00 [INF] Executed endpoint 'TgCheckerApi.MapperProfiles.UserController.PostUser (TgCheckerApi)'
2024-03-06 01:13:34.064 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/User application/json 165 - 400 - text/plain;+charset=utf-8 681.0547ms
2024-03-06 01:13:35.077 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Channel/ByUser/1342147816 - -
2024-03-06 01:13:35.083 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannelsByUser (TgCheckerApi)'
2024-03-06 01:13:35.089 +03:00 [INF] Route matched with {action = "GetChannelsByUser", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TgCheckerApi.Models.BaseModels.Channel]]] GetChannelsByUser(Int64) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-06 01:13:35.096 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:13:35.103 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:13:35.345 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
LEFT JOIN "User" AS u ON c."user" = u.id
WHERE u.telegram_id = @__userId_0
2024-03-06 01:13:35.352 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TgCheckerApi.Models.BaseModels.Channel, TgCheckerApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-03-06 01:13:35.394 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannelsByUser (TgCheckerApi) in 298.7305ms
2024-03-06 01:13:35.395 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannelsByUser (TgCheckerApi)'
2024-03-06 01:13:35.396 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Channel/ByUser/1342147816 - - - 200 15968 application/json;+charset=utf-8 319.1803ms
2024-03-06 01:13:37.502 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Channel/79 - -
2024-03-06 01:13:37.506 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-06 01:13:37.510 +03:00 [INF] Route matched with {action = "GetChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.ChannelGetModel]] GetChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-06 01:13:37.564 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-06 01:13:37.681 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-03-06 01:13:37.754 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-03-06 01:13:37.758 +03:00 [INF] Executing ObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.ChannelGetModel'.
2024-03-06 01:13:37.769 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi) in 256.8992ms
2024-03-06 01:13:37.773 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-06 01:13:37.774 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Channel/79 - - - 200 538 application/json;+charset=utf-8 271.8850ms
2024-03-06 01:13:38.898 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Channel/79 - -
2024-03-06 01:13:38.898 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-06 01:13:38.899 +03:00 [INF] Route matched with {action = "GetChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.ChannelGetModel]] GetChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-06 01:13:38.910 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-06 01:13:38.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-03-06 01:13:38.916 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-03-06 01:13:38.918 +03:00 [INF] Executing ObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.ChannelGetModel'.
2024-03-06 01:13:38.920 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi) in 16.2261ms
2024-03-06 01:13:38.922 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-06 01:13:38.923 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Channel/79 - - - 200 538 application/json;+charset=utf-8 25.6792ms
2024-03-06 01:13:40.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Channel/79 - -
2024-03-06 01:13:40.586 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-06 01:13:40.588 +03:00 [INF] Route matched with {action = "GetChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TgCheckerApi.Models.GetModels.ChannelGetModel]] GetChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-06 01:13:40.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__p_0
LIMIT 1
2024-03-06 01:13:40.615 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__channel_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel, c.tag, t.id, t.text
FROM "ChannelHasTag" AS c
LEFT JOIN "Tag" AS t ON c.tag = t.id
WHERE c.channel = @__channel_Id_0
2024-03-06 01:13:40.619 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.channel_id, c.expires, c.type_id
FROM "ChannelHasSubscription" AS c
WHERE c.channel_id = @__p_0
2024-03-06 01:13:40.624 +03:00 [INF] Executing ObjectResult, writing value of type 'TgCheckerApi.Models.GetModels.ChannelGetModel'.
2024-03-06 01:13:40.631 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi) in 29.0979ms
2024-03-06 01:13:40.632 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.GetChannel (TgCheckerApi)'
2024-03-06 01:13:40.633 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Channel/79 - - - 200 538 application/json;+charset=utf-8 48.1282ms
2024-03-06 01:13:41.956 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/79 - 0
2024-03-06 01:13:41.958 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-06 01:13:41.968 +03:00 [INF] Route matched with {action = "BumpChannel", controller = "Channel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BumpChannel(Int32) on controller TgCheckerApi.Controllers.ChannelController (TgCheckerApi).
2024-03-06 01:13:41.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user", u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "Channel" AS c
LEFT JOIN "User" AS u ON c."user" = u.id
WHERE c.id = @__id_0
LIMIT 1
2024-03-06 01:13:42.027 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__channelId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.multiplier
FROM "ChannelHasSubscription" AS c
LEFT JOIN "SubType" AS s ON c.type_id = s.id
WHERE c.channel_id = @__channelId_0
ORDER BY c.type_id DESC
LIMIT 1
2024-03-06 01:13:42.224 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET bumps = @p0, last_bump = @p1, notification_sent = @p2
WHERE id = @p3;
2024-03-06 01:13:42.260 +03:00 [INF] Scheduled time for notification: 3/5/2024 10:14:42 PM
2024-03-06 01:13:42.294 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:13:42.320 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:13:42.470 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "NotificationDelayedTask" (channel_id, content, content_type, date, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING id;
2024-03-06 01:13:42.504 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-03-06 01:13:42.504 +03:00 [INF] Executed action TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi) in 534.5042ms
2024-03-06 01:13:42.506 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.ChannelController.BumpChannel (TgCheckerApi)'
2024-03-06 01:13:42.509 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/api/Channel/Bump/79 - 0 - 204 - - 553.4494ms
2024-03-06 01:13:57.096 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:13:57.248 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:13:57.288 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:13:57.289 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:13:57.293 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:13:57.293 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:13:57.294 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:13:57.295 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:13:57.296 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:13:57.338 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:13:57.432 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:13:57.433 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:13:57.436 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:13:57.437 +03:00 [INF] Hosting environment: Development
2024-03-06 01:13:57.437 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:13:57.517 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:13:57.5169918+03:00"
2024-03-06 01:13:58.014 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:13:58.278 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 266.6200ms
2024-03-06 01:13:58.283 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:13:58.287 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:13:58.294 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.7719ms
2024-03-06 01:13:58.305 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.6415ms
2024-03-06 01:13:58.430 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:13:58.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:13:58.533 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:13:58.548 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.5577ms
2024-03-06 01:13:58.610 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:13:58.625 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:13:58.626 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 98.8303ms
2024-03-06 01:13:58.631 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=CtJJ73bu9ZfLEz9fCyEBmQ - -
2024-03-06 01:13:58.632 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:13:59.092 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:13:59.470 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
2024-03-06 01:13:59.528 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:13:59.5284034+03:00"
2024-03-06 01:14:07.487 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:14:07.489 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:15:49.164 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:15:49.316 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:15:49.356 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:15:49.360 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:15:49.361 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:15:49.362 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:15:49.363 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:15:49.363 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:15:49.365 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:15:49.405 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:15:49.498 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:15:49.499 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:15:49.502 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:15:49.503 +03:00 [INF] Hosting environment: Development
2024-03-06 01:15:49.503 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:15:49.586 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:15:49.5855099+03:00"
2024-03-06 01:15:49.798 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:15:49.830 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:15:49.894 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:15:49.923 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:15:49.926 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 130.4227ms
2024-03-06 01:15:49.936 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=3bbTr_cRcTfbFLhsp3NECw - -
2024-03-06 01:15:49.941 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:15:50.157 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger - -
2024-03-06 01:15:50.174 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger - - - 301 0 - 16.8165ms
2024-03-06 01:15:50.182 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:15:50.350 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - -
2024-03-06 01:15:50.351 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - -
2024-03-06 01:15:50.351 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - -
2024-03-06 01:15:50.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 172.5677ms
2024-03-06 01:15:50.364 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:15:50.364 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:15:50.376 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.2531ms
2024-03-06 01:15:50.390 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-06 01:15:50.390 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-06 01:15:50.390 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-06 01:15:50.392 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - - - 200 144929 text/css 41.6631ms
2024-03-06 01:15:50.393 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 41.9623ms
2024-03-06 01:15:50.391 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 39.8190ms
2024-03-06 01:15:50.395 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 30.7071ms
2024-03-06 01:15:50.485 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:15:50.604 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 121.4731ms
2024-03-06 01:15:51.200 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:15:51.455 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
2024-03-06 01:15:51.492 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:15:51.4920383+03:00"
2024-03-06 01:15:59.558 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:15:59.561 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:26:55.820 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:26:55.990 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:26:56.030 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:26:56.039 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:26:56.041 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:26:56.045 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:26:56.047 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:26:56.049 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:26:56.051 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:26:56.095 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:26:56.188 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:26:56.204 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:26:56.208 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:26:56.212 +03:00 [INF] Hosting environment: Development
2024-03-06 01:26:56.213 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:26:56.265 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:26:56.266 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:26:56.293 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-06T01:26:56.2914973+03:00"
2024-03-06 01:26:56.296 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:26:56.2966211+03:00"
2024-03-06 01:26:56.711 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:26:56.993 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 285.6991ms
2024-03-06 01:26:56.996 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:26:57.005 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:26:57.011 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.6562ms
2024-03-06 01:26:57.019 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.9367ms
2024-03-06 01:26:57.082 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:26:57.222 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 140.6485ms
2024-03-06 01:26:57.811 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:26:57.811 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-06 01:26:57.975 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:26:58.005 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:26:58.023 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (DbType = Int32), @p9='?' (DbType = Int32), @p8='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32), @p13='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Channel" SET "TopPos" = @p0
WHERE id = @p1;
UPDATE "Channel" SET "TopPos" = @p2
WHERE id = @p3;
UPDATE "Channel" SET "TopPos" = @p4
WHERE id = @p5;
UPDATE "Channel" SET "TopPos" = @p6
WHERE id = @p7;
UPDATE "Channel" SET "TopPos" = @p8
WHERE id = @p9;
UPDATE "Channel" SET "TopPos" = @p10
WHERE id = @p11;
UPDATE "Channel" SET "TopPos" = @p12
WHERE id = @p13;
2024-03-06 01:26:58.066 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:26:58.0665932+03:00"
2024-03-06 01:26:58.101 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "NotificationDelayedTask" (channel_id, content, content_type, date, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING id;
2024-03-06 01:26:58.123 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-06 01:26:58.128 +03:00 [INF] NotificationJob started at "2024-03-06T01:26:58.1279909+03:00"
2024-03-06 01:26:58.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:26:58.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:26:58.213 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, content_type, date, is_new, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-03-06 01:26:58.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-06 01:26:58.327 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:26:58.330 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:26:59.929 +03:00 [INF] Received HTTP response headers after 1595.1855ms - 200
2024-03-06 01:26:59.931 +03:00 [INF] End processing HTTP request after 1610.3751ms - 200
2024-03-06 01:26:59.952 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.id = @__p_0
LIMIT 1
2024-03-06 01:26:59.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "NotificationDelayedTask"
WHERE id = @p0;
2024-03-06 01:26:59.975 +03:00 [INF] NotificationJob executed successfully.
2024-03-06 01:27:00.281 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:27:00.297 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:27:00.359 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:27:00.375 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:27:00.376 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 94.4488ms
2024-03-06 01:27:00.377 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=z6_W0zndG7hv_84JUd0mdA - -
2024-03-06 01:27:00.379 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:27:06.379 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:27:06.380 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:27:06.668 +03:00 [INF] Received HTTP response headers after 287.0643ms - 200
2024-03-06 01:27:06.669 +03:00 [INF] End processing HTTP request after 290.195ms - 200
2024-03-06 01:27:06.671 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-06 01:27:30.674 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:27:30.829 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:27:30.867 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:27:30.872 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:27:30.873 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:27:30.874 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:27:30.875 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:27:30.876 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:27:30.878 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:27:30.920 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:27:31.005 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:27:31.006 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:27:31.009 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:27:31.010 +03:00 [INF] Hosting environment: Development
2024-03-06 01:27:31.011 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:27:31.044 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:27:31.074 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:27:31.080 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:27:31.082 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:27:31.109 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-06T01:27:31.1027855+03:00"
2024-03-06 01:27:31.112 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:27:31.1122495+03:00"
2024-03-06 01:27:31.147 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:27:31.183 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:27:31.191 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 149.4241ms
2024-03-06 01:27:31.192 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=x3dI-ru0acehzw932CBU2g - -
2024-03-06 01:27:31.197 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:27:31.477 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:27:31.694 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 216.2103ms
2024-03-06 01:27:31.697 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:27:31.698 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:27:31.703 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.6087ms
2024-03-06 01:27:31.714 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.7711ms
2024-03-06 01:27:31.777 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:27:31.890 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.5985ms
2024-03-06 01:27:32.551 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:27:32.551 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-06 01:27:32.692 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:27:32.6925527+03:00"
2024-03-06 01:27:32.719 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:27:32.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:27:32.896 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "NotificationDelayedTask" (channel_id, content, content_type, date, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING id;
2024-03-06 01:27:32.926 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-06 01:27:32.932 +03:00 [INF] NotificationJob started at "2024-03-06T01:27:32.9319910+03:00"
2024-03-06 01:27:32.973 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:27:32.978 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:27:32.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, content_type, date, is_new, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-03-06 01:27:33.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-06 01:27:33.078 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:27:33.081 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:27:34.316 +03:00 [INF] Received HTTP response headers after 1229.1118ms - 200
2024-03-06 01:27:34.319 +03:00 [INF] End processing HTTP request after 1245.6024ms - 200
2024-03-06 01:27:34.339 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.id = @__p_0
LIMIT 1
2024-03-06 01:27:34.356 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "NotificationDelayedTask"
WHERE id = @p0;
2024-03-06 01:27:34.361 +03:00 [INF] NotificationJob executed successfully.
2024-03-06 01:28:18.800 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:28:19.021 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:28:19.101 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:28:19.106 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:28:19.108 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:28:19.110 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:28:19.111 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:28:19.112 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:28:19.113 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:28:19.156 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:28:19.261 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:28:19.264 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:28:19.268 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:28:19.269 +03:00 [INF] Hosting environment: Development
2024-03-06 01:28:19.270 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:28:19.321 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:28:19.322 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:28:19.343 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-06T01:28:19.3420359+03:00"
2024-03-06 01:28:19.347 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:28:19.3471791+03:00"
2024-03-06 01:28:19.550 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:28:19.580 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:28:19.643 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:28:19.678 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:28:19.680 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 132.8007ms
2024-03-06 01:28:19.710 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=S60hlSxs25srDVyKa1cxDw - -
2024-03-06 01:28:19.716 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:28:19.891 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:28:20.089 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 198.1617ms
2024-03-06 01:28:20.094 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:28:20.095 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:28:20.097 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 2.8982ms
2024-03-06 01:28:20.113 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.5401ms
2024-03-06 01:28:20.172 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:28:20.287 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 115.4694ms
2024-03-06 01:28:20.774 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-06 01:28:20.774 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:28:20.908 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:28:20.9087889+03:00"
2024-03-06 01:28:20.929 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:28:20.957 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:28:21.049 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "NotificationDelayedTask" (channel_id, content, content_type, date, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING id;
2024-03-06 01:28:21.075 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-06 01:28:21.078 +03:00 [INF] NotificationJob started at "2024-03-06T01:28:21.0784913+03:00"
2024-03-06 01:28:21.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:28:21.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:28:21.180 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, content_type, date, is_new, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-03-06 01:28:21.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-06 01:28:21.262 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:28:21.266 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:28:22.477 +03:00 [INF] Received HTTP response headers after 1207.6667ms - 200
2024-03-06 01:28:22.479 +03:00 [INF] End processing HTTP request after 1222.4629ms - 200
2024-03-06 01:28:22.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.id = @__p_0
LIMIT 1
2024-03-06 01:28:22.519 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "NotificationDelayedTask"
WHERE id = @p0;
2024-03-06 01:28:22.535 +03:00 [INF] NotificationJob executed successfully.
2024-03-06 01:30:09.017 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-06 01:30:09.202 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-06 01:30:09.250 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-06 01:30:09.256 +03:00 [INF] Quartz Scheduler created
2024-03-06 01:30:09.257 +03:00 [INF] RAMJobStore initialized.
2024-03-06 01:30:09.258 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-06 01:30:09.261 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-06 01:30:09.262 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-06 01:30:09.263 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:30:09.311 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:30:09.408 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-06 01:30:09.419 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-06 01:30:09.424 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-06 01:30:09.424 +03:00 [INF] Hosting environment: Development
2024-03-06 01:30:09.429 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-06 01:30:09.466 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-06 01:30:09.499 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-06 01:30:09.500 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-06 01:30:09.501 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-06 01:30:09.522 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-06T01:30:09.5214554+03:00"
2024-03-06 01:30:09.526 +03:00 [INF] RecalculateTopPosJob started at "2024-03-06T01:30:09.5263846+03:00"
2024-03-06 01:30:09.571 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-06 01:30:09.610 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-06 01:30:09.619 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 155.1286ms
2024-03-06 01:30:09.620 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=RR1OANn6DjJvnzrZG3z62g - -
2024-03-06 01:30:09.625 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-06 01:30:09.963 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-06 01:30:10.153 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 190.2426ms
2024-03-06 01:30:10.156 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-06 01:30:10.158 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-06 01:30:10.163 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.6614ms
2024-03-06 01:30:10.179 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.6046ms
2024-03-06 01:30:10.237 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-06 01:30:10.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.4659ms
2024-03-06 01:30:11.012 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-06 01:30:11.012 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-06 01:30:11.113 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-06 01:30:11.118 +03:00 [INF] NotificationJob started at "2024-03-06T01:30:11.1179651+03:00"
2024-03-06 01:30:11.149 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-06T01:30:11.1495693+03:00"
2024-03-06 01:30:11.230 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__typeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.text
FROM "NotificationType" AS n
WHERE n.id = @__typeId_0
LIMIT 1
2024-03-06 01:30:11.248 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__channelId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
WHERE c.id = @__channelId_Value_0
LIMIT 1
2024-03-06 01:30:11.369 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Notification" (channel_id, content, content_type, date, is_new, target_telegram, type_id, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-03-06 01:30:11.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar, u.chat_id, u.last_update, u.notification_settings, u.telegram_id, u.unique_key, u.username
FROM "User" AS u
WHERE u.id = @__userId_0
LIMIT 1
2024-03-06 01:30:11.483 +03:00 [INF] Start processing HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:30:11.486 +03:00 [INF] Sending HTTP request POST "http://127.0.0.1:8000/send_notifications"
2024-03-06 01:30:12.706 +03:00 [INF] Received HTTP response headers after 1216.7863ms - 200
2024-03-06 01:30:12.710 +03:00 [INF] End processing HTTP request after 1231.9256ms - 200
2024-03-06 01:30:12.740 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
WHERE n.id = @__p_0
LIMIT 1
2024-03-06 01:30:12.768 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "NotificationDelayedTask"
WHERE id = @p0;
2024-03-06 01:30:12.776 +03:00 [INF] NotificationJob executed successfully.
2024-03-06 01:30:19.690 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:30:19.692 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-06 01:30:19.947 +03:00 [INF] Received HTTP response headers after 253.4827ms - 200
2024-03-06 01:30:19.948 +03:00 [INF] End processing HTTP request after 257.7643ms - 200
2024-03-06 01:30:19.951 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
