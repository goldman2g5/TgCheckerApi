2024-03-27 01:54:24.461 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 01:54:24.753 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 01:54:24.798 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 01:54:24.799 +03:00 [INF] Quartz Scheduler created
2024-03-27 01:54:24.800 +03:00 [INF] RAMJobStore initialized.
2024-03-27 01:54:24.801 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 01:54:24.801 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 01:54:24.802 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 01:54:24.803 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 01:54:24.861 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 01:54:25.075 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 01:54:25.076 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 01:54:25.079 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 01:54:25.080 +03:00 [INF] Hosting environment: Development
2024-03-27 01:54:25.080 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 01:54:25.161 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 01:54:25.162 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 01:54:25.180 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T01:54:25.1802379+03:00"
2024-03-27 01:54:25.187 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T01:54:25.1872350+03:00"
2024-03-27 01:54:25.402 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-27 01:54:25.486 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger - -
2024-03-27 01:54:25.512 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 01:54:25.568 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger - - - 301 0 - 81.9319ms
2024-03-27 01:54:25.627 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 01:54:26.203 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-27 01:54:26.246 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-27 01:54:26.247 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 849.1708ms
2024-03-27 01:54:26.477 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=FUOTKWdpAow6pDIMElCKbg - -
2024-03-27 01:54:26.479 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-27 01:54:26.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - -
2024-03-27 01:54:26.762 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 1134.5270ms
2024-03-27 01:54:26.773 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - -
2024-03-27 01:54:26.774 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 01:54:26.774 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - -
2024-03-27 01:54:26.841 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 01:54:26.843 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 69.1298ms
2024-03-27 01:54:27.085 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-27 01:54:27.086 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui.css - - - 200 144929 text/css 327.1914ms
2024-03-27 01:54:27.126 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-27 01:54:27.134 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 292.0262ms
2024-03-27 01:54:27.135 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 360.0229ms
2024-03-27 01:54:27.442 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-27 01:54:27.444 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 671.3126ms
2024-03-27 01:54:27.582 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 01:54:27.771 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 188.9921ms
2024-03-27 01:54:30.037 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 01:54:30.071 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 01:54:30.171 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 01:54:30.337 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T01:54:30.3372879+03:00"
2024-03-27 01:54:35.353 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 01:54:35.357 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 01:54:36.303 +03:00 [INF] Received HTTP response headers after 939.5218ms - 200
2024-03-27 01:54:36.307 +03:00 [INF] End processing HTTP request after 956.8832ms - 200
2024-03-27 01:54:36.313 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 01:54:38.871 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 01:54:38.875 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 01:54:38.900 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 01:55:14.794 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 01:55:14.963 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 01:55:15.005 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 01:55:15.009 +03:00 [INF] Quartz Scheduler created
2024-03-27 01:55:15.010 +03:00 [INF] RAMJobStore initialized.
2024-03-27 01:55:15.011 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 01:55:15.012 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 01:55:15.012 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 01:55:15.029 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 01:55:15.077 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 01:55:15.193 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 01:55:15.194 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 01:55:15.198 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 01:55:15.199 +03:00 [INF] Hosting environment: Development
2024-03-27 01:55:15.200 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 01:55:15.281 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 01:55:15.281 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 01:55:15.308 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T01:55:15.3042046+03:00"
2024-03-27 01:55:15.309 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T01:55:15.3096667+03:00"
2024-03-27 01:55:15.624 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 01:55:15.761 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-27 01:55:15.766 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 01:55:15.878 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-27 01:55:15.905 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-27 01:55:15.910 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=oZQb_jG5m1n34PPkkrJgPg - -
2024-03-27 01:55:15.913 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 150.5488ms
2024-03-27 01:55:15.913 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-27 01:55:15.972 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 351.3209ms
2024-03-27 01:55:15.989 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 01:55:15.990 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 01:55:15.995 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.5745ms
2024-03-27 01:55:16.007 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.4274ms
2024-03-27 01:55:16.104 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 01:55:16.216 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.6049ms
2024-03-27 01:55:16.864 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 01:55:16.864 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 01:55:16.902 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 01:55:17.019 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T01:55:17.0190067+03:00"
2024-03-27 01:55:21.787 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 01:55:21.790 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 01:55:21.804 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 01:55:21.972 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 162.6824ms
2024-03-27 01:55:21.975 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 01:55:21.977 +03:00 [ERR] An unhandled exception has occurred while executing the request.
WTelegram.WTException: You must connect to Telegram first
   at WTelegram.Client.SendAsync(IObject msg, Boolean isContent, Rpc rpc)
   at WTelegram.Client.Invoke[T](IMethod`1 query)
   at WTelegram.Client.Messages_GetAllDialogs(Nullable`1 folder_id)
   at WTelegram.Client.Messages_GetAllChats()
   at TgCheckerApi.Controllers.TelegramController.SendMessageAsync() in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Controllers\TelegramController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 01:55:22.100 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 500 - text/plain;+charset=utf-8 312.9605ms
2024-03-27 01:55:25.405 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 01:55:25.408 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 01:55:25.725 +03:00 [INF] Received HTTP response headers after 312.5541ms - 200
2024-03-27 01:55:25.727 +03:00 [INF] End processing HTTP request after 325.587ms - 200
2024-03-27 01:55:25.731 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 02:03:39.494 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 02:03:39.656 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 02:03:39.696 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 02:03:39.700 +03:00 [INF] Quartz Scheduler created
2024-03-27 02:03:39.701 +03:00 [INF] RAMJobStore initialized.
2024-03-27 02:03:39.702 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 02:03:39.703 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 02:03:39.704 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 02:03:39.705 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:03:39.747 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:03:39.837 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 02:03:39.841 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 02:03:39.845 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 02:03:39.845 +03:00 [INF] Hosting environment: Development
2024-03-27 02:03:39.846 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 02:03:39.919 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:03:39.919 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:03:39.941 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T02:03:39.9391903+03:00"
2024-03-27 02:03:39.944 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T02:03:39.9439688+03:00"
2024-03-27 02:03:40.228 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-27 02:03:40.289 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 02:03:40.358 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-27 02:03:40.389 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-27 02:03:40.392 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 166.3240ms
2024-03-27 02:03:40.397 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=8fiFTTGImsr1xIoJg4v65Q - -
2024-03-27 02:03:40.402 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-27 02:03:40.635 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:03:40.833 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 198.0377ms
2024-03-27 02:03:40.847 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:03:40.848 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:03:40.854 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.5523ms
2024-03-27 02:03:40.867 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.7155ms
2024-03-27 02:03:40.897 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:03:41.013 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.3189ms
2024-03-27 02:03:41.496 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 02:03:41.496 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 02:03:41.533 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 02:03:41.653 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T02:03:41.6536274+03:00"
2024-03-27 02:03:50.092 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 02:03:50.097 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 02:03:50.517 +03:00 [INF] Received HTTP response headers after 413.7006ms - 200
2024-03-27 02:03:50.520 +03:00 [INF] End processing HTTP request after 435.2646ms - 200
2024-03-27 02:03:50.525 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 02:03:54.493 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 02:03:54.496 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 02:03:54.520 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 02:05:03.123 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:05:03.134 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 11.2362ms
2024-03-27 02:05:03.182 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:05:03.183 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:05:03.185 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 1.6856ms
2024-03-27 02:05:03.197 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 14.4952ms
2024-03-27 02:05:03.254 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:05:03.257 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/favicon-32x32.png - -
2024-03-27 02:05:03.264 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-03-27 02:05:03.265 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/favicon-32x32.png - - - 200 628 image/png 8.0881ms
2024-03-27 02:05:03.276 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 22.1729ms
2024-03-27 02:05:12.052 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 02:05:12.054 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 02:05:12.055 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 02:11:43.185 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 02:11:43.340 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 02:11:43.377 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 02:11:43.439 +03:00 [INF] Quartz Scheduler created
2024-03-27 02:11:43.441 +03:00 [INF] RAMJobStore initialized.
2024-03-27 02:11:43.442 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 02:11:43.443 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 02:11:43.444 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 02:11:43.446 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:11:43.492 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:11:43.591 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 02:11:43.593 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 02:11:43.596 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 02:11:43.597 +03:00 [INF] Hosting environment: Development
2024-03-27 02:11:43.598 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 02:11:43.683 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:11:43.684 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:11:43.709 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T02:11:43.7070374+03:00"
2024-03-27 02:11:43.712 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T02:11:43.7120119+03:00"
2024-03-27 02:11:44.280 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:11:44.543 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 265.6637ms
2024-03-27 02:11:44.558 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:11:44.559 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:11:44.570 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 10.3402ms
2024-03-27 02:11:44.595 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.8283ms
2024-03-27 02:11:44.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:11:44.961 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.2434ms
2024-03-27 02:11:45.213 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 02:11:45.213 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 02:11:45.250 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 02:11:45.358 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T02:11:45.3584226+03:00"
2024-03-27 02:11:46.574 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-27 02:11:46.580 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 02:11:46.648 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-27 02:11:46.664 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-27 02:11:46.665 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 90.6644ms
2024-03-27 02:11:46.666 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=28VPp_y7AiOF3BiBV-hk9g - -
2024-03-27 02:11:46.670 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-27 02:11:51.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 02:11:51.793 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 02:11:51.816 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 02:11:53.857 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 02:11:53.861 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 02:11:54.260 +03:00 [INF] Received HTTP response headers after 392.8508ms - 200
2024-03-27 02:11:54.264 +03:00 [INF] End processing HTTP request after 415.4403ms - 200
2024-03-27 02:11:54.269 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 02:12:06.430 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:12:06.437 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 6.8774ms
2024-03-27 02:12:06.487 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:12:06.487 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:12:06.488 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 0.8993ms
2024-03-27 02:12:06.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 6.3554ms
2024-03-27 02:12:06.518 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:12:06.537 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 18.9631ms
2024-03-27 02:12:14.588 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 02:12:14.590 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 02:12:14.591 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 02:13:11.248 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 02:13:11.408 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 02:13:11.448 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 02:13:11.453 +03:00 [INF] Quartz Scheduler created
2024-03-27 02:13:11.454 +03:00 [INF] RAMJobStore initialized.
2024-03-27 02:13:11.454 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 02:13:11.455 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 02:13:11.456 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 02:13:11.457 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:13:11.506 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:13:11.603 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 02:13:11.604 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 02:13:11.609 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 02:13:11.610 +03:00 [INF] Hosting environment: Development
2024-03-27 02:13:11.611 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 02:13:11.687 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:13:11.688 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:13:11.711 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T02:13:11.7096614+03:00"
2024-03-27 02:13:11.714 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T02:13:11.7144549+03:00"
2024-03-27 02:13:12.089 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:13:12.372 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 285.5217ms
2024-03-27 02:13:12.387 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:13:12.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:13:12.398 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.5198ms
2024-03-27 02:13:12.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.0953ms
2024-03-27 02:13:12.478 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:13:12.612 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 134.2303ms
2024-03-27 02:13:13.188 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 02:13:13.188 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 02:13:13.228 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 02:13:13.337 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T02:13:13.3372091+03:00"
2024-03-27 02:13:16.778 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0
2024-03-27 02:13:16.783 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 02:13:16.849 +03:00 [INF] Executing endpoint '/BotHub/negotiate'
2024-03-27 02:13:16.863 +03:00 [INF] Executed endpoint '/BotHub/negotiate'
2024-03-27 02:13:16.864 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7256/BotHub/negotiate?negotiateVersion=0 - 0 - 200 273 application/json 86.4951ms
2024-03-27 02:13:16.865 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/BotHub?id=thmkanx1ddmaiiTz-vwx_A - -
2024-03-27 02:13:16.867 +03:00 [INF] Executing endpoint '/BotHub'
2024-03-27 02:13:21.798 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 02:13:21.800 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 02:13:22.094 +03:00 [INF] Received HTTP response headers after 288.989ms - 200
2024-03-27 02:13:22.098 +03:00 [INF] End processing HTTP request after 304.1828ms - 200
2024-03-27 02:13:22.102 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 02:13:24.704 +03:00 [ERR] Failed to invoke hub method 'ReceiveStream'.
System.OperationCanceledException: The underlying connection was closed.
   at System.Threading.Channels.AsyncOperation`1.GetResult(Int16 token)
   at System.Threading.Channels.ChannelReader`1.ReadAllAsync(CancellationToken cancellationToken)+MoveNext()
   at System.Threading.Channels.ChannelReader`1.ReadAllAsync(CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at TgCheckerApi.Websockets.BotHub.ReceiveStream(IAsyncEnumerable`1 stream, String param) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Hubs\BotHub.cs:line 39
   at TgCheckerApi.Websockets.BotHub.ReceiveStream(IAsyncEnumerable`1 stream, String param) in C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\Hubs\BotHub.cs:line 39
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.ExecuteMethod(ObjectMethodExecutor methodExecutor, Hub hub, Object[] arguments)
   at Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher`1.<Invoke>g__ExecuteInvocation|16_0(DefaultHubDispatcher`1 dispatcher, ObjectMethodExecutor methodExecutor, THub hub, Object[] arguments, AsyncServiceScope scope, IHubActivator`1 hubActivator, HubConnectionContext connection, HubMethodInvocationMessage hubMethodInvocationMessage, Boolean isStreamCall)
2024-03-27 02:13:24.707 +03:00 [INF] Executed endpoint '/BotHub'
2024-03-27 02:13:24.734 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/BotHub?id=thmkanx1ddmaiiTz-vwx_A - - - 101 - - 7868.7473ms
2024-03-27 02:13:45.192 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 02:13:45.197 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 02:13:45.211 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 02:19:54.818 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:19:54.844 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 26.1882ms
2024-03-27 02:19:54.899 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:19:54.900 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:19:54.901 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 1.3573ms
2024-03-27 02:19:54.913 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 14.1824ms
2024-03-27 02:19:55.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:19:55.026 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 22.5711ms
2024-03-27 02:20:02.409 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 02:20:02.411 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 02:20:02.412 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 02:20:54.264 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 02:20:54.440 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 02:20:54.485 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 02:20:54.490 +03:00 [INF] Quartz Scheduler created
2024-03-27 02:20:54.491 +03:00 [INF] RAMJobStore initialized.
2024-03-27 02:20:54.492 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 02:20:54.492 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 02:20:54.493 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 02:20:54.495 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:20:54.538 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:20:54.636 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 02:20:54.637 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 02:20:54.641 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 02:20:54.641 +03:00 [INF] Hosting environment: Development
2024-03-27 02:20:54.642 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 02:20:54.715 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 02:20:54.716 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 02:20:54.738 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T02:20:54.7364408+03:00"
2024-03-27 02:20:54.741 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T02:20:54.7412978+03:00"
2024-03-27 02:20:55.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 02:20:55.441 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 298.5391ms
2024-03-27 02:20:55.454 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 02:20:55.456 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 02:20:55.466 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 10.0789ms
2024-03-27 02:20:55.477 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.2049ms
2024-03-27 02:20:55.611 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 02:20:55.743 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.3547ms
2024-03-27 02:20:56.242 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 02:20:56.242 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 02:20:56.278 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 02:20:56.394 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T02:20:56.3947776+03:00"
2024-03-27 03:03:48.069 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:03:48.281 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:03:48.322 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:03:48.326 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:03:48.327 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:03:48.329 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:03:48.329 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:03:48.330 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:03:48.331 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:03:48.377 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:03:48.507 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:03:48.508 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:03:48.511 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:03:48.512 +03:00 [INF] Hosting environment: Development
2024-03-27 03:03:48.513 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:03:48.572 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:03:48.573 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:03:48.597 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:03:48.5934829+03:00"
2024-03-27 03:03:48.597 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:03:48.5977494+03:00"
2024-03-27 03:03:49.563 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:03:49.856 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 297.6632ms
2024-03-27 03:03:49.869 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:03:49.870 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:03:49.874 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.7817ms
2024-03-27 03:03:49.894 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.4329ms
2024-03-27 03:03:49.964 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:03:50.148 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 183.7722ms
2024-03-27 03:03:50.435 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:03:50.435 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:03:50.472 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:03:50.592 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:03:50.5925381+03:00"
2024-03-27 03:04:15.104 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:04:15.263 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:04:15.301 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:04:15.305 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:04:15.306 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:04:15.307 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:04:15.307 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:04:15.308 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:04:15.309 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:04:15.350 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:04:15.470 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:04:15.471 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:04:15.474 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:04:15.475 +03:00 [INF] Hosting environment: Development
2024-03-27 03:04:15.476 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:04:15.547 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:04:15.547 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:04:15.573 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:04:15.5709843+03:00"
2024-03-27 03:04:15.575 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:04:15.5756330+03:00"
2024-03-27 03:04:15.736 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:04:16.004 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 270.8182ms
2024-03-27 03:04:16.018 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:04:16.019 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:04:16.025 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.0731ms
2024-03-27 03:04:16.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.6513ms
2024-03-27 03:04:16.075 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:04:16.196 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 120.9477ms
2024-03-27 03:04:17.037 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:04:17.037 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:04:17.075 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:04:17.186 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:04:17.1868597+03:00"
2024-03-27 03:04:25.669 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:04:25.672 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:04:26.046 +03:00 [INF] Received HTTP response headers after 369.8476ms - 400
2024-03-27 03:04:26.048 +03:00 [INF] End processing HTTP request after 384.715ms - 400
2024-03-27 03:04:26.054 +03:00 [ERR] Failed to process channels via HTTP request. Status: BadRequest, Content: Error: An error occurred while saving the entity changes. See the inner exception for details.
2024-03-27 03:04:37.295 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 03:04:37.302 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 03:04:37.401 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:04:37.420 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:04:37.428 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 2.9215ms
2024-03-27 03:04:37.430 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:04:37.432 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'WTelegram.Client' while attempting to activate 'TgCheckerApi.Controllers.TelegramController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method325(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:04:37.475 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 500 - text/plain;+charset=utf-8 179.5174ms
2024-03-27 03:05:28.637 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:05:28.812 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:05:28.899 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:05:28.905 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:05:28.907 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:05:28.909 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:05:28.910 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:05:28.911 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:05:28.913 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:05:28.964 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:05:29.061 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:05:29.062 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:05:29.066 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:05:29.067 +03:00 [INF] Hosting environment: Development
2024-03-27 03:05:29.068 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:05:29.147 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:05:29.148 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:05:29.173 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:05:29.1701219+03:00"
2024-03-27 03:05:29.174 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:05:29.1743254+03:00"
2024-03-27 03:05:29.853 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:05:30.130 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 279.5379ms
2024-03-27 03:05:30.141 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:05:30.142 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:05:30.149 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.2149ms
2024-03-27 03:05:30.164 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.9107ms
2024-03-27 03:05:30.196 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:05:30.391 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 194.6243ms
2024-03-27 03:05:30.671 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:05:30.671 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:05:30.708 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:05:30.826 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:05:30.8261164+03:00"
2024-03-27 03:05:38.635 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 03:05:38.644 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 03:05:38.767 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:05:38.796 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:05:38.811 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 3.8552ms
2024-03-27 03:05:38.816 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:05:38.818 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'WTelegram.Client' while attempting to activate 'TgCheckerApi.Controllers.TelegramController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method323(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:05:38.869 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 500 - text/plain;+charset=utf-8 234.1546ms
2024-03-27 03:05:39.331 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:05:39.336 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:05:39.731 +03:00 [INF] Received HTTP response headers after 388.7599ms - 200
2024-03-27 03:05:39.734 +03:00 [INF] End processing HTTP request after 411.3902ms - 200
2024-03-27 03:05:39.739 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:07:18.162 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:07:18.317 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:07:18.358 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:07:18.363 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:07:18.364 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:07:18.365 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:07:18.366 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:07:18.368 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:07:18.369 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:07:18.411 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:07:18.506 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:07:18.507 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:07:18.511 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:07:18.512 +03:00 [INF] Hosting environment: Development
2024-03-27 03:07:18.513 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:07:18.577 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:07:18.578 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:07:18.605 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:07:18.6008801+03:00"
2024-03-27 03:07:18.606 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:07:18.6060023+03:00"
2024-03-27 03:07:19.131 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:07:19.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 290.7301ms
2024-03-27 03:07:19.431 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:07:19.432 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:07:19.444 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 11.3911ms
2024-03-27 03:07:19.454 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.7280ms
2024-03-27 03:07:19.486 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:07:19.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 142.3823ms
2024-03-27 03:07:20.181 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:07:20.181 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:07:20.217 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:07:20.325 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:07:20.3252667+03:00"
2024-03-27 03:07:28.747 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:07:28.751 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:07:29.137 +03:00 [INF] Received HTTP response headers after 379.0352ms - 200
2024-03-27 03:07:29.141 +03:00 [INF] End processing HTTP request after 402.839ms - 200
2024-03-27 03:07:29.145 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:08:21.813 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:08:21.975 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:08:22.015 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:08:22.019 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:08:22.020 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:08:22.021 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:08:22.022 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:08:22.023 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:08:22.024 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:08:22.071 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:08:22.169 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:08:22.170 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:08:22.174 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:08:22.176 +03:00 [INF] Hosting environment: Development
2024-03-27 03:08:22.177 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:08:22.293 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:08:22.294 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:08:22.320 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:08:22.3161826+03:00"
2024-03-27 03:08:22.321 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:08:22.3212620+03:00"
2024-03-27 03:08:22.941 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:08:23.222 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 283.4320ms
2024-03-27 03:08:23.233 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:08:23.235 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:08:23.245 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.6316ms
2024-03-27 03:08:23.264 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 30.8212ms
2024-03-27 03:08:23.291 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:08:23.424 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.6560ms
2024-03-27 03:08:23.890 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:08:23.890 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:08:23.930 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:08:24.056 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:08:24.0569304+03:00"
2024-03-27 03:08:28.320 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 03:08:28.331 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 03:08:28.440 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:08:28.469 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:08:28.483 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 4.8678ms
2024-03-27 03:08:28.486 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:08:28.488 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'WTelegram.Client' while attempting to activate 'TgCheckerApi.Controllers.TelegramController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method323(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:08:28.527 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 500 - text/plain;+charset=utf-8 206.9863ms
2024-03-27 03:08:32.476 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:08:32.482 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:08:32.866 +03:00 [INF] Received HTTP response headers after 377.2352ms - 200
2024-03-27 03:08:32.870 +03:00 [INF] End processing HTTP request after 402.2116ms - 200
2024-03-27 03:08:32.876 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:30:09.660 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:30:09.883 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:30:09.925 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:30:09.930 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:30:09.931 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:30:09.933 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:30:09.934 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:30:09.935 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:30:09.937 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:30:09.992 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:30:10.120 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:30:10.121 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:30:10.127 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:30:10.128 +03:00 [INF] Hosting environment: Development
2024-03-27 03:30:10.129 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:30:10.210 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:30:10.212 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:30:10.243 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:30:10.2390537+03:00"
2024-03-27 03:30:10.244 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:30:10.2439714+03:00"
2024-03-27 03:30:10.746 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:30:11.015 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 272.0789ms
2024-03-27 03:30:11.027 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:30:11.028 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:30:11.031 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 4.2400ms
2024-03-27 03:30:11.047 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.3151ms
2024-03-27 03:30:11.084 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:30:11.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 131.6603ms
2024-03-27 03:30:11.861 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:30:11.861 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:30:11.900 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:30:12.020 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:30:12.0202288+03:00"
2024-03-27 03:30:17.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 03:30:17.850 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 03:30:17.967 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:30:17.997 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:30:19.308 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-03-27 03:30:19.316 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 1310.8293ms
2024-03-27 03:30:19.319 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:30:19.325 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 200 0 - 1484.5299ms
2024-03-27 03:30:20.394 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:30:20.399 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:30:20.904 +03:00 [INF] Received HTTP response headers after 499.5387ms - 200
2024-03-27 03:30:20.907 +03:00 [INF] End processing HTTP request after 520.63ms - 200
2024-03-27 03:30:20.913 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:30:23.802 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 03:30:23.804 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:30:23.806 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:30:24.489 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-03-27 03:30:24.491 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 683.635ms
2024-03-27 03:30:24.493 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:30:24.494 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 200 0 - 691.9171ms
2024-03-27 03:30:30.807 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - -
2024-03-27 03:30:30.809 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:30:30.810 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync() on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:30:31.547 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-03-27 03:30:31.548 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi) in 736.8772ms
2024-03-27 03:30:31.553 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.SendMessageAsync (TgCheckerApi)'
2024-03-27 03:30:31.554 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/SendMessage - - - 200 0 - 746.9619ms
2024-03-27 03:34:54.738 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:34:54.906 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:34:54.948 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:34:54.952 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:34:54.953 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:34:54.954 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:34:54.955 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:34:54.956 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:34:54.957 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:34:55.003 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:34:55.141 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:34:55.142 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:34:55.146 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:34:55.147 +03:00 [INF] Hosting environment: Development
2024-03-27 03:34:55.147 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:34:55.225 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:34:55.226 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:34:55.256 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:34:55.2514928+03:00"
2024-03-27 03:34:55.256 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:34:55.2566094+03:00"
2024-03-27 03:34:56.627 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:34:56.896 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:34:56.896 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:34:56.901 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 277.0652ms
2024-03-27 03:34:56.935 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:34:57.052 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:34:57.0521438+03:00"
2024-03-27 03:34:57.327 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:34:57.330 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 3.8457ms
2024-03-27 03:34:57.334 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:34:57.352 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.0182ms
2024-03-27 03:34:57.387 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:34:57.519 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 131.6775ms
2024-03-27 03:35:05.359 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:35:05.362 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:35:05.927 +03:00 [INF] Received HTTP response headers after 561.147ms - 200
2024-03-27 03:35:05.929 +03:00 [INF] End processing HTTP request after 576.6298ms - 200
2024-03-27 03:35:05.932 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:36:01.392 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/GetLastMessages?chatId=1001748293344 - -
2024-03-27 03:36:01.406 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 03:36:01.497 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastMessagesAsync (TgCheckerApi)'
2024-03-27 03:36:01.525 +03:00 [INF] Route matched with {action = "GetLastMessages", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastMessagesAsync(Int64) on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:36:02.028 +03:00 [ERR] Failed to retrieve messages: CHAT_ID_INVALID
2024-03-27 03:36:02.035 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-03-27 03:36:02.042 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.GetLastMessagesAsync (TgCheckerApi) in 511.1572ms
2024-03-27 03:36:02.043 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastMessagesAsync (TgCheckerApi)'
2024-03-27 03:36:02.047 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/GetLastMessages?chatId=1001748293344 - - - 500 - text/plain;+charset=utf-8 654.9567ms
2024-03-27 03:36:05.962 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/GetLastMessages?chatId=-1001748293344 - -
2024-03-27 03:36:05.965 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastMessagesAsync (TgCheckerApi)'
2024-03-27 03:36:05.966 +03:00 [INF] Route matched with {action = "GetLastMessages", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastMessagesAsync(Int64) on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:36:06.068 +03:00 [ERR] Failed to retrieve messages: PEER_ID_INVALID
2024-03-27 03:36:06.068 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-03-27 03:36:06.069 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.GetLastMessagesAsync (TgCheckerApi) in 101.8902ms
2024-03-27 03:36:06.070 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastMessagesAsync (TgCheckerApi)'
2024-03-27 03:36:06.071 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/GetLastMessages?chatId=-1001748293344 - - - 500 - text/plain;+charset=utf-8 108.6661ms
2024-03-27 03:47:38.095 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:47:38.252 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:47:38.294 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:47:38.298 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:47:38.300 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:47:38.301 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:47:38.303 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:47:38.306 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:47:38.307 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:47:38.352 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:47:38.455 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:47:38.456 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:47:38.460 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:47:38.461 +03:00 [INF] Hosting environment: Development
2024-03-27 03:47:38.463 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:47:38.548 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:47:38.549 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:47:38.595 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:47:38.5843974+03:00"
2024-03-27 03:47:38.595 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:47:38.5952508+03:00"
2024-03-27 03:47:39.026 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:47:39.312 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 290.0421ms
2024-03-27 03:47:39.327 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:47:39.328 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:47:39.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.7887ms
2024-03-27 03:47:39.345 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.3411ms
2024-03-27 03:47:39.435 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:47:39.538 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - TgCheckerApi.Controllers.TelegramController.GetChannelAccessHash (TgCheckerApi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:47:39.559 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 123.8634ms
2024-03-27 03:47:40.338 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:47:40.338 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:47:40.380 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:47:40.513 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:47:40.5136752+03:00"
2024-03-27 03:48:12.843 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:48:13.002 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:48:13.041 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:48:13.045 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:48:13.046 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:48:13.056 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:48:13.057 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:48:13.057 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:48:13.059 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:48:13.104 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:48:13.199 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:48:13.201 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:48:13.204 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:48:13.206 +03:00 [INF] Hosting environment: Development
2024-03-27 03:48:13.206 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:48:13.278 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:48:13.279 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:48:13.303 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:48:13.2997933+03:00"
2024-03-27 03:48:13.304 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:48:13.3041827+03:00"
2024-03-27 03:48:13.913 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:48:14.178 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 268.5200ms
2024-03-27 03:48:14.194 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:48:14.196 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:48:14.202 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.0882ms
2024-03-27 03:48:14.214 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.4214ms
2024-03-27 03:48:14.282 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:48:14.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 131.2703ms
2024-03-27 03:48:14.820 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:48:14.820 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:48:14.856 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:48:14.967 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:48:14.9679092+03:00"
2024-03-27 03:48:27.443 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:48:27.599 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:48:27.642 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:48:27.646 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:48:27.647 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:48:27.649 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:48:27.649 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:48:27.650 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:48:27.652 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:48:27.695 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:48:27.790 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:48:27.791 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:48:27.794 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:48:27.795 +03:00 [INF] Hosting environment: Development
2024-03-27 03:48:27.796 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:48:27.866 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:48:27.867 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:48:27.954 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:48:27.8876371+03:00"
2024-03-27 03:48:27.954 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:48:27.9546951+03:00"
2024-03-27 03:48:28.390 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:48:28.659 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 272.3178ms
2024-03-27 03:48:28.672 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:48:28.674 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:48:28.680 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.8863ms
2024-03-27 03:48:28.693 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.4845ms
2024-03-27 03:48:28.769 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:48:28.869 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - TgCheckerApi.Controllers.TelegramController.GetChannelAccessHash (TgCheckerApi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:48:28.893 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 123.8294ms
2024-03-27 03:48:29.456 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:48:29.456 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:48:29.500 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:48:29.622 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:48:29.6224550+03:00"
2024-03-27 03:48:48.402 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:48:48.560 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:48:48.672 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:48:48.677 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:48:48.678 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:48:48.679 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:48:48.680 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:48:48.681 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:48:48.682 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:48:48.729 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:48:48.844 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:48:48.846 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:48:48.852 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:48:48.854 +03:00 [INF] Hosting environment: Development
2024-03-27 03:48:48.855 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:48:48.931 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:48:48.932 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:48:48.957 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:48:48.9533190+03:00"
2024-03-27 03:48:48.958 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:48:48.9580252+03:00"
2024-03-27 03:48:49.531 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:48:49.818 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 291.3118ms
2024-03-27 03:48:49.829 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:48:49.838 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:48:49.852 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 12.2536ms
2024-03-27 03:48:49.863 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.5814ms
2024-03-27 03:48:49.924 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:48:50.025 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - TgCheckerApi.Controllers.TelegramController.GetChannelAccessHash (TgCheckerApi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:48:50.053 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 128.8940ms
2024-03-27 03:48:50.451 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:48:50.451 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:48:50.490 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:48:50.609 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:48:50.6095962+03:00"
2024-03-27 03:49:53.684 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:49:53.870 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:49:53.911 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:49:53.915 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:49:53.917 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:49:53.918 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:49:53.920 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:49:53.921 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:49:53.922 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:49:53.966 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:49:54.056 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:49:54.060 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:49:54.064 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:49:54.067 +03:00 [INF] Hosting environment: Development
2024-03-27 03:49:54.068 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:49:54.136 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:49:54.137 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:49:54.162 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:49:54.1587586+03:00"
2024-03-27 03:49:54.163 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:49:54.1635419+03:00"
2024-03-27 03:49:54.830 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:49:55.109 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 282.6282ms
2024-03-27 03:49:55.121 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:49:55.122 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:49:55.128 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 5.3145ms
2024-03-27 03:49:55.139 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.7042ms
2024-03-27 03:49:55.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:49:55.359 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - TgCheckerApi.Controllers.TelegramController.GetChannelAccessHash (TgCheckerApi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:49:55.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 168.6900ms
2024-03-27 03:49:55.657 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:49:55.657 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:49:55.694 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:49:55.811 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:49:55.8118737+03:00"
2024-03-27 03:50:10.595 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:50:10.756 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:50:10.796 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:50:10.801 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:50:10.802 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:50:10.803 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:50:10.804 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:50:10.805 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:50:10.807 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:50:10.851 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:50:10.949 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:50:10.950 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:50:10.954 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:50:10.955 +03:00 [INF] Hosting environment: Development
2024-03-27 03:50:10.956 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:50:11.026 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:50:11.027 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:50:11.050 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:50:11.0467267+03:00"
2024-03-27 03:50:11.051 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:50:11.0515736+03:00"
2024-03-27 03:50:11.551 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:50:11.822 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 274.8628ms
2024-03-27 03:50:11.836 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:50:11.837 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:50:11.844 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.6183ms
2024-03-27 03:50:11.857 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.5662ms
2024-03-27 03:50:11.927 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:50:12.027 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - TgCheckerApi.Controllers.TelegramController.GetChannelAccessHash (TgCheckerApi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:50:12.049 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 121.8039ms
2024-03-27 03:50:12.596 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:50:12.596 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:50:12.644 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:50:12.764 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:50:12.7646878+03:00"
2024-03-27 03:50:58.972 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:50:59.127 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:50:59.288 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:50:59.292 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:50:59.293 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:50:59.294 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:50:59.294 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:50:59.295 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:50:59.422 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:50:59.465 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:50:59.556 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:50:59.556 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:50:59.563 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:50:59.570 +03:00 [INF] Hosting environment: Development
2024-03-27 03:50:59.570 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:50:59.637 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:50:59.637 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:50:59.657 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:50:59.6551376+03:00"
2024-03-27 03:50:59.659 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:50:59.6594921+03:00"
2024-03-27 03:51:00.418 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:51:00.839 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 422.8274ms
2024-03-27 03:51:00.853 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:51:00.854 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:51:00.861 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.7812ms
2024-03-27 03:51:00.873 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.1056ms
2024-03-27 03:51:00.947 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:51:01.041 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - TgCheckerApi.Controllers.TelegramController.GetChannelAccessHash (TgCheckerApi). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-03-27 03:51:01.061 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 113.9463ms
2024-03-27 03:51:01.099 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:51:01.099 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:51:01.135 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:51:01.252 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:51:01.2524645+03:00"
2024-03-27 03:51:09.748 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:51:09.751 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:51:10.174 +03:00 [INF] Received HTTP response headers after 419.9865ms - 200
2024-03-27 03:51:10.177 +03:00 [INF] End processing HTTP request after 435.423ms - 200
2024-03-27 03:51:10.180 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:55:07.007 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 03:55:07.157 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 03:55:07.222 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 03:55:07.227 +03:00 [INF] Quartz Scheduler created
2024-03-27 03:55:07.228 +03:00 [INF] RAMJobStore initialized.
2024-03-27 03:55:07.229 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 03:55:07.231 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 03:55:07.232 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 03:55:07.233 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:55:07.278 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:55:07.374 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 03:55:07.375 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 03:55:07.379 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 03:55:07.380 +03:00 [INF] Hosting environment: Development
2024-03-27 03:55:07.381 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 03:55:07.451 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 03:55:07.452 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 03:55:07.476 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T03:55:07.4723158+03:00"
2024-03-27 03:55:07.477 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T03:55:07.4771915+03:00"
2024-03-27 03:55:07.834 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 03:55:08.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 286.3132ms
2024-03-27 03:55:08.131 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 03:55:08.133 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 03:55:08.135 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 3.6488ms
2024-03-27 03:55:08.155 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.9879ms
2024-03-27 03:55:08.239 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 03:55:08.385 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 146.0169ms
2024-03-27 03:55:08.980 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 03:55:08.980 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 03:55:09.018 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 03:55:09.140 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T03:55:09.1400774+03:00"
2024-03-27 03:55:17.618 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:55:17.622 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 03:55:18.068 +03:00 [INF] Received HTTP response headers after 439.2785ms - 200
2024-03-27 03:55:18.073 +03:00 [INF] End processing HTTP request after 465.3411ms - 200
2024-03-27 03:55:18.078 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 03:55:19.271 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/GetMessages?channelUsername=-1001748293344 - -
2024-03-27 03:55:19.282 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 03:55:19.405 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi)'
2024-03-27 03:55:19.448 +03:00 [INF] Route matched with {action = "GetLastChannelMessages", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastChannelMessagesAsync(System.String) on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:55:20.117 +03:00 [ERR] Failed to retrieve channel messages: USERNAME_INVALID
2024-03-27 03:55:20.127 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-03-27 03:55:20.138 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi) in 680.8029ms
2024-03-27 03:55:20.140 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi)'
2024-03-27 03:55:20.146 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/GetMessages?channelUsername=-1001748293344 - - - 500 - text/plain;+charset=utf-8 874.9044ms
2024-03-27 03:55:54.251 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/GetMessages?channelUsername=Sh1za%20Pictures%20Inc - -
2024-03-27 03:55:54.257 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi)'
2024-03-27 03:55:54.265 +03:00 [INF] Route matched with {action = "GetLastChannelMessages", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastChannelMessagesAsync(System.String) on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 03:55:54.376 +03:00 [ERR] Failed to retrieve channel messages: USERNAME_INVALID
2024-03-27 03:55:54.378 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-03-27 03:55:54.380 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi) in 109.6476ms
2024-03-27 03:55:54.382 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi)'
2024-03-27 03:55:54.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/GetMessages?channelUsername=Sh1za%20Pictures%20Inc - - - 500 - text/plain;+charset=utf-8 132.7680ms
2024-03-27 04:00:10.020 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 04:00:10.021 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 04:00:10.230 +03:00 [INF] Received HTTP response headers after 208.0013ms - 200
2024-03-27 04:00:10.231 +03:00 [INF] End processing HTTP request after 211.0675ms - 200
2024-03-27 04:00:10.232 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 04:10:36.525 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 04:10:36.701 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 04:10:36.746 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 04:10:36.751 +03:00 [INF] Quartz Scheduler created
2024-03-27 04:10:36.752 +03:00 [INF] RAMJobStore initialized.
2024-03-27 04:10:36.753 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 04:10:36.754 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 04:10:36.755 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 04:10:36.757 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 04:10:36.803 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 04:10:36.906 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 04:10:36.907 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 04:10:36.911 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 04:10:36.912 +03:00 [INF] Hosting environment: Development
2024-03-27 04:10:36.913 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 04:10:36.993 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 04:10:36.994 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 04:10:37.023 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T04:10:37.0219833+03:00"
2024-03-27 04:10:37.026 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T04:10:37.0263903+03:00"
2024-03-27 04:10:37.383 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 04:10:37.659 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 278.9092ms
2024-03-27 04:10:37.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 04:10:37.675 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 04:10:37.681 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 6.3856ms
2024-03-27 04:10:37.694 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.0911ms
2024-03-27 04:10:37.733 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 04:10:37.860 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.5828ms
2024-03-27 04:10:38.517 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 04:10:38.517 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 04:10:38.554 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 04:10:38.661 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T04:10:38.6614628+03:00"
2024-03-27 04:10:47.171 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 04:10:47.175 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 04:10:47.596 +03:00 [INF] Received HTTP response headers after 414.6436ms - 200
2024-03-27 04:10:47.600 +03:00 [INF] End processing HTTP request after 439.6473ms - 200
2024-03-27 04:10:47.606 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 04:14:24.885 +03:00 [INF] User profile is available. Using 'C:\Users\timar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-27 04:14:25.046 +03:00 [INF] Default Quartz.NET properties loaded from embedded resource file
2024-03-27 04:14:25.086 +03:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2024-03-27 04:14:25.091 +03:00 [INF] Quartz Scheduler created
2024-03-27 04:14:25.092 +03:00 [INF] RAMJobStore initialized.
2024-03-27 04:14:25.093 +03:00 [INF] Quartz Scheduler 3.8.0.0 - 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2024-03-27 04:14:25.095 +03:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2024-03-27 04:14:25.096 +03:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2024-03-27 04:14:25.097 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 04:14:25.141 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 04:14:25.236 +03:00 [INF] Now listening on: http://localhost:7256
2024-03-27 04:14:25.237 +03:00 [INF] Now listening on: http://localhost:5244
2024-03-27 04:14:25.241 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 04:14:25.242 +03:00 [INF] Hosting environment: Development
2024-03-27 04:14:25.243 +03:00 [INF] Content root path: C:\Users\timar\source\Repos\goldman2g5\TgCheckerApi\TgCheckerApi\
2024-03-27 04:14:25.317 +03:00 [INF] JobFactory set to: TgCheckerApi.Quartz.QuartzJobFactory
2024-03-27 04:14:25.318 +03:00 [INF] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
2024-03-27 04:14:25.342 +03:00 [INF] LoadDelayedNotificationsJob started at "2024-03-27T04:14:25.3404616+03:00"
2024-03-27 04:14:25.345 +03:00 [INF] RecalculateTopPosJob started at "2024-03-27T04:14:25.3456330+03:00"
2024-03-27 04:14:26.155 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/index.html - -
2024-03-27 04:14:26.465 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/index.html - - - 200 - text/html;charset=utf-8 313.3094ms
2024-03-27 04:14:26.483 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_vs/browserLink - -
2024-03-27 04:14:26.485 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - -
2024-03-27 04:14:26.494 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_framework/aspnetcore-browser-refresh.js - - - 200 12356 application/javascript;+charset=utf-8 9.3358ms
2024-03-27 04:14:26.511 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.8517ms
2024-03-27 04:14:26.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - -
2024-03-27 04:14:26.789 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 203.6998ms
2024-03-27 04:14:27.023 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.avatar, c.bumps, c.description, c.flag, c."Hidden", c."IsPartner", c.language, c.last_bump, c.members, c.name, c.notification_sent, c.notifications, c.promo_post, c.promo_post_interval, c.promo_post_last, c.promo_post_sent, c.promo_post_time, c.telegram_id, c."TopPos", c."Url", c."user"
FROM "Channel" AS c
ORDER BY c.bumps DESC
2024-03-27 04:14:27.023 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT n.id, n.channel_id, n.content, n.content_type, n.date, n.target_telegram, n.type_id, n.user_id
FROM "NotificationDelayedTask" AS n
2024-03-27 04:14:27.062 +03:00 [INF] All NotificationDelayedTasks are loaded and scheduled.
2024-03-27 04:14:27.177 +03:00 [INF] RecalculateTopPosJob completed at "2024-03-27T04:14:27.1772564+03:00"
2024-03-27 04:14:35.499 +03:00 [INF] Start processing HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 04:14:35.504 +03:00 [INF] Sending HTTP request POST "https://tgsearch.info:8443/api/Bot/getSubscribersByChannels"
2024-03-27 04:14:35.869 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7256/api/Telegram/GetMessages?channelId=-1001748293344 - -
2024-03-27 04:14:35.873 +03:00 [INF] Received HTTP response headers after 362.1839ms - 200
2024-03-27 04:14:35.877 +03:00 [INF] End processing HTTP request after 388.4423ms - 200
2024-03-27 04:14:35.877 +03:00 [WRN] Failed to determine the https port for redirect.
2024-03-27 04:14:35.883 +03:00 [INF] Successfully processed all channels via HTTP request at: {DateTime.UtcNow}
2024-03-27 04:14:36.002 +03:00 [INF] Executing endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi)'
2024-03-27 04:14:36.042 +03:00 [INF] Route matched with {action = "GetLastChannelMessages", controller = "Telegram"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastChannelMessagesAsync(Int64) on controller TgCheckerApi.Controllers.TelegramController (TgCheckerApi).
2024-03-27 04:14:37.296 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2024-03-27 04:14:37.305 +03:00 [INF] Executed action TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi) in 1254.9081ms
2024-03-27 04:14:37.308 +03:00 [INF] Executed endpoint 'TgCheckerApi.Controllers.TelegramController.GetLastChannelMessagesAsync (TgCheckerApi)'
2024-03-27 04:14:37.315 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7256/api/Telegram/GetMessages?channelId=-1001748293344 - - - 404 - text/plain;+charset=utf-8 1445.4475ms
